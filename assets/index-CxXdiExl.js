function I1(s,a){for(var c=0;c<a.length;c++){const h=a[c];if(typeof h!="string"&&!Array.isArray(h)){for(const g in h)if(g!=="default"&&!(g in s)){const d=Object.getOwnPropertyDescriptor(h,g);d&&Object.defineProperty(s,g,d.get?d:{enumerable:!0,get:()=>h[g]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))h(g);new MutationObserver(g=>{for(const d of g)if(d.type==="childList")for(const A of d.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&h(A)}).observe(document,{childList:!0,subtree:!0});function c(g){const d={};return g.integrity&&(d.integrity=g.integrity),g.referrerPolicy&&(d.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?d.credentials="include":g.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function h(g){if(g.ep)return;g.ep=!0;const d=c(g);fetch(g.href,d)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function xs(s){const a=Object.create(null);for(const c of s.split(","))a[c]=1;return c=>c in a}const Qe={},cr=[],pn=()=>{},y1=()=>!1,wi=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),ws=s=>s.startsWith("onUpdate:"),vt=Object.assign,ps=(s,a)=>{const c=s.indexOf(a);c>-1&&s.splice(c,1)},_1=Object.prototype.hasOwnProperty,Ue=(s,a)=>_1.call(s,a),Ee=Array.isArray,Or=s=>pi(s)==="[object Map]",T1=s=>pi(s)==="[object Set]",me=s=>typeof s=="function",dt=s=>typeof s=="string",gr=s=>typeof s=="symbol",ft=s=>s!==null&&typeof s=="object",Wo=s=>(ft(s)||me(s))&&me(s.then)&&me(s.catch),S1=Object.prototype.toString,pi=s=>S1.call(s),N1=s=>pi(s).slice(8,-1),O1=s=>pi(s)==="[object Object]",As=s=>dt(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,Rr=xs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ai=s=>{const a=Object.create(null);return c=>a[c]||(a[c]=s(c))},R1=/-(\w)/g,Jt=Ai(s=>s.replace(R1,(a,c)=>c?c.toUpperCase():"")),D1=/\B([A-Z])/g,qn=Ai(s=>s.replace(D1,"-$1").toLowerCase()),Ei=Ai(s=>s.charAt(0).toUpperCase()+s.slice(1)),Xi=Ai(s=>s?`on${Ei(s)}`:""),kn=(s,a)=>!Object.is(s,a),Yi=(s,...a)=>{for(let c=0;c<s.length;c++)s[c](...a)},Go=(s,a,c,h=!1)=>{Object.defineProperty(s,a,{configurable:!0,enumerable:!1,writable:h,value:c})},M1=s=>{const a=parseFloat(s);return isNaN(a)?s:a};let no;const Ci=()=>no||(no=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Es(s){if(Ee(s)){const a={};for(let c=0;c<s.length;c++){const h=s[c],g=dt(h)?L1(h):Es(h);if(g)for(const d in g)a[d]=g[d]}return a}else if(dt(s)||ft(s))return s}const v1=/;(?![^(]*\))/g,B1=/:([^]+)/,P1=/\/\*[^]*?\*\//g;function L1(s){const a={};return s.replace(P1,"").split(v1).forEach(c=>{if(c){const h=c.split(B1);h.length>1&&(a[h[0].trim()]=h[1].trim())}}),a}function Cs(s){let a="";if(dt(s))a=s;else if(Ee(s))for(let c=0;c<s.length;c++){const h=Cs(s[c]);h&&(a+=h+" ")}else if(ft(s))for(const c in s)s[c]&&(a+=c+" ");return a.trim()}const F1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",k1=xs(F1);function Xo(s){return!!s||s===""}/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vt;class U1{constructor(a=!1){this.detached=a,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vt,!a&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let a,c;if(this.scopes)for(a=0,c=this.scopes.length;a<c;a++)this.scopes[a].pause();for(a=0,c=this.effects.length;a<c;a++)this.effects[a].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let a,c;if(this.scopes)for(a=0,c=this.scopes.length;a<c;a++)this.scopes[a].resume();for(a=0,c=this.effects.length;a<c;a++)this.effects[a].resume()}}run(a){if(this._active){const c=Vt;try{return Vt=this,a()}finally{Vt=c}}}on(){++this._on===1&&(this.prevScope=Vt,Vt=this)}off(){this._on>0&&--this._on===0&&(Vt=this.prevScope,this.prevScope=void 0)}stop(a){if(this._active){this._active=!1;let c,h;for(c=0,h=this.effects.length;c<h;c++)this.effects[c].stop();for(this.effects.length=0,c=0,h=this.cleanups.length;c<h;c++)this.cleanups[c]();if(this.cleanups.length=0,this.scopes){for(c=0,h=this.scopes.length;c<h;c++)this.scopes[c].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!a){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.parent=void 0}}}function V1(){return Vt}let qe;const zi=new WeakSet;class Yo{constructor(a){this.fn=a,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vt&&Vt.active&&Vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zi.has(this)&&(zi.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Zo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ro(this),jo(this);const a=qe,c=rn;qe=this,rn=!0;try{return this.fn()}finally{Ko(this),qe=a,rn=c,this.flags&=-3}}stop(){if(this.flags&1){for(let a=this.deps;a;a=a.nextDep)Is(a);this.deps=this.depsTail=void 0,ro(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zi.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ns(this)&&this.run()}get dirty(){return ns(this)}}let zo=0,Dr,Mr;function Zo(s,a=!1){if(s.flags|=8,a){s.next=Mr,Mr=s;return}s.next=Dr,Dr=s}function ms(){zo++}function bs(){if(--zo>0)return;if(Mr){let a=Mr;for(Mr=void 0;a;){const c=a.next;a.next=void 0,a.flags&=-9,a=c}}let s;for(;Dr;){let a=Dr;for(Dr=void 0;a;){const c=a.next;if(a.next=void 0,a.flags&=-9,a.flags&1)try{a.trigger()}catch(h){s||(s=h)}a=c}}if(s)throw s}function jo(s){for(let a=s.deps;a;a=a.nextDep)a.version=-1,a.prevActiveLink=a.dep.activeLink,a.dep.activeLink=a}function Ko(s){let a,c=s.depsTail,h=c;for(;h;){const g=h.prevDep;h.version===-1?(h===c&&(c=g),Is(h),H1(h)):a=h,h.dep.activeLink=h.prevActiveLink,h.prevActiveLink=void 0,h=g}s.deps=a,s.depsTail=c}function ns(s){for(let a=s.deps;a;a=a.nextDep)if(a.dep.version!==a.version||a.dep.computed&&(qo(a.dep.computed)||a.dep.version!==a.version))return!0;return!!s._dirty}function qo(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===Fr)||(s.globalVersion=Fr,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!ns(s))))return;s.flags|=2;const a=s.dep,c=qe,h=rn;qe=s,rn=!0;try{jo(s);const g=s.fn(s._value);(a.version===0||kn(g,s._value))&&(s.flags|=128,s._value=g,a.version++)}catch(g){throw a.version++,g}finally{qe=c,rn=h,Ko(s),s.flags&=-3}}function Is(s,a=!1){const{dep:c,prevSub:h,nextSub:g}=s;if(h&&(h.nextSub=g,s.prevSub=void 0),g&&(g.prevSub=h,s.nextSub=void 0),c.subs===s&&(c.subs=h,!h&&c.computed)){c.computed.flags&=-5;for(let d=c.computed.deps;d;d=d.nextDep)Is(d,!0)}!a&&!--c.sc&&c.map&&c.map.delete(c.key)}function H1(s){const{prevDep:a,nextDep:c}=s;a&&(a.nextDep=c,s.prevDep=void 0),c&&(c.prevDep=a,s.nextDep=void 0)}let rn=!0;const Qo=[];function yn(){Qo.push(rn),rn=!1}function _n(){const s=Qo.pop();rn=s===void 0?!0:s}function ro(s){const{cleanup:a}=s;if(s.cleanup=void 0,a){const c=qe;qe=void 0;try{a()}finally{qe=c}}}let Fr=0;class W1{constructor(a,c){this.sub=a,this.dep=c,this.version=c.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ys{constructor(a){this.computed=a,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(a){if(!qe||!rn||qe===this.computed)return;let c=this.activeLink;if(c===void 0||c.sub!==qe)c=this.activeLink=new W1(qe,this),qe.deps?(c.prevDep=qe.depsTail,qe.depsTail.nextDep=c,qe.depsTail=c):qe.deps=qe.depsTail=c,Jo(c);else if(c.version===-1&&(c.version=this.version,c.nextDep)){const h=c.nextDep;h.prevDep=c.prevDep,c.prevDep&&(c.prevDep.nextDep=h),c.prevDep=qe.depsTail,c.nextDep=void 0,qe.depsTail.nextDep=c,qe.depsTail=c,qe.deps===c&&(qe.deps=h)}return c}trigger(a){this.version++,Fr++,this.notify(a)}notify(a){ms();try{for(let c=this.subs;c;c=c.prevSub)c.sub.notify()&&c.sub.dep.notify()}finally{bs()}}}function Jo(s){if(s.dep.sc++,s.sub.flags&4){const a=s.dep.computed;if(a&&!s.dep.subs){a.flags|=20;for(let h=a.deps;h;h=h.nextDep)Jo(h)}const c=s.dep.subs;c!==s&&(s.prevSub=c,c&&(c.nextSub=s)),s.dep.subs=s}}const rs=new WeakMap,jn=Symbol(""),is=Symbol(""),kr=Symbol("");function yt(s,a,c){if(rn&&qe){let h=rs.get(s);h||rs.set(s,h=new Map);let g=h.get(c);g||(h.set(c,g=new ys),g.map=h,g.key=c),g.track()}}function In(s,a,c,h,g,d){const A=rs.get(s);if(!A){Fr++;return}const m=y=>{y&&y.trigger()};if(ms(),a==="clear")A.forEach(m);else{const y=Ee(s),C=y&&As(c);if(y&&c==="length"){const _=Number(h);A.forEach((O,z)=>{(z==="length"||z===kr||!gr(z)&&z>=_)&&m(O)})}else switch((c!==void 0||A.has(void 0))&&m(A.get(c)),C&&m(A.get(kr)),a){case"add":y?C&&m(A.get("length")):(m(A.get(jn)),Or(s)&&m(A.get(is)));break;case"delete":y||(m(A.get(jn)),Or(s)&&m(A.get(is)));break;case"set":Or(s)&&m(A.get(jn));break}}bs()}function or(s){const a=ke(s);return a===s?a:(yt(a,"iterate",kr),sn(s)?a:a.map(Dt))}function _s(s){return yt(s=ke(s),"iterate",kr),s}const G1={__proto__:null,[Symbol.iterator](){return Zi(this,Symbol.iterator,Dt)},concat(...s){return or(this).concat(...s.map(a=>Ee(a)?or(a):a))},entries(){return Zi(this,"entries",s=>(s[1]=Dt(s[1]),s))},every(s,a){return En(this,"every",s,a,void 0,arguments)},filter(s,a){return En(this,"filter",s,a,c=>c.map(Dt),arguments)},find(s,a){return En(this,"find",s,a,Dt,arguments)},findIndex(s,a){return En(this,"findIndex",s,a,void 0,arguments)},findLast(s,a){return En(this,"findLast",s,a,Dt,arguments)},findLastIndex(s,a){return En(this,"findLastIndex",s,a,void 0,arguments)},forEach(s,a){return En(this,"forEach",s,a,void 0,arguments)},includes(...s){return ji(this,"includes",s)},indexOf(...s){return ji(this,"indexOf",s)},join(s){return or(this).join(s)},lastIndexOf(...s){return ji(this,"lastIndexOf",s)},map(s,a){return En(this,"map",s,a,void 0,arguments)},pop(){return _r(this,"pop")},push(...s){return _r(this,"push",s)},reduce(s,...a){return io(this,"reduce",s,a)},reduceRight(s,...a){return io(this,"reduceRight",s,a)},shift(){return _r(this,"shift")},some(s,a){return En(this,"some",s,a,void 0,arguments)},splice(...s){return _r(this,"splice",s)},toReversed(){return or(this).toReversed()},toSorted(s){return or(this).toSorted(s)},toSpliced(...s){return or(this).toSpliced(...s)},unshift(...s){return _r(this,"unshift",s)},values(){return Zi(this,"values",Dt)}};function Zi(s,a,c){const h=_s(s),g=h[a]();return h!==s&&!sn(s)&&(g._next=g.next,g.next=()=>{const d=g._next();return d.value&&(d.value=c(d.value)),d}),g}const X1=Array.prototype;function En(s,a,c,h,g,d){const A=_s(s),m=A!==s&&!sn(s),y=A[a];if(y!==X1[a]){const O=y.apply(s,d);return m?Dt(O):O}let C=c;A!==s&&(m?C=function(O,z){return c.call(this,Dt(O),z,s)}:c.length>2&&(C=function(O,z){return c.call(this,O,z,s)}));const _=y.call(A,C,h);return m&&g?g(_):_}function io(s,a,c,h){const g=_s(s);let d=c;return g!==s&&(sn(s)?c.length>3&&(d=function(A,m,y){return c.call(this,A,m,y,s)}):d=function(A,m,y){return c.call(this,A,Dt(m),y,s)}),g[a](d,...h)}function ji(s,a,c){const h=ke(s);yt(h,"iterate",kr);const g=h[a](...c);return(g===-1||g===!1)&&Os(c[0])?(c[0]=ke(c[0]),h[a](...c)):g}function _r(s,a,c=[]){yn(),ms();const h=ke(s)[a].apply(s,c);return bs(),_n(),h}const Y1=xs("__proto__,__v_isRef,__isVue"),$o=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(gr));function z1(s){gr(s)||(s=String(s));const a=ke(this);return yt(a,"has",s),a.hasOwnProperty(s)}class ea{constructor(a=!1,c=!1){this._isReadonly=a,this._isShallow=c}get(a,c,h){if(c==="__v_skip")return a.__v_skip;const g=this._isReadonly,d=this._isShallow;if(c==="__v_isReactive")return!g;if(c==="__v_isReadonly")return g;if(c==="__v_isShallow")return d;if(c==="__v_raw")return h===(g?d?nl:ia:d?ra:na).get(a)||Object.getPrototypeOf(a)===Object.getPrototypeOf(h)?a:void 0;const A=Ee(a);if(!g){let y;if(A&&(y=G1[c]))return y;if(c==="hasOwnProperty")return z1}const m=Reflect.get(a,c,Tt(a)?a:h);return(gr(c)?$o.has(c):Y1(c))||(g||yt(a,"get",c),d)?m:Tt(m)?A&&As(c)?m:m.value:ft(m)?g?sa(m):Ss(m):m}}class ta extends ea{constructor(a=!1){super(!1,a)}set(a,c,h,g){let d=a[c];if(!this._isShallow){const y=Kn(d);if(!sn(h)&&!Kn(h)&&(d=ke(d),h=ke(h)),!Ee(a)&&Tt(d)&&!Tt(h))return y?!1:(d.value=h,!0)}const A=Ee(a)&&As(c)?Number(c)<a.length:Ue(a,c),m=Reflect.set(a,c,h,Tt(a)?a:g);return a===ke(g)&&(A?kn(h,d)&&In(a,"set",c,h):In(a,"add",c,h)),m}deleteProperty(a,c){const h=Ue(a,c);a[c];const g=Reflect.deleteProperty(a,c);return g&&h&&In(a,"delete",c,void 0),g}has(a,c){const h=Reflect.has(a,c);return(!gr(c)||!$o.has(c))&&yt(a,"has",c),h}ownKeys(a){return yt(a,"iterate",Ee(a)?"length":jn),Reflect.ownKeys(a)}}class Z1 extends ea{constructor(a=!1){super(!0,a)}set(a,c){return!0}deleteProperty(a,c){return!0}}const j1=new ta,K1=new Z1,q1=new ta(!0);const ss=s=>s,$r=s=>Reflect.getPrototypeOf(s);function Q1(s,a,c){return function(...h){const g=this.__v_raw,d=ke(g),A=Or(d),m=s==="entries"||s===Symbol.iterator&&A,y=s==="keys"&&A,C=g[s](...h),_=c?ss:a?os:Dt;return!a&&yt(d,"iterate",y?is:jn),{next(){const{value:O,done:z}=C.next();return z?{value:O,done:z}:{value:m?[_(O[0]),_(O[1])]:_(O),done:z}},[Symbol.iterator](){return this}}}}function ei(s){return function(...a){return s==="delete"?!1:s==="clear"?void 0:this}}function J1(s,a){const c={get(g){const d=this.__v_raw,A=ke(d),m=ke(g);s||(kn(g,m)&&yt(A,"get",g),yt(A,"get",m));const{has:y}=$r(A),C=a?ss:s?os:Dt;if(y.call(A,g))return C(d.get(g));if(y.call(A,m))return C(d.get(m));d!==A&&d.get(g)},get size(){const g=this.__v_raw;return!s&&yt(ke(g),"iterate",jn),Reflect.get(g,"size",g)},has(g){const d=this.__v_raw,A=ke(d),m=ke(g);return s||(kn(g,m)&&yt(A,"has",g),yt(A,"has",m)),g===m?d.has(g):d.has(g)||d.has(m)},forEach(g,d){const A=this,m=A.__v_raw,y=ke(m),C=a?ss:s?os:Dt;return!s&&yt(y,"iterate",jn),m.forEach((_,O)=>g.call(d,C(_),C(O),A))}};return vt(c,s?{add:ei("add"),set:ei("set"),delete:ei("delete"),clear:ei("clear")}:{add(g){!a&&!sn(g)&&!Kn(g)&&(g=ke(g));const d=ke(this);return $r(d).has.call(d,g)||(d.add(g),In(d,"add",g,g)),this},set(g,d){!a&&!sn(d)&&!Kn(d)&&(d=ke(d));const A=ke(this),{has:m,get:y}=$r(A);let C=m.call(A,g);C||(g=ke(g),C=m.call(A,g));const _=y.call(A,g);return A.set(g,d),C?kn(d,_)&&In(A,"set",g,d):In(A,"add",g,d),this},delete(g){const d=ke(this),{has:A,get:m}=$r(d);let y=A.call(d,g);y||(g=ke(g),y=A.call(d,g)),m&&m.call(d,g);const C=d.delete(g);return y&&In(d,"delete",g,void 0),C},clear(){const g=ke(this),d=g.size!==0,A=g.clear();return d&&In(g,"clear",void 0,void 0),A}}),["keys","values","entries",Symbol.iterator].forEach(g=>{c[g]=Q1(g,s,a)}),c}function Ts(s,a){const c=J1(s,a);return(h,g,d)=>g==="__v_isReactive"?!s:g==="__v_isReadonly"?s:g==="__v_raw"?h:Reflect.get(Ue(c,g)&&g in h?c:h,g,d)}const $1={get:Ts(!1,!1)},el={get:Ts(!1,!0)},tl={get:Ts(!0,!1)};const na=new WeakMap,ra=new WeakMap,ia=new WeakMap,nl=new WeakMap;function rl(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function il(s){return s.__v_skip||!Object.isExtensible(s)?0:rl(N1(s))}function Ss(s){return Kn(s)?s:Ns(s,!1,j1,$1,na)}function sl(s){return Ns(s,!1,q1,el,ra)}function sa(s){return Ns(s,!0,K1,tl,ia)}function Ns(s,a,c,h,g){if(!ft(s)||s.__v_raw&&!(a&&s.__v_isReactive))return s;const d=il(s);if(d===0)return s;const A=g.get(s);if(A)return A;const m=new Proxy(s,d===2?h:c);return g.set(s,m),m}function vr(s){return Kn(s)?vr(s.__v_raw):!!(s&&s.__v_isReactive)}function Kn(s){return!!(s&&s.__v_isReadonly)}function sn(s){return!!(s&&s.__v_isShallow)}function Os(s){return s?!!s.__v_raw:!1}function ke(s){const a=s&&s.__v_raw;return a?ke(a):s}function ol(s){return!Ue(s,"__v_skip")&&Object.isExtensible(s)&&Go(s,"__v_skip",!0),s}const Dt=s=>ft(s)?Ss(s):s,os=s=>ft(s)?sa(s):s;function Tt(s){return s?s.__v_isRef===!0:!1}function al(s){return ll(s,!1)}function ll(s,a){return Tt(s)?s:new cl(s,a)}class cl{constructor(a,c){this.dep=new ys,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=c?a:ke(a),this._value=c?a:Dt(a),this.__v_isShallow=c}get value(){return this.dep.track(),this._value}set value(a){const c=this._rawValue,h=this.__v_isShallow||sn(a)||Kn(a);a=h?a:ke(a),kn(a,c)&&(this._rawValue=a,this._value=h?a:Dt(a),this.dep.trigger())}}function oa(s){return Tt(s)?s.value:s}const fl={get:(s,a,c)=>a==="__v_raw"?s:oa(Reflect.get(s,a,c)),set:(s,a,c,h)=>{const g=s[a];return Tt(g)&&!Tt(c)?(g.value=c,!0):Reflect.set(s,a,c,h)}};function aa(s){return vr(s)?s:new Proxy(s,fl)}class ul{constructor(a,c,h){this.fn=a,this.setter=c,this._value=void 0,this.dep=new ys(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Fr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!c,this.isSSR=h}notify(){if(this.flags|=16,!(this.flags&8)&&qe!==this)return Zo(this,!0),!0}get value(){const a=this.dep.track();return qo(this),a&&(a.version=this.dep.version),this._value}set value(a){this.setter&&this.setter(a)}}function hl(s,a,c=!1){let h,g;return me(s)?h=s:(h=s.get,g=s.set),new ul(h,g,c)}const ti={},oi=new WeakMap;let Zn;function dl(s,a=!1,c=Zn){if(c){let h=oi.get(c);h||oi.set(c,h=[]),h.push(s)}}function gl(s,a,c=Qe){const{immediate:h,deep:g,once:d,scheduler:A,augmentJob:m,call:y}=c,C=$=>g?$:sn($)||g===!1||g===0?Fn($,1):Fn($);let _,O,z,Y,we=!1,ne=!1;if(Tt(s)?(O=()=>s.value,we=sn(s)):vr(s)?(O=()=>C(s),we=!0):Ee(s)?(ne=!0,we=s.some($=>vr($)||sn($)),O=()=>s.map($=>{if(Tt($))return $.value;if(vr($))return C($);if(me($))return y?y($,2):$()})):me(s)?a?O=y?()=>y(s,2):s:O=()=>{if(z){yn();try{z()}finally{_n()}}const $=Zn;Zn=_;try{return y?y(s,3,[Y]):s(Y)}finally{Zn=$}}:O=pn,a&&g){const $=O,We=g===!0?1/0:g;O=()=>Fn($(),We)}const Xe=V1(),Se=()=>{_.stop(),Xe&&Xe.active&&ps(Xe.effects,_)};if(d&&a){const $=a;a=(...We)=>{$(...We),Se()}}let de=ne?new Array(s.length).fill(ti):ti;const te=$=>{if(!(!(_.flags&1)||!_.dirty&&!$))if(a){const We=_.run();if(g||we||(ne?We.some((Te,Z)=>kn(Te,de[Z])):kn(We,de))){z&&z();const Te=Zn;Zn=_;try{const Z=[We,de===ti?void 0:ne&&de[0]===ti?[]:de,Y];de=We,y?y(a,3,Z):a(...Z)}finally{Zn=Te}}}else _.run()};return m&&m(te),_=new Yo(O),_.scheduler=A?()=>A(te,!1):te,Y=$=>dl($,!1,_),z=_.onStop=()=>{const $=oi.get(_);if($){if(y)y($,4);else for(const We of $)We();oi.delete(_)}},a?h?te(!0):de=_.run():A?A(te.bind(null,!0),!0):_.run(),Se.pause=_.pause.bind(_),Se.resume=_.resume.bind(_),Se.stop=Se,Se}function Fn(s,a=1/0,c){if(a<=0||!ft(s)||s.__v_skip||(c=c||new Set,c.has(s)))return s;if(c.add(s),a--,Tt(s))Fn(s.value,a,c);else if(Ee(s))for(let h=0;h<s.length;h++)Fn(s[h],a,c);else if(T1(s)||Or(s))s.forEach(h=>{Fn(h,a,c)});else if(O1(s)){for(const h in s)Fn(s[h],a,c);for(const h of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,h)&&Fn(s[h],a,c)}return s}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wr(s,a,c,h){try{return h?s(...h):s()}catch(g){mi(g,a,c)}}function An(s,a,c,h){if(me(s)){const g=Wr(s,a,c,h);return g&&Wo(g)&&g.catch(d=>{mi(d,a,c)}),g}if(Ee(s)){const g=[];for(let d=0;d<s.length;d++)g.push(An(s[d],a,c,h));return g}}function mi(s,a,c,h=!0){const g=a?a.vnode:null,{errorHandler:d,throwUnhandledErrorInProduction:A}=a&&a.appContext.config||Qe;if(a){let m=a.parent;const y=a.proxy,C=`https://vuejs.org/error-reference/#runtime-${c}`;for(;m;){const _=m.ec;if(_){for(let O=0;O<_.length;O++)if(_[O](s,y,C)===!1)return}m=m.parent}if(d){yn(),Wr(d,null,10,[s,y,C]),_n();return}}xl(s,c,g,h,A)}function xl(s,a,c,h=!0,g=!1){if(g)throw s;console.error(s)}const Mt=[];let xn=-1;const fr=[];let Pn=null,ar=0;const la=Promise.resolve();let ai=null;function wl(s){const a=ai||la;return s?a.then(this?s.bind(this):s):a}function pl(s){let a=xn+1,c=Mt.length;for(;a<c;){const h=a+c>>>1,g=Mt[h],d=Ur(g);d<s||d===s&&g.flags&2?a=h+1:c=h}return a}function Rs(s){if(!(s.flags&1)){const a=Ur(s),c=Mt[Mt.length-1];!c||!(s.flags&2)&&a>=Ur(c)?Mt.push(s):Mt.splice(pl(a),0,s),s.flags|=1,ca()}}function ca(){ai||(ai=la.then(ua))}function Al(s){Ee(s)?fr.push(...s):Pn&&s.id===-1?Pn.splice(ar+1,0,s):s.flags&1||(fr.push(s),s.flags|=1),ca()}function so(s,a,c=xn+1){for(;c<Mt.length;c++){const h=Mt[c];if(h&&h.flags&2){if(s&&h.id!==s.uid)continue;Mt.splice(c,1),c--,h.flags&4&&(h.flags&=-2),h(),h.flags&4||(h.flags&=-2)}}}function fa(s){if(fr.length){const a=[...new Set(fr)].sort((c,h)=>Ur(c)-Ur(h));if(fr.length=0,Pn){Pn.push(...a);return}for(Pn=a,ar=0;ar<Pn.length;ar++){const c=Pn[ar];c.flags&4&&(c.flags&=-2),c.flags&8||c(),c.flags&=-2}Pn=null,ar=0}}const Ur=s=>s.id==null?s.flags&2?-1:1/0:s.id;function ua(s){try{for(xn=0;xn<Mt.length;xn++){const a=Mt[xn];a&&!(a.flags&8)&&(a.flags&4&&(a.flags&=-2),Wr(a,a.i,a.i?15:14),a.flags&4||(a.flags&=-2))}}finally{for(;xn<Mt.length;xn++){const a=Mt[xn];a&&(a.flags&=-2)}xn=-1,Mt.length=0,fa(),ai=null,(Mt.length||fr.length)&&ua()}}let nn=null,ha=null;function li(s){const a=nn;return nn=s,ha=s&&s.type.__scopeId||null,a}function as(s,a=nn,c){if(!a||s._n)return s;const h=(...g)=>{h._d&&wo(-1);const d=li(a);let A;try{A=s(...g)}finally{li(d),h._d&&wo(1)}return A};return h._n=!0,h._c=!0,h._d=!0,h}function Yn(s,a,c,h){const g=s.dirs,d=a&&a.dirs;for(let A=0;A<g.length;A++){const m=g[A];d&&(m.oldValue=d[A].value);let y=m.dir[h];y&&(yn(),An(y,c,8,[s.el,m,s,a]),_n())}}const El=Symbol("_vte"),Cl=s=>s.__isTeleport;function Ds(s,a){s.shapeFlag&6&&s.component?(s.transition=a,Ds(s.component.subTree,a)):s.shapeFlag&128?(s.ssContent.transition=a.clone(s.ssContent),s.ssFallback.transition=a.clone(s.ssFallback)):s.transition=a}function da(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}function ci(s,a,c,h,g=!1){if(Ee(s)){s.forEach((we,ne)=>ci(we,a&&(Ee(a)?a[ne]:a),c,h,g));return}if(Br(h)&&!g){h.shapeFlag&512&&h.type.__asyncResolved&&h.component.subTree.component&&ci(s,a,c,h.component.subTree);return}const d=h.shapeFlag&4?Fs(h.component):h.el,A=g?null:d,{i:m,r:y}=s,C=a&&a.r,_=m.refs===Qe?m.refs={}:m.refs,O=m.setupState,z=ke(O),Y=O===Qe?()=>!1:we=>Ue(z,we);if(C!=null&&C!==y&&(dt(C)?(_[C]=null,Y(C)&&(O[C]=null)):Tt(C)&&(C.value=null)),me(y))Wr(y,m,12,[A,_]);else{const we=dt(y),ne=Tt(y);if(we||ne){const Xe=()=>{if(s.f){const Se=we?Y(y)?O[y]:_[y]:y.value;g?Ee(Se)&&ps(Se,d):Ee(Se)?Se.includes(d)||Se.push(d):we?(_[y]=[d],Y(y)&&(O[y]=_[y])):(y.value=[d],s.k&&(_[s.k]=y.value))}else we?(_[y]=A,Y(y)&&(O[y]=A)):ne&&(y.value=A,s.k&&(_[s.k]=A))};A?(Xe.id=-1,Gt(Xe,c)):Xe()}}}Ci().requestIdleCallback;Ci().cancelIdleCallback;const Br=s=>!!s.type.__asyncLoader,ga=s=>s.type.__isKeepAlive;function ml(s,a){xa(s,"a",a)}function bl(s,a){xa(s,"da",a)}function xa(s,a,c=_t){const h=s.__wdc||(s.__wdc=()=>{let g=c;for(;g;){if(g.isDeactivated)return;g=g.parent}return s()});if(bi(a,h,c),c){let g=c.parent;for(;g&&g.parent;)ga(g.parent.vnode)&&Il(h,a,c,g),g=g.parent}}function Il(s,a,c,h){const g=bi(a,s,h,!0);wa(()=>{ps(h[a],g)},c)}function bi(s,a,c=_t,h=!1){if(c){const g=c[s]||(c[s]=[]),d=a.__weh||(a.__weh=(...A)=>{yn();const m=Gr(c),y=An(a,c,s,A);return m(),_n(),y});return h?g.unshift(d):g.push(d),d}}const Tn=s=>(a,c=_t)=>{(!Hr||s==="sp")&&bi(s,(...h)=>a(...h),c)},yl=Tn("bm"),Ms=Tn("m"),_l=Tn("bu"),Tl=Tn("u"),Sl=Tn("bum"),wa=Tn("um"),Nl=Tn("sp"),Ol=Tn("rtg"),Rl=Tn("rtc");function Dl(s,a=_t){bi("ec",s,a)}const pa="components";function Ki(s,a){return Ea(pa,s,!0,a)||s}const Aa=Symbol.for("v-ndc");function Ml(s){return dt(s)?Ea(pa,s,!1)||s:s||Aa}function Ea(s,a,c=!0,h=!1){const g=nn||_t;if(g){const d=g.type;{const m=m0(d,!1);if(m&&(m===a||m===Jt(a)||m===Ei(Jt(a))))return d}const A=oo(g[s]||d[s],a)||oo(g.appContext[s],a);return!A&&h?d:A}}function oo(s,a){return s&&(s[a]||s[Jt(a)]||s[Ei(Jt(a))])}const ls=s=>s?Ha(s)?Fs(s):ls(s.parent):null,Pr=vt(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>ls(s.parent),$root:s=>ls(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>ma(s),$forceUpdate:s=>s.f||(s.f=()=>{Rs(s.update)}),$nextTick:s=>s.n||(s.n=wl.bind(s.proxy)),$watch:s=>e0.bind(s)}),qi=(s,a)=>s!==Qe&&!s.__isScriptSetup&&Ue(s,a),vl={get({_:s},a){if(a==="__v_skip")return!0;const{ctx:c,setupState:h,data:g,props:d,accessCache:A,type:m,appContext:y}=s;let C;if(a[0]!=="$"){const Y=A[a];if(Y!==void 0)switch(Y){case 1:return h[a];case 2:return g[a];case 4:return c[a];case 3:return d[a]}else{if(qi(h,a))return A[a]=1,h[a];if(g!==Qe&&Ue(g,a))return A[a]=2,g[a];if((C=s.propsOptions[0])&&Ue(C,a))return A[a]=3,d[a];if(c!==Qe&&Ue(c,a))return A[a]=4,c[a];cs&&(A[a]=0)}}const _=Pr[a];let O,z;if(_)return a==="$attrs"&&yt(s.attrs,"get",""),_(s);if((O=m.__cssModules)&&(O=O[a]))return O;if(c!==Qe&&Ue(c,a))return A[a]=4,c[a];if(z=y.config.globalProperties,Ue(z,a))return z[a]},set({_:s},a,c){const{data:h,setupState:g,ctx:d}=s;return qi(g,a)?(g[a]=c,!0):h!==Qe&&Ue(h,a)?(h[a]=c,!0):Ue(s.props,a)||a[0]==="$"&&a.slice(1)in s?!1:(d[a]=c,!0)},has({_:{data:s,setupState:a,accessCache:c,ctx:h,appContext:g,propsOptions:d}},A){let m;return!!c[A]||s!==Qe&&Ue(s,A)||qi(a,A)||(m=d[0])&&Ue(m,A)||Ue(h,A)||Ue(Pr,A)||Ue(g.config.globalProperties,A)},defineProperty(s,a,c){return c.get!=null?s._.accessCache[a]=0:Ue(c,"value")&&this.set(s,a,c.value,null),Reflect.defineProperty(s,a,c)}};function ao(s){return Ee(s)?s.reduce((a,c)=>(a[c]=null,a),{}):s}let cs=!0;function Bl(s){const a=ma(s),c=s.proxy,h=s.ctx;cs=!1,a.beforeCreate&&lo(a.beforeCreate,s,"bc");const{data:g,computed:d,methods:A,watch:m,provide:y,inject:C,created:_,beforeMount:O,mounted:z,beforeUpdate:Y,updated:we,activated:ne,deactivated:Xe,beforeDestroy:Se,beforeUnmount:de,destroyed:te,unmounted:$,render:We,renderTracked:Te,renderTriggered:Z,errorCaptured:Ie,serverPrefetch:K,expose:Bt,inheritAttrs:ct,components:ue,directives:De,filters:rt}=a;if(C&&Pl(C,h,null),A)for(const se in A){const Be=A[se];me(Be)&&(h[se]=Be.bind(c))}if(g){const se=g.call(c,c);ft(se)&&(s.data=Ss(se))}if(cs=!0,d)for(const se in d){const Be=d[se],mt=me(Be)?Be.bind(c,c):me(Be.get)?Be.get.bind(c,c):pn,Ht=!me(Be)&&me(Be.set)?Be.set.bind(c):pn,on=I0({get:mt,set:Ht});Object.defineProperty(h,se,{enumerable:!0,configurable:!0,get:()=>on.value,set:Ze=>on.value=Ze})}if(m)for(const se in m)Ca(m[se],h,c,se);if(y){const se=me(y)?y.call(c):y;Reflect.ownKeys(se).forEach(Be=>{Hl(Be,se[Be])})}_&&lo(_,s,"c");function Re(se,Be){Ee(Be)?Be.forEach(mt=>se(mt.bind(c))):Be&&se(Be.bind(c))}if(Re(yl,O),Re(Ms,z),Re(_l,Y),Re(Tl,we),Re(ml,ne),Re(bl,Xe),Re(Dl,Ie),Re(Rl,Te),Re(Ol,Z),Re(Sl,de),Re(wa,$),Re(Nl,K),Ee(Bt))if(Bt.length){const se=s.exposed||(s.exposed={});Bt.forEach(Be=>{Object.defineProperty(se,Be,{get:()=>c[Be],set:mt=>c[Be]=mt})})}else s.exposed||(s.exposed={});We&&s.render===pn&&(s.render=We),ct!=null&&(s.inheritAttrs=ct),ue&&(s.components=ue),De&&(s.directives=De),K&&da(s)}function Pl(s,a,c=pn){Ee(s)&&(s=fs(s));for(const h in s){const g=s[h];let d;ft(g)?"default"in g?d=ri(g.from||h,g.default,!0):d=ri(g.from||h):d=ri(g),Tt(d)?Object.defineProperty(a,h,{enumerable:!0,configurable:!0,get:()=>d.value,set:A=>d.value=A}):a[h]=d}}function lo(s,a,c){An(Ee(s)?s.map(h=>h.bind(a.proxy)):s.bind(a.proxy),a,c)}function Ca(s,a,c,h){let g=h.includes(".")?Ba(c,h):()=>c[h];if(dt(s)){const d=a[s];me(d)&&Ji(g,d)}else if(me(s))Ji(g,s.bind(c));else if(ft(s))if(Ee(s))s.forEach(d=>Ca(d,a,c,h));else{const d=me(s.handler)?s.handler.bind(c):a[s.handler];me(d)&&Ji(g,d,s)}}function ma(s){const a=s.type,{mixins:c,extends:h}=a,{mixins:g,optionsCache:d,config:{optionMergeStrategies:A}}=s.appContext,m=d.get(a);let y;return m?y=m:!g.length&&!c&&!h?y=a:(y={},g.length&&g.forEach(C=>fi(y,C,A,!0)),fi(y,a,A)),ft(a)&&d.set(a,y),y}function fi(s,a,c,h=!1){const{mixins:g,extends:d}=a;d&&fi(s,d,c,!0),g&&g.forEach(A=>fi(s,A,c,!0));for(const A in a)if(!(h&&A==="expose")){const m=Ll[A]||c&&c[A];s[A]=m?m(s[A],a[A]):a[A]}return s}const Ll={data:co,props:fo,emits:fo,methods:Sr,computed:Sr,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:Sr,directives:Sr,watch:kl,provide:co,inject:Fl};function co(s,a){return a?s?function(){return vt(me(s)?s.call(this,this):s,me(a)?a.call(this,this):a)}:a:s}function Fl(s,a){return Sr(fs(s),fs(a))}function fs(s){if(Ee(s)){const a={};for(let c=0;c<s.length;c++)a[s[c]]=s[c];return a}return s}function Rt(s,a){return s?[...new Set([].concat(s,a))]:a}function Sr(s,a){return s?vt(Object.create(null),s,a):a}function fo(s,a){return s?Ee(s)&&Ee(a)?[...new Set([...s,...a])]:vt(Object.create(null),ao(s),ao(a??{})):a}function kl(s,a){if(!s)return a;if(!a)return s;const c=vt(Object.create(null),s);for(const h in a)c[h]=Rt(s[h],a[h]);return c}function ba(){return{app:null,config:{isNativeTag:y1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ul=0;function Vl(s,a){return function(h,g=null){me(h)||(h=vt({},h)),g!=null&&!ft(g)&&(g=null);const d=ba(),A=new WeakSet,m=[];let y=!1;const C=d.app={_uid:Ul++,_component:h,_props:g,_container:null,_context:d,_instance:null,version:y0,get config(){return d.config},set config(_){},use(_,...O){return A.has(_)||(_&&me(_.install)?(A.add(_),_.install(C,...O)):me(_)&&(A.add(_),_(C,...O))),C},mixin(_){return d.mixins.includes(_)||d.mixins.push(_),C},component(_,O){return O?(d.components[_]=O,C):d.components[_]},directive(_,O){return O?(d.directives[_]=O,C):d.directives[_]},mount(_,O,z){if(!y){const Y=C._ceVNode||Qt(h,g);return Y.appContext=d,z===!0?z="svg":z===!1&&(z=void 0),s(Y,_,z),y=!0,C._container=_,_.__vue_app__=C,Fs(Y.component)}},onUnmount(_){m.push(_)},unmount(){y&&(An(m,C._instance,16),s(null,C._container),delete C._container.__vue_app__)},provide(_,O){return d.provides[_]=O,C},runWithContext(_){const O=ur;ur=C;try{return _()}finally{ur=O}}};return C}}let ur=null;function Hl(s,a){if(_t){let c=_t.provides;const h=_t.parent&&_t.parent.provides;h===c&&(c=_t.provides=Object.create(h)),c[s]=a}}function ri(s,a,c=!1){const h=_t||nn;if(h||ur){let g=ur?ur._context.provides:h?h.parent==null||h.ce?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides:void 0;if(g&&s in g)return g[s];if(arguments.length>1)return c&&me(a)?a.call(h&&h.proxy):a}}const Ia={},ya=()=>Object.create(Ia),_a=s=>Object.getPrototypeOf(s)===Ia;function Wl(s,a,c,h=!1){const g={},d=ya();s.propsDefaults=Object.create(null),Ta(s,a,g,d);for(const A in s.propsOptions[0])A in g||(g[A]=void 0);c?s.props=h?g:sl(g):s.type.props?s.props=g:s.props=d,s.attrs=d}function Gl(s,a,c,h){const{props:g,attrs:d,vnode:{patchFlag:A}}=s,m=ke(g),[y]=s.propsOptions;let C=!1;if((h||A>0)&&!(A&16)){if(A&8){const _=s.vnode.dynamicProps;for(let O=0;O<_.length;O++){let z=_[O];if(Ii(s.emitsOptions,z))continue;const Y=a[z];if(y)if(Ue(d,z))Y!==d[z]&&(d[z]=Y,C=!0);else{const we=Jt(z);g[we]=us(y,m,we,Y,s,!1)}else Y!==d[z]&&(d[z]=Y,C=!0)}}}else{Ta(s,a,g,d)&&(C=!0);let _;for(const O in m)(!a||!Ue(a,O)&&((_=qn(O))===O||!Ue(a,_)))&&(y?c&&(c[O]!==void 0||c[_]!==void 0)&&(g[O]=us(y,m,O,void 0,s,!0)):delete g[O]);if(d!==m)for(const O in d)(!a||!Ue(a,O))&&(delete d[O],C=!0)}C&&In(s.attrs,"set","")}function Ta(s,a,c,h){const[g,d]=s.propsOptions;let A=!1,m;if(a)for(let y in a){if(Rr(y))continue;const C=a[y];let _;g&&Ue(g,_=Jt(y))?!d||!d.includes(_)?c[_]=C:(m||(m={}))[_]=C:Ii(s.emitsOptions,y)||(!(y in h)||C!==h[y])&&(h[y]=C,A=!0)}if(d){const y=ke(c),C=m||Qe;for(let _=0;_<d.length;_++){const O=d[_];c[O]=us(g,y,O,C[O],s,!Ue(C,O))}}return A}function us(s,a,c,h,g,d){const A=s[c];if(A!=null){const m=Ue(A,"default");if(m&&h===void 0){const y=A.default;if(A.type!==Function&&!A.skipFactory&&me(y)){const{propsDefaults:C}=g;if(c in C)h=C[c];else{const _=Gr(g);h=C[c]=y.call(null,a),_()}}else h=y;g.ce&&g.ce._setProp(c,h)}A[0]&&(d&&!m?h=!1:A[1]&&(h===""||h===qn(c))&&(h=!0))}return h}const Xl=new WeakMap;function Sa(s,a,c=!1){const h=c?Xl:a.propsCache,g=h.get(s);if(g)return g;const d=s.props,A={},m=[];let y=!1;if(!me(s)){const _=O=>{y=!0;const[z,Y]=Sa(O,a,!0);vt(A,z),Y&&m.push(...Y)};!c&&a.mixins.length&&a.mixins.forEach(_),s.extends&&_(s.extends),s.mixins&&s.mixins.forEach(_)}if(!d&&!y)return ft(s)&&h.set(s,cr),cr;if(Ee(d))for(let _=0;_<d.length;_++){const O=Jt(d[_]);uo(O)&&(A[O]=Qe)}else if(d)for(const _ in d){const O=Jt(_);if(uo(O)){const z=d[_],Y=A[O]=Ee(z)||me(z)?{type:z}:vt({},z),we=Y.type;let ne=!1,Xe=!0;if(Ee(we))for(let Se=0;Se<we.length;++Se){const de=we[Se],te=me(de)&&de.name;if(te==="Boolean"){ne=!0;break}else te==="String"&&(Xe=!1)}else ne=me(we)&&we.name==="Boolean";Y[0]=ne,Y[1]=Xe,(ne||Ue(Y,"default"))&&m.push(O)}}const C=[A,m];return ft(s)&&h.set(s,C),C}function uo(s){return s[0]!=="$"&&!Rr(s)}const vs=s=>s[0]==="_"||s==="$stable",Bs=s=>Ee(s)?s.map(wn):[wn(s)],Yl=(s,a,c)=>{if(a._n)return a;const h=as((...g)=>Bs(a(...g)),c);return h._c=!1,h},Na=(s,a,c)=>{const h=s._ctx;for(const g in s){if(vs(g))continue;const d=s[g];if(me(d))a[g]=Yl(g,d,h);else if(d!=null){const A=Bs(d);a[g]=()=>A}}},Oa=(s,a)=>{const c=Bs(a);s.slots.default=()=>c},Ra=(s,a,c)=>{for(const h in a)(c||!vs(h))&&(s[h]=a[h])},zl=(s,a,c)=>{const h=s.slots=ya();if(s.vnode.shapeFlag&32){const g=a._;g?(Ra(h,a,c),c&&Go(h,"_",g,!0)):Na(a,h)}else a&&Oa(s,a)},Zl=(s,a,c)=>{const{vnode:h,slots:g}=s;let d=!0,A=Qe;if(h.shapeFlag&32){const m=a._;m?c&&m===1?d=!1:Ra(g,a,c):(d=!a.$stable,Na(a,g)),A=a}else a&&(Oa(s,a),A={default:1});if(d)for(const m in g)!vs(m)&&A[m]==null&&delete g[m]},Gt=a0;function jl(s){return Kl(s)}function Kl(s,a){const c=Ci();c.__VUE__=!0;const{insert:h,remove:g,patchProp:d,createElement:A,createText:m,createComment:y,setText:C,setElementText:_,parentNode:O,nextSibling:z,setScopeId:Y=pn,insertStaticContent:we}=s,ne=(T,S,L,W=null,H=null,k=null,G=void 0,U=null,Q=!!S.dynamicChildren)=>{if(T===S)return;T&&!Tr(T,S)&&(W=Sn(T),Ze(T,H,k,!0),T=null),S.patchFlag===-2&&(Q=!1,S.dynamicChildren=null);const{type:v,ref:le,shapeFlag:ee}=S;switch(v){case yi:Xe(T,S,L,W);break;case hr:Se(T,S,L,W);break;case $i:T==null&&de(S,L,W,G);break;case bn:ue(T,S,L,W,H,k,G,U,Q);break;default:ee&1?We(T,S,L,W,H,k,G,U,Q):ee&6?De(T,S,L,W,H,k,G,U,Q):(ee&64||ee&128)&&v.process(T,S,L,W,H,k,G,U,Q,$t)}le!=null&&H&&ci(le,T&&T.ref,k,S||T,!S)},Xe=(T,S,L,W)=>{if(T==null)h(S.el=m(S.children),L,W);else{const H=S.el=T.el;S.children!==T.children&&C(H,S.children)}},Se=(T,S,L,W)=>{T==null?h(S.el=y(S.children||""),L,W):S.el=T.el},de=(T,S,L,W)=>{[T.el,T.anchor]=we(T.children,S,L,W,T.el,T.anchor)},te=({el:T,anchor:S},L,W)=>{let H;for(;T&&T!==S;)H=z(T),h(T,L,W),T=H;h(S,L,W)},$=({el:T,anchor:S})=>{let L;for(;T&&T!==S;)L=z(T),g(T),T=L;g(S)},We=(T,S,L,W,H,k,G,U,Q)=>{S.type==="svg"?G="svg":S.type==="math"&&(G="mathml"),T==null?Te(S,L,W,H,k,G,U,Q):K(T,S,H,k,G,U,Q)},Te=(T,S,L,W,H,k,G,U)=>{let Q,v;const{props:le,shapeFlag:ee,transition:oe,dirs:ge}=T;if(Q=T.el=A(T.type,k,le&&le.is,le),ee&8?_(Q,T.children):ee&16&&Ie(T.children,Q,null,W,H,Qi(T,k),G,U),ge&&Yn(T,null,W,"created"),Z(Q,T,T.scopeId,G,W),le){for(const Ve in le)Ve!=="value"&&!Rr(Ve)&&d(Q,Ve,null,le[Ve],k,W);"value"in le&&d(Q,"value",null,le.value,k),(v=le.onVnodeBeforeMount)&&gn(v,W,T)}ge&&Yn(T,null,W,"beforeMount");const pe=ql(H,oe);pe&&oe.beforeEnter(Q),h(Q,S,L),((v=le&&le.onVnodeMounted)||pe||ge)&&Gt(()=>{v&&gn(v,W,T),pe&&oe.enter(Q),ge&&Yn(T,null,W,"mounted")},H)},Z=(T,S,L,W,H)=>{if(L&&Y(T,L),W)for(let k=0;k<W.length;k++)Y(T,W[k]);if(H){let k=H.subTree;if(S===k||La(k.type)&&(k.ssContent===S||k.ssFallback===S)){const G=H.vnode;Z(T,G,G.scopeId,G.slotScopeIds,H.parent)}}},Ie=(T,S,L,W,H,k,G,U,Q=0)=>{for(let v=Q;v<T.length;v++){const le=T[v]=U?Ln(T[v]):wn(T[v]);ne(null,le,S,L,W,H,k,G,U)}},K=(T,S,L,W,H,k,G)=>{const U=S.el=T.el;let{patchFlag:Q,dynamicChildren:v,dirs:le}=S;Q|=T.patchFlag&16;const ee=T.props||Qe,oe=S.props||Qe;let ge;if(L&&zn(L,!1),(ge=oe.onVnodeBeforeUpdate)&&gn(ge,L,S,T),le&&Yn(S,T,L,"beforeUpdate"),L&&zn(L,!0),(ee.innerHTML&&oe.innerHTML==null||ee.textContent&&oe.textContent==null)&&_(U,""),v?Bt(T.dynamicChildren,v,U,L,W,Qi(S,H),k):G||Be(T,S,U,null,L,W,Qi(S,H),k,!1),Q>0){if(Q&16)ct(U,ee,oe,L,H);else if(Q&2&&ee.class!==oe.class&&d(U,"class",null,oe.class,H),Q&4&&d(U,"style",ee.style,oe.style,H),Q&8){const pe=S.dynamicProps;for(let Ve=0;Ve<pe.length;Ve++){const ye=pe[Ve],He=ee[ye],pt=oe[ye];(pt!==He||ye==="value")&&d(U,ye,He,pt,H,L)}}Q&1&&T.children!==S.children&&_(U,S.children)}else!G&&v==null&&ct(U,ee,oe,L,H);((ge=oe.onVnodeUpdated)||le)&&Gt(()=>{ge&&gn(ge,L,S,T),le&&Yn(S,T,L,"updated")},W)},Bt=(T,S,L,W,H,k,G)=>{for(let U=0;U<S.length;U++){const Q=T[U],v=S[U],le=Q.el&&(Q.type===bn||!Tr(Q,v)||Q.shapeFlag&198)?O(Q.el):L;ne(Q,v,le,null,W,H,k,G,!0)}},ct=(T,S,L,W,H)=>{if(S!==L){if(S!==Qe)for(const k in S)!Rr(k)&&!(k in L)&&d(T,k,S[k],null,H,W);for(const k in L){if(Rr(k))continue;const G=L[k],U=S[k];G!==U&&k!=="value"&&d(T,k,U,G,H,W)}"value"in L&&d(T,"value",S.value,L.value,H)}},ue=(T,S,L,W,H,k,G,U,Q)=>{const v=S.el=T?T.el:m(""),le=S.anchor=T?T.anchor:m("");let{patchFlag:ee,dynamicChildren:oe,slotScopeIds:ge}=S;ge&&(U=U?U.concat(ge):ge),T==null?(h(v,L,W),h(le,L,W),Ie(S.children||[],L,le,H,k,G,U,Q)):ee>0&&ee&64&&oe&&T.dynamicChildren?(Bt(T.dynamicChildren,oe,L,H,k,G,U),(S.key!=null||H&&S===H.subTree)&&Da(T,S,!0)):Be(T,S,L,le,H,k,G,U,Q)},De=(T,S,L,W,H,k,G,U,Q)=>{S.slotScopeIds=U,T==null?S.shapeFlag&512?H.ctx.activate(S,L,W,G,Q):rt(S,L,W,H,k,G,Q):F(T,S,Q)},rt=(T,S,L,W,H,k,G)=>{const U=T.component=w0(T,W,H);if(ga(T)&&(U.ctx.renderer=$t),p0(U,!1,G),U.asyncDep){if(H&&H.registerDep(U,Re,G),!T.el){const Q=U.subTree=Qt(hr);Se(null,Q,S,L)}}else Re(U,T,S,L,H,k,G)},F=(T,S,L)=>{const W=S.component=T.component;if(s0(T,S,L))if(W.asyncDep&&!W.asyncResolved){se(W,S,L);return}else W.next=S,W.update();else S.el=T.el,W.vnode=S},Re=(T,S,L,W,H,k,G)=>{const U=()=>{if(T.isMounted){let{next:ee,bu:oe,u:ge,parent:pe,vnode:Ve}=T;{const zt=Ma(T);if(zt){ee&&(ee.el=Ve.el,se(T,ee,G)),zt.asyncDep.then(()=>{T.isUnmounted||U()});return}}let ye=ee,He;zn(T,!1),ee?(ee.el=Ve.el,se(T,ee,G)):ee=Ve,oe&&Yi(oe),(He=ee.props&&ee.props.onVnodeBeforeUpdate)&&gn(He,pe,ee,Ve),zn(T,!0);const pt=go(T),Nt=T.subTree;T.subTree=pt,ne(Nt,pt,O(Nt.el),Sn(Nt),T,H,k),ee.el=pt.el,ye===null&&o0(T,pt.el),ge&&Gt(ge,H),(He=ee.props&&ee.props.onVnodeUpdated)&&Gt(()=>gn(He,pe,ee,Ve),H)}else{let ee;const{el:oe,props:ge}=S,{bm:pe,m:Ve,parent:ye,root:He,type:pt}=T,Nt=Br(S);zn(T,!1),pe&&Yi(pe),!Nt&&(ee=ge&&ge.onVnodeBeforeMount)&&gn(ee,ye,S),zn(T,!0);{He.ce&&He.ce._injectChildStyle(pt);const zt=T.subTree=go(T);ne(null,zt,L,W,T,H,k),S.el=zt.el}if(Ve&&Gt(Ve,H),!Nt&&(ee=ge&&ge.onVnodeMounted)){const zt=S;Gt(()=>gn(ee,ye,zt),H)}(S.shapeFlag&256||ye&&Br(ye.vnode)&&ye.vnode.shapeFlag&256)&&T.a&&Gt(T.a,H),T.isMounted=!0,S=L=W=null}};T.scope.on();const Q=T.effect=new Yo(U);T.scope.off();const v=T.update=Q.run.bind(Q),le=T.job=Q.runIfDirty.bind(Q);le.i=T,le.id=T.uid,Q.scheduler=()=>Rs(le),zn(T,!0),v()},se=(T,S,L)=>{S.component=T;const W=T.vnode.props;T.vnode=S,T.next=null,Gl(T,S.props,W,L),Zl(T,S.children,L),yn(),so(T),_n()},Be=(T,S,L,W,H,k,G,U,Q=!1)=>{const v=T&&T.children,le=T?T.shapeFlag:0,ee=S.children,{patchFlag:oe,shapeFlag:ge}=S;if(oe>0){if(oe&128){Ht(v,ee,L,W,H,k,G,U,Q);return}else if(oe&256){mt(v,ee,L,W,H,k,G,U,Q);return}}ge&8?(le&16&&ae(v,H,k),ee!==v&&_(L,ee)):le&16?ge&16?Ht(v,ee,L,W,H,k,G,U,Q):ae(v,H,k,!0):(le&8&&_(L,""),ge&16&&Ie(ee,L,W,H,k,G,U,Q))},mt=(T,S,L,W,H,k,G,U,Q)=>{T=T||cr,S=S||cr;const v=T.length,le=S.length,ee=Math.min(v,le);let oe;for(oe=0;oe<ee;oe++){const ge=S[oe]=Q?Ln(S[oe]):wn(S[oe]);ne(T[oe],ge,L,null,H,k,G,U,Q)}v>le?ae(T,H,k,!0,!1,ee):Ie(S,L,W,H,k,G,U,Q,ee)},Ht=(T,S,L,W,H,k,G,U,Q)=>{let v=0;const le=S.length;let ee=T.length-1,oe=le-1;for(;v<=ee&&v<=oe;){const ge=T[v],pe=S[v]=Q?Ln(S[v]):wn(S[v]);if(Tr(ge,pe))ne(ge,pe,L,null,H,k,G,U,Q);else break;v++}for(;v<=ee&&v<=oe;){const ge=T[ee],pe=S[oe]=Q?Ln(S[oe]):wn(S[oe]);if(Tr(ge,pe))ne(ge,pe,L,null,H,k,G,U,Q);else break;ee--,oe--}if(v>ee){if(v<=oe){const ge=oe+1,pe=ge<le?S[ge].el:W;for(;v<=oe;)ne(null,S[v]=Q?Ln(S[v]):wn(S[v]),L,pe,H,k,G,U,Q),v++}}else if(v>oe)for(;v<=ee;)Ze(T[v],H,k,!0),v++;else{const ge=v,pe=v,Ve=new Map;for(v=pe;v<=oe;v++){const Me=S[v]=Q?Ln(S[v]):wn(S[v]);Me.key!=null&&Ve.set(Me.key,v)}let ye,He=0;const pt=oe-pe+1;let Nt=!1,zt=0;const je=new Array(pt);for(v=0;v<pt;v++)je[v]=0;for(v=ge;v<=ee;v++){const Me=T[v];if(He>=pt){Ze(Me,H,k,!0);continue}let _e;if(Me.key!=null)_e=Ve.get(Me.key);else for(ye=pe;ye<=oe;ye++)if(je[ye-pe]===0&&Tr(Me,S[ye])){_e=ye;break}_e===void 0?Ze(Me,H,k,!0):(je[_e-pe]=v+1,_e>=zt?zt=_e:Nt=!0,ne(Me,S[_e],L,null,H,k,G,U,Q),He++)}const J=Nt?Ql(je):cr;for(ye=J.length-1,v=pt-1;v>=0;v--){const Me=pe+v,_e=S[Me],Je=Me+1<le?S[Me+1].el:W;je[v]===0?ne(null,_e,L,Je,H,k,G,U,Q):Nt&&(ye<0||v!==J[ye]?on(_e,L,Je,2):ye--)}}},on=(T,S,L,W,H=null)=>{const{el:k,type:G,transition:U,children:Q,shapeFlag:v}=T;if(v&6){on(T.component.subTree,S,L,W);return}if(v&128){T.suspense.move(S,L,W);return}if(v&64){G.move(T,S,L,$t);return}if(G===bn){h(k,S,L);for(let ee=0;ee<Q.length;ee++)on(Q[ee],S,L,W);h(T.anchor,S,L);return}if(G===$i){te(T,S,L);return}if(W!==2&&v&1&&U)if(W===0)U.beforeEnter(k),h(k,S,L),Gt(()=>U.enter(k),H);else{const{leave:ee,delayLeave:oe,afterLeave:ge}=U,pe=()=>{T.ctx.isUnmounted?g(k):h(k,S,L)},Ve=()=>{ee(k,()=>{pe(),ge&&ge()})};oe?oe(k,pe,Ve):Ve()}else h(k,S,L)},Ze=(T,S,L,W=!1,H=!1)=>{const{type:k,props:G,ref:U,children:Q,dynamicChildren:v,shapeFlag:le,patchFlag:ee,dirs:oe,cacheIndex:ge}=T;if(ee===-2&&(H=!1),U!=null&&(yn(),ci(U,null,L,T,!0),_n()),ge!=null&&(S.renderCache[ge]=void 0),le&256){S.ctx.deactivate(T);return}const pe=le&1&&oe,Ve=!Br(T);let ye;if(Ve&&(ye=G&&G.onVnodeBeforeUnmount)&&gn(ye,S,T),le&6)xr(T.component,L,W);else{if(le&128){T.suspense.unmount(L,W);return}pe&&Yn(T,null,S,"beforeUnmount"),le&64?T.type.remove(T,S,L,$t,W):v&&!v.hasOnce&&(k!==bn||ee>0&&ee&64)?ae(v,S,L,!1,!0):(k===bn&&ee&384||!H&&le&16)&&ae(Q,S,L),W&&an(T)}(Ve&&(ye=G&&G.onVnodeUnmounted)||pe)&&Gt(()=>{ye&&gn(ye,S,T),pe&&Yn(T,null,S,"unmounted")},L)},an=T=>{const{type:S,el:L,anchor:W,transition:H}=T;if(S===bn){wt(L,W);return}if(S===$i){$(T);return}const k=()=>{g(L),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(T.shapeFlag&1&&H&&!H.persisted){const{leave:G,delayLeave:U}=H,Q=()=>G(L,k);U?U(T.el,k,Q):Q()}else k()},wt=(T,S)=>{let L;for(;T!==S;)L=z(T),g(T),T=L;g(S)},xr=(T,S,L)=>{const{bum:W,scope:H,job:k,subTree:G,um:U,m:Q,a:v,parent:le,slots:{__:ee}}=T;ho(Q),ho(v),W&&Yi(W),le&&Ee(ee)&&ee.forEach(oe=>{le.renderCache[oe]=void 0}),H.stop(),k&&(k.flags|=8,Ze(G,T,S,L)),U&&Gt(U,S),Gt(()=>{T.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},ae=(T,S,L,W=!1,H=!1,k=0)=>{for(let G=k;G<T.length;G++)Ze(T[G],S,L,W,H)},Sn=T=>{if(T.shapeFlag&6)return Sn(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const S=z(T.anchor||T.el),L=S&&S[El];return L?z(L):S};let it=!1;const Nn=(T,S,L)=>{T==null?S._vnode&&Ze(S._vnode,null,null,!0):ne(S._vnode||null,T,S,null,null,null,L),S._vnode=T,it||(it=!0,so(),fa(),it=!1)},$t={p:ne,um:Ze,m:on,r:an,mt:rt,mc:Ie,pc:Be,pbc:Bt,n:Sn,o:s};return{render:Nn,hydrate:void 0,createApp:Vl(Nn)}}function Qi({type:s,props:a},c){return c==="svg"&&s==="foreignObject"||c==="mathml"&&s==="annotation-xml"&&a&&a.encoding&&a.encoding.includes("html")?void 0:c}function zn({effect:s,job:a},c){c?(s.flags|=32,a.flags|=4):(s.flags&=-33,a.flags&=-5)}function ql(s,a){return(!s||s&&!s.pendingBranch)&&a&&!a.persisted}function Da(s,a,c=!1){const h=s.children,g=a.children;if(Ee(h)&&Ee(g))for(let d=0;d<h.length;d++){const A=h[d];let m=g[d];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=g[d]=Ln(g[d]),m.el=A.el),!c&&m.patchFlag!==-2&&Da(A,m)),m.type===yi&&(m.el=A.el),m.type===hr&&!m.el&&(m.el=A.el)}}function Ql(s){const a=s.slice(),c=[0];let h,g,d,A,m;const y=s.length;for(h=0;h<y;h++){const C=s[h];if(C!==0){if(g=c[c.length-1],s[g]<C){a[h]=g,c.push(h);continue}for(d=0,A=c.length-1;d<A;)m=d+A>>1,s[c[m]]<C?d=m+1:A=m;C<s[c[d]]&&(d>0&&(a[h]=c[d-1]),c[d]=h)}}for(d=c.length,A=c[d-1];d-- >0;)c[d]=A,A=a[A];return c}function Ma(s){const a=s.subTree.component;if(a)return a.asyncDep&&!a.asyncResolved?a:Ma(a)}function ho(s){if(s)for(let a=0;a<s.length;a++)s[a].flags|=8}const Jl=Symbol.for("v-scx"),$l=()=>ri(Jl);function Ji(s,a,c){return va(s,a,c)}function va(s,a,c=Qe){const{immediate:h,deep:g,flush:d,once:A}=c,m=vt({},c),y=a&&h||!a&&d!=="post";let C;if(Hr){if(d==="sync"){const Y=$l();C=Y.__watcherHandles||(Y.__watcherHandles=[])}else if(!y){const Y=()=>{};return Y.stop=pn,Y.resume=pn,Y.pause=pn,Y}}const _=_t;m.call=(Y,we,ne)=>An(Y,_,we,ne);let O=!1;d==="post"?m.scheduler=Y=>{Gt(Y,_&&_.suspense)}:d!=="sync"&&(O=!0,m.scheduler=(Y,we)=>{we?Y():Rs(Y)}),m.augmentJob=Y=>{a&&(Y.flags|=4),O&&(Y.flags|=2,_&&(Y.id=_.uid,Y.i=_))};const z=gl(s,a,m);return Hr&&(C?C.push(z):y&&z()),z}function e0(s,a,c){const h=this.proxy,g=dt(s)?s.includes(".")?Ba(h,s):()=>h[s]:s.bind(h,h);let d;me(a)?d=a:(d=a.handler,c=a);const A=Gr(this),m=va(g,d.bind(h),c);return A(),m}function Ba(s,a){const c=a.split(".");return()=>{let h=s;for(let g=0;g<c.length&&h;g++)h=h[c[g]];return h}}const t0=(s,a)=>a==="modelValue"||a==="model-value"?s.modelModifiers:s[`${a}Modifiers`]||s[`${Jt(a)}Modifiers`]||s[`${qn(a)}Modifiers`];function n0(s,a,...c){if(s.isUnmounted)return;const h=s.vnode.props||Qe;let g=c;const d=a.startsWith("update:"),A=d&&t0(h,a.slice(7));A&&(A.trim&&(g=c.map(_=>dt(_)?_.trim():_)),A.number&&(g=c.map(M1)));let m,y=h[m=Xi(a)]||h[m=Xi(Jt(a))];!y&&d&&(y=h[m=Xi(qn(a))]),y&&An(y,s,6,g);const C=h[m+"Once"];if(C){if(!s.emitted)s.emitted={};else if(s.emitted[m])return;s.emitted[m]=!0,An(C,s,6,g)}}function Pa(s,a,c=!1){const h=a.emitsCache,g=h.get(s);if(g!==void 0)return g;const d=s.emits;let A={},m=!1;if(!me(s)){const y=C=>{const _=Pa(C,a,!0);_&&(m=!0,vt(A,_))};!c&&a.mixins.length&&a.mixins.forEach(y),s.extends&&y(s.extends),s.mixins&&s.mixins.forEach(y)}return!d&&!m?(ft(s)&&h.set(s,null),null):(Ee(d)?d.forEach(y=>A[y]=null):vt(A,d),ft(s)&&h.set(s,A),A)}function Ii(s,a){return!s||!wi(a)?!1:(a=a.slice(2).replace(/Once$/,""),Ue(s,a[0].toLowerCase()+a.slice(1))||Ue(s,qn(a))||Ue(s,a))}function go(s){const{type:a,vnode:c,proxy:h,withProxy:g,propsOptions:[d],slots:A,attrs:m,emit:y,render:C,renderCache:_,props:O,data:z,setupState:Y,ctx:we,inheritAttrs:ne}=s,Xe=li(s);let Se,de;try{if(c.shapeFlag&4){const $=g||h,We=$;Se=wn(C.call(We,$,_,O,Y,z,we)),de=m}else{const $=a;Se=wn($.length>1?$(O,{attrs:m,slots:A,emit:y}):$(O,null)),de=a.props?m:r0(m)}}catch($){Lr.length=0,mi($,s,1),Se=Qt(hr)}let te=Se;if(de&&ne!==!1){const $=Object.keys(de),{shapeFlag:We}=te;$.length&&We&7&&(d&&$.some(ws)&&(de=i0(de,d)),te=dr(te,de,!1,!0))}return c.dirs&&(te=dr(te,null,!1,!0),te.dirs=te.dirs?te.dirs.concat(c.dirs):c.dirs),c.transition&&Ds(te,c.transition),Se=te,li(Xe),Se}const r0=s=>{let a;for(const c in s)(c==="class"||c==="style"||wi(c))&&((a||(a={}))[c]=s[c]);return a},i0=(s,a)=>{const c={};for(const h in s)(!ws(h)||!(h.slice(9)in a))&&(c[h]=s[h]);return c};function s0(s,a,c){const{props:h,children:g,component:d}=s,{props:A,children:m,patchFlag:y}=a,C=d.emitsOptions;if(a.dirs||a.transition)return!0;if(c&&y>=0){if(y&1024)return!0;if(y&16)return h?xo(h,A,C):!!A;if(y&8){const _=a.dynamicProps;for(let O=0;O<_.length;O++){const z=_[O];if(A[z]!==h[z]&&!Ii(C,z))return!0}}}else return(g||m)&&(!m||!m.$stable)?!0:h===A?!1:h?A?xo(h,A,C):!0:!!A;return!1}function xo(s,a,c){const h=Object.keys(a);if(h.length!==Object.keys(s).length)return!0;for(let g=0;g<h.length;g++){const d=h[g];if(a[d]!==s[d]&&!Ii(c,d))return!0}return!1}function o0({vnode:s,parent:a},c){for(;a;){const h=a.subTree;if(h.suspense&&h.suspense.activeBranch===s&&(h.el=s.el),h===s)(s=a.vnode).el=c,a=a.parent;else break}}const La=s=>s.__isSuspense;function a0(s,a){a&&a.pendingBranch?Ee(s)?a.effects.push(...s):a.effects.push(s):Al(s)}const bn=Symbol.for("v-fgt"),yi=Symbol.for("v-txt"),hr=Symbol.for("v-cmt"),$i=Symbol.for("v-stc"),Lr=[];let Yt=null;function Ps(s=!1){Lr.push(Yt=s?null:[])}function l0(){Lr.pop(),Yt=Lr[Lr.length-1]||null}let Vr=1;function wo(s,a=!1){Vr+=s,s<0&&Yt&&a&&(Yt.hasOnce=!0)}function Fa(s){return s.dynamicChildren=Vr>0?Yt||cr:null,l0(),Vr>0&&Yt&&Yt.push(s),s}function ka(s,a,c,h,g,d){return Fa(ui(s,a,c,h,g,d,!0))}function c0(s,a,c,h,g){return Fa(Qt(s,a,c,h,g,!0))}function Ua(s){return s?s.__v_isVNode===!0:!1}function Tr(s,a){return s.type===a.type&&s.key===a.key}const Va=({key:s})=>s??null,ii=({ref:s,ref_key:a,ref_for:c})=>(typeof s=="number"&&(s=""+s),s!=null?dt(s)||Tt(s)||me(s)?{i:nn,r:s,k:a,f:!!c}:s:null);function ui(s,a=null,c=null,h=0,g=null,d=s===bn?0:1,A=!1,m=!1){const y={__v_isVNode:!0,__v_skip:!0,type:s,props:a,key:a&&Va(a),ref:a&&ii(a),scopeId:ha,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:h,dynamicProps:g,dynamicChildren:null,appContext:null,ctx:nn};return m?(Ls(y,c),d&128&&s.normalize(y)):c&&(y.shapeFlag|=dt(c)?8:16),Vr>0&&!A&&Yt&&(y.patchFlag>0||d&6)&&y.patchFlag!==32&&Yt.push(y),y}const Qt=f0;function f0(s,a=null,c=null,h=0,g=null,d=!1){if((!s||s===Aa)&&(s=hr),Ua(s)){const m=dr(s,a,!0);return c&&Ls(m,c),Vr>0&&!d&&Yt&&(m.shapeFlag&6?Yt[Yt.indexOf(s)]=m:Yt.push(m)),m.patchFlag=-2,m}if(b0(s)&&(s=s.__vccOpts),a){a=u0(a);let{class:m,style:y}=a;m&&!dt(m)&&(a.class=Cs(m)),ft(y)&&(Os(y)&&!Ee(y)&&(y=vt({},y)),a.style=Es(y))}const A=dt(s)?1:La(s)?128:Cl(s)?64:ft(s)?4:me(s)?2:0;return ui(s,a,c,h,g,A,d,!0)}function u0(s){return s?Os(s)||_a(s)?vt({},s):s:null}function dr(s,a,c=!1,h=!1){const{props:g,ref:d,patchFlag:A,children:m,transition:y}=s,C=a?d0(g||{},a):g,_={__v_isVNode:!0,__v_skip:!0,type:s.type,props:C,key:C&&Va(C),ref:a&&a.ref?c&&d?Ee(d)?d.concat(ii(a)):[d,ii(a)]:ii(a):d,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:m,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:a&&s.type!==bn?A===-1?16:A|16:A,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:y,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&dr(s.ssContent),ssFallback:s.ssFallback&&dr(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return y&&h&&Ds(_,y.clone(_)),_}function h0(s=" ",a=0){return Qt(yi,null,s,a)}function wn(s){return s==null||typeof s=="boolean"?Qt(hr):Ee(s)?Qt(bn,null,s.slice()):Ua(s)?Ln(s):Qt(yi,null,String(s))}function Ln(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:dr(s)}function Ls(s,a){let c=0;const{shapeFlag:h}=s;if(a==null)a=null;else if(Ee(a))c=16;else if(typeof a=="object")if(h&65){const g=a.default;g&&(g._c&&(g._d=!1),Ls(s,g()),g._c&&(g._d=!0));return}else{c=32;const g=a._;!g&&!_a(a)?a._ctx=nn:g===3&&nn&&(nn.slots._===1?a._=1:(a._=2,s.patchFlag|=1024))}else me(a)?(a={default:a,_ctx:nn},c=32):(a=String(a),h&64?(c=16,a=[h0(a)]):c=8);s.children=a,s.shapeFlag|=c}function d0(...s){const a={};for(let c=0;c<s.length;c++){const h=s[c];for(const g in h)if(g==="class")a.class!==h.class&&(a.class=Cs([a.class,h.class]));else if(g==="style")a.style=Es([a.style,h.style]);else if(wi(g)){const d=a[g],A=h[g];A&&d!==A&&!(Ee(d)&&d.includes(A))&&(a[g]=d?[].concat(d,A):A)}else g!==""&&(a[g]=h[g])}return a}function gn(s,a,c,h=null){An(s,a,7,[c,h])}const g0=ba();let x0=0;function w0(s,a,c){const h=s.type,g=(a?a.appContext:s.appContext)||g0,d={uid:x0++,vnode:s,type:h,parent:a,appContext:g,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new U1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:a?a.provides:Object.create(g.provides),ids:a?a.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sa(h,g),emitsOptions:Pa(h,g),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:h.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=a?a.root:d,d.emit=n0.bind(null,d),s.ce&&s.ce(d),d}let _t=null,hi,hs;{const s=Ci(),a=(c,h)=>{let g;return(g=s[c])||(g=s[c]=[]),g.push(h),d=>{g.length>1?g.forEach(A=>A(d)):g[0](d)}};hi=a("__VUE_INSTANCE_SETTERS__",c=>_t=c),hs=a("__VUE_SSR_SETTERS__",c=>Hr=c)}const Gr=s=>{const a=_t;return hi(s),s.scope.on(),()=>{s.scope.off(),hi(a)}},po=()=>{_t&&_t.scope.off(),hi(null)};function Ha(s){return s.vnode.shapeFlag&4}let Hr=!1;function p0(s,a=!1,c=!1){a&&hs(a);const{props:h,children:g}=s.vnode,d=Ha(s);Wl(s,h,d,a),zl(s,g,c||a);const A=d?A0(s,a):void 0;return a&&hs(!1),A}function A0(s,a){const c=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,vl);const{setup:h}=c;if(h){yn();const g=s.setupContext=h.length>1?C0(s):null,d=Gr(s),A=Wr(h,s,0,[s.props,g]),m=Wo(A);if(_n(),d(),(m||s.sp)&&!Br(s)&&da(s),m){if(A.then(po,po),a)return A.then(y=>{Ao(s,y)}).catch(y=>{mi(y,s,0)});s.asyncDep=A}else Ao(s,A)}else Wa(s)}function Ao(s,a,c){me(a)?s.type.__ssrInlineRender?s.ssrRender=a:s.render=a:ft(a)&&(s.setupState=aa(a)),Wa(s)}function Wa(s,a,c){const h=s.type;s.render||(s.render=h.render||pn);{const g=Gr(s);yn();try{Bl(s)}finally{_n(),g()}}}const E0={get(s,a){return yt(s,"get",""),s[a]}};function C0(s){const a=c=>{s.exposed=c||{}};return{attrs:new Proxy(s.attrs,E0),slots:s.slots,emit:s.emit,expose:a}}function Fs(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(aa(ol(s.exposed)),{get(a,c){if(c in a)return a[c];if(c in Pr)return Pr[c](s)},has(a,c){return c in a||c in Pr}})):s.proxy}function m0(s,a=!0){return me(s)?s.displayName||s.name:s.name||a&&s.__name}function b0(s){return me(s)&&"__vccOpts"in s}const I0=(s,a)=>hl(s,a,Hr),y0="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ds;const Eo=typeof window<"u"&&window.trustedTypes;if(Eo)try{ds=Eo.createPolicy("vue",{createHTML:s=>s})}catch{}const Ga=ds?s=>ds.createHTML(s):s=>s,_0="http://www.w3.org/2000/svg",T0="http://www.w3.org/1998/Math/MathML",mn=typeof document<"u"?document:null,Co=mn&&mn.createElement("template"),S0={insert:(s,a,c)=>{a.insertBefore(s,c||null)},remove:s=>{const a=s.parentNode;a&&a.removeChild(s)},createElement:(s,a,c,h)=>{const g=a==="svg"?mn.createElementNS(_0,s):a==="mathml"?mn.createElementNS(T0,s):c?mn.createElement(s,{is:c}):mn.createElement(s);return s==="select"&&h&&h.multiple!=null&&g.setAttribute("multiple",h.multiple),g},createText:s=>mn.createTextNode(s),createComment:s=>mn.createComment(s),setText:(s,a)=>{s.nodeValue=a},setElementText:(s,a)=>{s.textContent=a},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>mn.querySelector(s),setScopeId(s,a){s.setAttribute(a,"")},insertStaticContent(s,a,c,h,g,d){const A=c?c.previousSibling:a.lastChild;if(g&&(g===d||g.nextSibling))for(;a.insertBefore(g.cloneNode(!0),c),!(g===d||!(g=g.nextSibling)););else{Co.innerHTML=Ga(h==="svg"?`<svg>${s}</svg>`:h==="mathml"?`<math>${s}</math>`:s);const m=Co.content;if(h==="svg"||h==="mathml"){const y=m.firstChild;for(;y.firstChild;)m.appendChild(y.firstChild);m.removeChild(y)}a.insertBefore(m,c)}return[A?A.nextSibling:a.firstChild,c?c.previousSibling:a.lastChild]}},N0=Symbol("_vtc");function O0(s,a,c){const h=s[N0];h&&(a=(a?[a,...h]:[...h]).join(" ")),a==null?s.removeAttribute("class"):c?s.setAttribute("class",a):s.className=a}const mo=Symbol("_vod"),R0=Symbol("_vsh"),D0=Symbol(""),M0=/(^|;)\s*display\s*:/;function v0(s,a,c){const h=s.style,g=dt(c);let d=!1;if(c&&!g){if(a)if(dt(a))for(const A of a.split(";")){const m=A.slice(0,A.indexOf(":")).trim();c[m]==null&&si(h,m,"")}else for(const A in a)c[A]==null&&si(h,A,"");for(const A in c)A==="display"&&(d=!0),si(h,A,c[A])}else if(g){if(a!==c){const A=h[D0];A&&(c+=";"+A),h.cssText=c,d=M0.test(c)}}else a&&s.removeAttribute("style");mo in s&&(s[mo]=d?h.display:"",s[R0]&&(h.display="none"))}const bo=/\s*!important$/;function si(s,a,c){if(Ee(c))c.forEach(h=>si(s,a,h));else if(c==null&&(c=""),a.startsWith("--"))s.setProperty(a,c);else{const h=B0(s,a);bo.test(c)?s.setProperty(qn(h),c.replace(bo,""),"important"):s[h]=c}}const Io=["Webkit","Moz","ms"],es={};function B0(s,a){const c=es[a];if(c)return c;let h=Jt(a);if(h!=="filter"&&h in s)return es[a]=h;h=Ei(h);for(let g=0;g<Io.length;g++){const d=Io[g]+h;if(d in s)return es[a]=d}return a}const yo="http://www.w3.org/1999/xlink";function _o(s,a,c,h,g,d=k1(a)){h&&a.startsWith("xlink:")?c==null?s.removeAttributeNS(yo,a.slice(6,a.length)):s.setAttributeNS(yo,a,c):c==null||d&&!Xo(c)?s.removeAttribute(a):s.setAttribute(a,d?"":gr(c)?String(c):c)}function To(s,a,c,h,g){if(a==="innerHTML"||a==="textContent"){c!=null&&(s[a]=a==="innerHTML"?Ga(c):c);return}const d=s.tagName;if(a==="value"&&d!=="PROGRESS"&&!d.includes("-")){const m=d==="OPTION"?s.getAttribute("value")||"":s.value,y=c==null?s.type==="checkbox"?"on":"":String(c);(m!==y||!("_value"in s))&&(s.value=y),c==null&&s.removeAttribute(a),s._value=c;return}let A=!1;if(c===""||c==null){const m=typeof s[a];m==="boolean"?c=Xo(c):c==null&&m==="string"?(c="",A=!0):m==="number"&&(c=0,A=!0)}try{s[a]=c}catch{}A&&s.removeAttribute(g||a)}function P0(s,a,c,h){s.addEventListener(a,c,h)}function L0(s,a,c,h){s.removeEventListener(a,c,h)}const So=Symbol("_vei");function F0(s,a,c,h,g=null){const d=s[So]||(s[So]={}),A=d[a];if(h&&A)A.value=h;else{const[m,y]=k0(a);if(h){const C=d[a]=H0(h,g);P0(s,m,C,y)}else A&&(L0(s,m,A,y),d[a]=void 0)}}const No=/(?:Once|Passive|Capture)$/;function k0(s){let a;if(No.test(s)){a={};let h;for(;h=s.match(No);)s=s.slice(0,s.length-h[0].length),a[h[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):qn(s.slice(2)),a]}let ts=0;const U0=Promise.resolve(),V0=()=>ts||(U0.then(()=>ts=0),ts=Date.now());function H0(s,a){const c=h=>{if(!h._vts)h._vts=Date.now();else if(h._vts<=c.attached)return;An(W0(h,c.value),a,5,[h])};return c.value=s,c.attached=V0(),c}function W0(s,a){if(Ee(a)){const c=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{c.call(s),s._stopped=!0},a.map(h=>g=>!g._stopped&&h&&h(g))}else return a}const Oo=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,G0=(s,a,c,h,g,d)=>{const A=g==="svg";a==="class"?O0(s,h,A):a==="style"?v0(s,c,h):wi(a)?ws(a)||F0(s,a,c,h,d):(a[0]==="."?(a=a.slice(1),!0):a[0]==="^"?(a=a.slice(1),!1):X0(s,a,h,A))?(To(s,a,h),!s.tagName.includes("-")&&(a==="value"||a==="checked"||a==="selected")&&_o(s,a,h,A,d,a!=="value")):s._isVueCE&&(/[A-Z]/.test(a)||!dt(h))?To(s,Jt(a),h,d,a):(a==="true-value"?s._trueValue=h:a==="false-value"&&(s._falseValue=h),_o(s,a,h,A))};function X0(s,a,c,h){if(h)return!!(a==="innerHTML"||a==="textContent"||a in s&&Oo(a)&&me(c));if(a==="spellcheck"||a==="draggable"||a==="translate"||a==="autocorrect"||a==="form"||a==="list"&&s.tagName==="INPUT"||a==="type"&&s.tagName==="TEXTAREA")return!1;if(a==="width"||a==="height"){const g=s.tagName;if(g==="IMG"||g==="VIDEO"||g==="CANVAS"||g==="SOURCE")return!1}return Oo(a)&&dt(c)?!1:a in s}const Y0=vt({patchProp:G0},S0);let Ro;function z0(){return Ro||(Ro=jl(Y0))}const Z0=(...s)=>{const a=z0().createApp(...s),{mount:c}=a;return a.mount=h=>{const g=K0(h);if(!g)return;const d=a._component;!me(d)&&!d.render&&!d.template&&(d.template=g.innerHTML),g.nodeType===1&&(g.textContent="");const A=c(g,!1,j0(g));return g instanceof Element&&(g.removeAttribute("v-cloak"),g.setAttribute("data-v-app","")),A},a};function j0(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function K0(s){return dt(s)?document.querySelector(s):s}var ie;(function(s){s[s.QR_CODE=0]="QR_CODE",s[s.AZTEC=1]="AZTEC",s[s.CODABAR=2]="CODABAR",s[s.CODE_39=3]="CODE_39",s[s.CODE_93=4]="CODE_93",s[s.CODE_128=5]="CODE_128",s[s.DATA_MATRIX=6]="DATA_MATRIX",s[s.MAXICODE=7]="MAXICODE",s[s.ITF=8]="ITF",s[s.EAN_13=9]="EAN_13",s[s.EAN_8=10]="EAN_8",s[s.PDF_417=11]="PDF_417",s[s.RSS_14=12]="RSS_14",s[s.RSS_EXPANDED=13]="RSS_EXPANDED",s[s.UPC_A=14]="UPC_A",s[s.UPC_E=15]="UPC_E",s[s.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ie||(ie={}));var Do=new Map([[ie.QR_CODE,"QR_CODE"],[ie.AZTEC,"AZTEC"],[ie.CODABAR,"CODABAR"],[ie.CODE_39,"CODE_39"],[ie.CODE_93,"CODE_93"],[ie.CODE_128,"CODE_128"],[ie.DATA_MATRIX,"DATA_MATRIX"],[ie.MAXICODE,"MAXICODE"],[ie.ITF,"ITF"],[ie.EAN_13,"EAN_13"],[ie.EAN_8,"EAN_8"],[ie.PDF_417,"PDF_417"],[ie.RSS_14,"RSS_14"],[ie.RSS_EXPANDED,"RSS_EXPANDED"],[ie.UPC_A,"UPC_A"],[ie.UPC_E,"UPC_E"],[ie.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Mo;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.URL=1]="URL"})(Mo||(Mo={}));function q0(s){return Object.values(ie).includes(s)}var di;(function(s){s[s.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",s[s.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(di||(di={}));var Q0=function(){function s(){}return s.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",s.SCAN_DEFAULT_FPS=2,s.DEFAULT_DISABLE_FLIP=!1,s.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,s.DEFAULT_SUPPORTED_SCAN_TYPE=[di.SCAN_TYPE_CAMERA,di.SCAN_TYPE_FILE],s}(),Xa=function(){function s(a,c){this.format=a,this.formatName=c}return s.prototype.toString=function(){return this.formatName},s.create=function(a){if(!Do.has(a))throw"".concat(a," not in html5QrcodeSupportedFormatsTextMap");return new s(a,Do.get(a))},s}(),vo=function(){function s(){}return s.createFromText=function(a){var c={text:a};return{decodedText:a,result:c}},s.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},s}(),gs;(function(s){s[s.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",s[s.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",s[s.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(gs||(gs={}));var J0=function(){function s(){}return s.createFrom=function(a){return{errorMessage:a,type:gs.UNKWOWN_ERROR}},s}(),$0=function(){function s(a){this.verbose=a}return s.prototype.log=function(a){this.verbose&&console.log(a)},s.prototype.warn=function(a){this.verbose&&console.warn(a)},s.prototype.logError=function(a,c){(this.verbose||c===!0)&&console.error(a)},s.prototype.logErrors=function(a){if(a.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},s}();function Cn(s){return typeof s>"u"||s===null}var lr=function(){function s(){}return s.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},s.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},s.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},s.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},s.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},s.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},s.scannerPaused=function(){return"Scanner paused"},s}(),Ya=function(){function s(){}return s.isMediaStreamConstraintsValid=function(a,c){if(typeof a!="object"){var h=typeof a;return c.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(h,"."),!0),!1}for(var g=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(g),A=Object.keys(a),m=0,y=A;m<y.length;m++){var C=y[m];if(d.has(C))return c.logError("".concat(C," is not supported videoConstaints."),!0),!1}return!0},s}(),ni=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ec(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Nr={exports:{}},tc=Nr.exports,Bo;function nc(){return Bo||(Bo=1,function(s,a){(function(c,h){h(a)})(tc,function(c){function h(w){return w==null}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,e){w.__proto__=e}||function(w,e){for(var t in e)e.hasOwnProperty(t)&&(w[t]=e[t])};function d(w,e){g(w,e);function t(){this.constructor=w}w.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function A(w,e){var t=Object.setPrototypeOf;t?t(w,e):w.__proto__=e}function m(w,e){e===void 0&&(e=w.constructor);var t=Error.captureStackTrace;t&&t(w,e)}var y=function(w){d(e,w);function e(t){var n=this.constructor,r=w.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),A(r,n.prototype),m(r),r}return e}(Error);class C extends y{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}C.kind="Exception";class _ extends C{}_.kind="ArgumentException";class O extends C{}O.kind="IllegalArgumentException";class z{constructor(e){if(this.binarizer=e,e===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new z(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new z(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new z(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class Y extends C{static getChecksumInstance(){return new Y}}Y.kind="ChecksumException";class we{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ne{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class Xe extends C{}Xe.kind="IndexOutOfBoundsException";class Se extends Xe{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}Se.kind="ArrayIndexOutOfBoundsException";class de{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){de.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new O("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new Se(t);if(n>e)throw new Se(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(i=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(i=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return ne.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){n===void 0&&(n=de.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const o=i+r>>1,l=n(t,e[o]);if(l>0)r=o+1;else if(l<0)i=o-1;else return o}return-r-1}static numberComparator(e,t){return e-t}}class te{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}te.MIN_VALUE_32_BITS=-2147483648,te.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ${constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=$.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=$.makeArray(e);ne.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(e&31))-1);const o=n.length;for(;i===0;){if(++r===o)return t;i=n[r]}const l=r*32+te.numberOfTrailingZeros(i);return l>t?t:l}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(e&31))-1);const o=n.length;for(;i===0;){if(++r===o)return t;i=~n[r]}const l=r*32+te.numberOfTrailingZeros(i);return l>t?t:l}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new O;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let o=n;o<=r;o++){const l=o>n?0:e&31,u=(2<<(o<r?31:t&31))-(1<<l);i[o]|=u}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new O;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits;for(let l=r;l<=i;l++){const f=l>r?0:e&31,x=(2<<(l<i?31:t&31))-(1<<f)&4294967295;if((o[l]&x)!==(n?x:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new O("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let o=0;for(let l=0;l<8;l++)this.get(e)&&(o|=1<<7-l),e++;t[n+i]=o}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let o=r[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-i]=o}if(this.size!==n*32){const i=n*32-this.size;let o=e[0]>>>i;for(let l=1;l<n;l++){const f=e[l];o|=f<<32-i,e[l-1]=o,o=f>>>i}e[n-1]=o}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof $))return!1;const t=e;return this.size===t.size&&de.equals(this.bits,t.bits)}hashCode(){return 31*this.size+de.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new $(this.size,this.bits.slice())}}var We;(function(w){w[w.OTHER=0]="OTHER",w[w.PURE_BARCODE=1]="PURE_BARCODE",w[w.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",w[w.TRY_HARDER=3]="TRY_HARDER",w[w.CHARACTER_SET=4]="CHARACTER_SET",w[w.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",w[w.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",w[w.ASSUME_GS1=7]="ASSUME_GS1",w[w.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",w[w.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",w[w.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(We||(We={}));var Te=We;class Z extends C{static getFormatInstance(){return new Z}}Z.kind="FormatException";var Ie;(function(w){w[w.Cp437=0]="Cp437",w[w.ISO8859_1=1]="ISO8859_1",w[w.ISO8859_2=2]="ISO8859_2",w[w.ISO8859_3=3]="ISO8859_3",w[w.ISO8859_4=4]="ISO8859_4",w[w.ISO8859_5=5]="ISO8859_5",w[w.ISO8859_6=6]="ISO8859_6",w[w.ISO8859_7=7]="ISO8859_7",w[w.ISO8859_8=8]="ISO8859_8",w[w.ISO8859_9=9]="ISO8859_9",w[w.ISO8859_10=10]="ISO8859_10",w[w.ISO8859_11=11]="ISO8859_11",w[w.ISO8859_13=12]="ISO8859_13",w[w.ISO8859_14=13]="ISO8859_14",w[w.ISO8859_15=14]="ISO8859_15",w[w.ISO8859_16=15]="ISO8859_16",w[w.SJIS=16]="SJIS",w[w.Cp1250=17]="Cp1250",w[w.Cp1251=18]="Cp1251",w[w.Cp1252=19]="Cp1252",w[w.Cp1256=20]="Cp1256",w[w.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",w[w.UTF8=22]="UTF8",w[w.ASCII=23]="ASCII",w[w.Big5=24]="Big5",w[w.GB18030=25]="GB18030",w[w.EUC_KR=26]="EUC_KR"})(Ie||(Ie={}));class K{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,K.VALUE_IDENTIFIER_TO_ECI.set(e,this),K.NAME_TO_ECI.set(n,this);const i=this.values;for(let o=0,l=i.length;o!==l;o++){const f=i[o];K.VALUES_TO_ECI.set(f,this)}for(const o of r)K.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new Z("incorect value");const t=K.VALUES_TO_ECI.get(e);if(t===void 0)throw new Z("incorect value");return t}static getCharacterSetECIByName(e){const t=K.NAME_TO_ECI.get(e);if(t===void 0)throw new Z("incorect value");return t}equals(e){if(!(e instanceof K))return!1;const t=e;return this.getName()===t.getName()}}K.VALUE_IDENTIFIER_TO_ECI=new Map,K.VALUES_TO_ECI=new Map,K.NAME_TO_ECI=new Map,K.Cp437=new K(Ie.Cp437,Int32Array.from([0,2]),"Cp437"),K.ISO8859_1=new K(Ie.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),K.ISO8859_2=new K(Ie.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),K.ISO8859_3=new K(Ie.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),K.ISO8859_4=new K(Ie.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),K.ISO8859_5=new K(Ie.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),K.ISO8859_6=new K(Ie.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),K.ISO8859_7=new K(Ie.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),K.ISO8859_8=new K(Ie.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),K.ISO8859_9=new K(Ie.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),K.ISO8859_10=new K(Ie.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),K.ISO8859_11=new K(Ie.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),K.ISO8859_13=new K(Ie.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),K.ISO8859_14=new K(Ie.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),K.ISO8859_15=new K(Ie.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),K.ISO8859_16=new K(Ie.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),K.SJIS=new K(Ie.SJIS,20,"SJIS","Shift_JIS"),K.Cp1250=new K(Ie.Cp1250,21,"Cp1250","windows-1250"),K.Cp1251=new K(Ie.Cp1251,22,"Cp1251","windows-1251"),K.Cp1252=new K(Ie.Cp1252,23,"Cp1252","windows-1252"),K.Cp1256=new K(Ie.Cp1256,24,"Cp1256","windows-1256"),K.UnicodeBigUnmarked=new K(Ie.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),K.UTF8=new K(Ie.UTF8,26,"UTF8","UTF-8"),K.ASCII=new K(Ie.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),K.Big5=new K(Ie.Big5,28,"Big5"),K.GB18030=new K(Ie.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),K.EUC_KR=new K(Ie.EUC_KR,30,"EUC_KR","EUC-KR");class Bt extends C{}Bt.kind="UnsupportedOperationException";class ct{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!ct.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof K?e:K.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(ct.isDecodeFallbackSupported(n)){let r="";for(let i=0,o=e.length;i<o;i++){let l=e[i].toString(16);l.length<2&&(l="0"+l),r+="%"+l}return decodeURIComponent(r)}if(n.equals(K.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Bt(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(K.UTF8)||e.equals(K.ISO8859_1)||e.equals(K.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)}}class ue{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return ct.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get(Te.CHARACTER_SET)!==void 0)return t.get(Te.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,o=!0,l=0,f=0,u=0,x=0,p=0,E=0,I=0,N=0,R=0,D=0,P=0;const j=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let q=0;q<n&&(r||i||o);q++){const X=e[q]&255;o&&(l>0?(X&128)===0?o=!1:l--:(X&128)!==0&&((X&64)===0?o=!1:(l++,(X&32)===0?f++:(l++,(X&16)===0?u++:(l++,(X&8)===0?x++:o=!1))))),r&&(X>127&&X<160?r=!1:X>159&&(X<192||X===215||X===247)&&P++),i&&(p>0?X<64||X===127||X>252?i=!1:p--:X===128||X===160||X>239?i=!1:X>160&&X<224?(E++,N=0,I++,I>R&&(R=I)):X>127?(p++,I=0,N++,N>D&&(D=N)):(I=0,N=0))}return o&&l>0&&(o=!1),i&&p>0&&(i=!1),o&&(j||f+u+x>0)?ue.UTF8:i&&(ue.ASSUME_SHIFT_JIS||R>=3||D>=3)?ue.SHIFT_JIS:r&&i?R===2&&E===2||P*10>=n?ue.SHIFT_JIS:ue.ISO88591:r?ue.ISO88591:i?ue.SHIFT_JIS:o?ue.UTF8:ue.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function r(o,l,f,u,x,p){if(o==="%%")return"%";if(t[++n]===void 0)return;o=u?parseInt(u.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,I;switch(p){case"s":I=t[n];break;case"c":I=t[n][0];break;case"f":I=parseFloat(t[n]).toFixed(o);break;case"p":I=parseFloat(t[n]).toPrecision(o);break;case"e":I=parseFloat(t[n]).toExponential(o);break;case"x":I=parseInt(t[n]).toString(E||16);break;case"d":I=parseFloat(parseInt(t[n],E||10).toPrecision(o)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(E);let N=parseInt(f),R=f&&f[0]+""=="0"?"0":" ";for(;I.length<N;)I=l!==void 0?I+R:R+I;return I}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}static getBytes(e,t){return ct.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}ue.SHIFT_JIS=K.SJIS.getName(),ue.GB2312="GB2312",ue.ISO88591=K.ISO8859_1.getName(),ue.EUC_JP="EUC_JP",ue.UTF8=K.UTF8.getName(),ue.PLATFORM_DEFAULT_ENCODING=ue.UTF8,ue.ASSUME_SHIFT_JIS=!1;class De{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ue.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class rt{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,t==null&&(t=e),this.height=t,e<1||t<1)throw new O("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,r==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new rt(n,t);for(let i=0;i<t;i++){const o=e[i];for(let l=0;l<n;l++)o[l]&&r.set(l,i)}return r}static parseFromString(e,t,n){if(e===null)throw new O("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,o=0,l=-1,f=0,u=0;for(;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(i>o){if(l===-1)l=i-o;else if(i-o!==l)throw new O("row lengths do not match");o=i,f++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,r[i]=!0,i++;else if(e.substring(u,u+n.length)===n)u+=n.length,r[i]=!1,i++;else throw new O("illegal character encountered: "+e.substring(u));if(i>o){if(l===-1)l=i-o;else if(i-o!==l)throw new O("row lengths do not match");f++}const x=new rt(l,f);for(let p=0;p<i;p++)r[p]&&x.set(Math.floor(p%l),Math.floor(p/l));return x}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new O("input matrix dimensions do not match");const t=new $(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,o=this.height;i<o;i++){const l=i*n,f=e.getRow(i,t).getBitArray();for(let u=0;u<n;u++)r[l+u]^=f[u]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new O("Left and top must be nonnegative");if(r<1||n<1)throw new O("Height and width must be at least 1");const i=e+n,o=t+r;if(o>this.height||i>this.width)throw new O("The region must fit inside the matrix");const l=this.rowSize,f=this.bits;for(let u=t;u<o;u++){const x=u*l;for(let p=e;p<i;p++)f[x+Math.floor(p/32)]|=1<<(p&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new $(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let o=0;o<n;o++)t.setBulk(o*32,r[i+o]);return t}setRow(e,t){ne.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new $(e),r=new $(e);for(let i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,o=t,l=-1,f=-1;for(let u=0;u<t;u++)for(let x=0;x<n;x++){const p=r[u*n+x];if(p!==0){if(u<o&&(o=u),u>f&&(f=u),x*32<i){let E=0;for(;(p<<31-E&4294967295)===0;)E++;x*32+E<i&&(i=x*32+E)}if(x*32+31>l){let E=31;for(;!(p>>>E);)E--;x*32+E>l&&(l=x*32+E)}}}return l<i||f<o?null:Int32Array.from([i,o,l-i+1,f-o+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const o=t[n];let l=0;for(;(o<<31-l&4294967295)===0;)l++;return i+=l,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;const r=Math.floor(n/e);let i=Math.floor(n%e)*32;const o=t[n];let l=31;for(;!(o>>>l);)l--;return i+=l,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof rt))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&de.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+de.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new De;for(let i=0,o=this.height;i<o;i++){for(let l=0,f=this.width;l<f;l++)r.append(this.get(l,i)?e:t);r.append(n)}return r.toString()}clone(){return new rt(this.width,this.height,this.rowSize,this.bits.slice())}}class F extends C{static getNotFoundInstance(){return new F}}F.kind="NotFoundException";class Re extends we{constructor(e){super(e),this.luminances=Re.EMPTY,this.buckets=new Int32Array(Re.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();t==null||t.getSize()<r?t=new $(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),o=this.buckets;for(let f=0;f<r;f++)o[(i[f]&255)>>Re.LUMINANCE_SHIFT]++;const l=Re.estimateBlackPoint(o);if(r<3)for(let f=0;f<r;f++)(i[f]&255)<l&&t.set(f);else{let f=i[0]&255,u=i[1]&255;for(let x=1;x<r-1;x++){const p=i[x+1]&255;(u*4-f-p)/2<l&&t.set(x),f=u,u=p}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new rt(t,n);this.initArrays(t);const i=this.buckets;for(let f=1;f<5;f++){const u=Math.floor(n*f/5),x=e.getRow(u,this.luminances),p=Math.floor(t*4/5);for(let E=Math.floor(t/5);E<p;E++){const I=x[E]&255;i[I>>Re.LUMINANCE_SHIFT]++}}const o=Re.estimateBlackPoint(i),l=e.getMatrix();for(let f=0;f<n;f++){const u=f*t;for(let x=0;x<t;x++)(l[u+x]&255)<o&&r.set(x,f)}return r}createBinarizer(e){return new Re(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<Re.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let x=0;x<t;x++)e[x]>i&&(r=x,i=e[x]),e[x]>n&&(n=e[x]);let o=0,l=0;for(let x=0;x<t;x++){const p=x-r,E=e[x]*p*p;E>l&&(o=x,l=E)}if(r>o){const x=r;r=o,o=x}if(o-r<=t/16)throw new F;let f=o-1,u=-1;for(let x=o-1;x>r;x--){const p=x-r,E=p*p*(o-x)*(n-e[x]);E>u&&(f=x,u=E)}return f<<Re.LUMINANCE_SHIFT}}Re.LUMINANCE_BITS=5,Re.LUMINANCE_SHIFT=8-Re.LUMINANCE_BITS,Re.LUMINANCE_BUCKETS=1<<Re.LUMINANCE_BITS,Re.EMPTY=Uint8ClampedArray.from([0]);class se extends Re{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=se.MINIMUM_DIMENSION&&n>=se.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>se.BLOCK_SIZE_POWER;(t&se.BLOCK_SIZE_MASK)!==0&&i++;let o=n>>se.BLOCK_SIZE_POWER;(n&se.BLOCK_SIZE_MASK)!==0&&o++;const l=se.calculateBlackPoints(r,i,o,t,n),f=new rt(t,n);se.calculateThresholdForBlock(r,i,o,t,n,l,f),this.matrix=f}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new se(e)}static calculateThresholdForBlock(e,t,n,r,i,o,l){const f=i-se.BLOCK_SIZE,u=r-se.BLOCK_SIZE;for(let x=0;x<n;x++){let p=x<<se.BLOCK_SIZE_POWER;p>f&&(p=f);const E=se.cap(x,2,n-3);for(let I=0;I<t;I++){let N=I<<se.BLOCK_SIZE_POWER;N>u&&(N=u);const R=se.cap(I,2,t-3);let D=0;for(let j=-2;j<=2;j++){const q=o[E+j];D+=q[R-2]+q[R-1]+q[R]+q[R+1]+q[R+2]}const P=D/25;se.thresholdBlock(e,N,p,P,r,l)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,o){for(let l=0,f=n*i+t;l<se.BLOCK_SIZE;l++,f+=i)for(let u=0;u<se.BLOCK_SIZE;u++)(e[f+u]&255)<=r&&o.set(t+u,n+l)}static calculateBlackPoints(e,t,n,r,i){const o=i-se.BLOCK_SIZE,l=r-se.BLOCK_SIZE,f=new Array(n);for(let u=0;u<n;u++){f[u]=new Int32Array(t);let x=u<<se.BLOCK_SIZE_POWER;x>o&&(x=o);for(let p=0;p<t;p++){let E=p<<se.BLOCK_SIZE_POWER;E>l&&(E=l);let I=0,N=255,R=0;for(let P=0,j=x*r+E;P<se.BLOCK_SIZE;P++,j+=r){for(let q=0;q<se.BLOCK_SIZE;q++){const X=e[j+q]&255;I+=X,X<N&&(N=X),X>R&&(R=X)}if(R-N>se.MIN_DYNAMIC_RANGE)for(P++,j+=r;P<se.BLOCK_SIZE;P++,j+=r)for(let q=0;q<se.BLOCK_SIZE;q++)I+=e[j+q]&255}let D=I>>se.BLOCK_SIZE_POWER*2;if(R-N<=se.MIN_DYNAMIC_RANGE&&(D=N/2,u>0&&p>0)){const P=(f[u-1][p]+2*f[u][p-1]+f[u-1][p-1])/4;N<P&&(D=P)}f[u][p]=D}}return f}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class Be{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new Bt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Bt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Bt("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new De;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let i=0;i<this.width;i++){const o=r[i]&255;let l;o<64?l="#":o<128?l="+":o<192?l=".":l=" ",t.append(l)}t.append(`
`)}return t.toString()}}class mt extends Be{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(n[i]&255);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(e[r]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new mt(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new mt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new mt(this.delegate.rotateCounterClockwise45())}}class Ht extends Be{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Ht.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Ht.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,o=0,l=e.length;i<l;i+=4,o++){let f;if(e[i+3]===0)f=255;else{const x=e[i],p=e[i+1],E=e[i+2];f=306*x+601*p+117*E+512>>10}r[o]=f}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new O("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return t===null?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*Ht.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*o),f=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*o);return t.width=l,t.height=f,n.translate(l/2,f/2),n.rotate(r),n.drawImage(this.canvas,i/-2,o/-2),this.buffer=Ht.makeBufferFromCanvasImageData(t),this}invert(){return new mt(this)}}Ht.DEGREE_TO_RADIANS=Math.PI/180;class on{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ze=(globalThis||ni||self||window||void 0)&&(globalThis||ni||self||window||void 0).__awaiter||function(w,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(x){try{u(n.next(x))}catch(p){o(p)}}function f(x){try{u(n.throw(x))}catch(p){o(p)}}function u(x){x.done?i(x.value):r(x.value).then(l,f)}u((n=n.apply(w,e||[])).next())})};class an{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return Ze(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const r=n.kind==="video"?"videoinput":n.kind;if(r!=="videoinput")continue;const i=n.deviceId||n.id,o=n.label||`Video device ${t.length+1}`,l=n.groupId,f={deviceId:i,label:o,kind:r,groupId:l};t.push(f)}return t})}getVideoInputDevices(){return Ze(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new on(t.deviceId,t.label))})}findDeviceById(e){return Ze(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return Ze(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return Ze(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return Ze(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return Ze(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return Ze(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return Ze(this,void 0,void 0,function*(){let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return Ze(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return Ze(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return Ze(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return Ze(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new _(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new _(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new _("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new _("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new _("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new _("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new _("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new _("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new _("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new _("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return Ze(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return Ze(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const r=(i,o)=>{if(this._stopAsyncDecode){o(new F("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const l=this.decode(e);i(l)}catch(l){const f=t&&l instanceof F,x=(l instanceof Y||l instanceof Z)&&n;if(f||x)return setTimeout(r,this._timeBetweenDecodingAttempts,i,o);o(l)}};return new Promise((i,o)=>r(i,o))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r);const i=r instanceof Y||r instanceof Z,o=r instanceof F;(i||o)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new Ht(t),r=new se(n);return new z(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class wt{constructor(e,t,n=t==null?0:8*t.length,r,i,o=ne.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=i,this.resultMetadata=null,o==null?this.timestamp=ne.currentTimeMillis():this.timestamp=o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const n=new Array(t.length+e.length);ne.arraycopy(t,0,n,0,t.length),ne.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var xr;(function(w){w[w.AZTEC=0]="AZTEC",w[w.CODABAR=1]="CODABAR",w[w.CODE_39=2]="CODE_39",w[w.CODE_93=3]="CODE_93",w[w.CODE_128=4]="CODE_128",w[w.DATA_MATRIX=5]="DATA_MATRIX",w[w.EAN_8=6]="EAN_8",w[w.EAN_13=7]="EAN_13",w[w.ITF=8]="ITF",w[w.MAXICODE=9]="MAXICODE",w[w.PDF_417=10]="PDF_417",w[w.QR_CODE=11]="QR_CODE",w[w.RSS_14=12]="RSS_14",w[w.RSS_EXPANDED=13]="RSS_EXPANDED",w[w.UPC_A=14]="UPC_A",w[w.UPC_E=15]="UPC_E",w[w.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(xr||(xr={}));var ae=xr,Sn;(function(w){w[w.OTHER=0]="OTHER",w[w.ORIENTATION=1]="ORIENTATION",w[w.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",w[w.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",w[w.ISSUE_NUMBER=4]="ISSUE_NUMBER",w[w.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",w[w.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",w[w.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",w[w.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",w[w.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",w[w.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Sn||(Sn={}));var it=Sn;class Nn{constructor(e,t,n,r,i=-1,o=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class $t{exp(e){return this.expTable[e]}log(e){if(e===0)throw new O;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class St{constructor(e,t){if(t.length===0)throw new O;this.field=e;const n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),ne.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let n;if(e===1){n=0;for(let o=0,l=t.length;o!==l;o++){const f=t[o];n=$t.addOrSubtract(n,f)}return n}n=t[0];const r=t.length,i=this.field;for(let o=1;o<r;o++)n=$t.addOrSubtract(i.multiply(e,n),t[o]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const o=t;t=n,n=o}let r=new Int32Array(n.length);const i=n.length-t.length;ne.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=$t.addOrSubtract(t[o-i],n[o]);return new St(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1),l=this.field;for(let f=0;f<n;f++){const u=t[f];for(let x=0;x<i;x++)o[f+x]=$t.addOrSubtract(o[f+x],l.multiply(u,r[x]))}return new St(l,o)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let o=0;o<t;o++)r[o]=n.multiply(i[o],e);return new St(n,r)}multiplyByMonomial(e,t){if(e<0)throw new O;if(t===0)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),o=this.field;for(let l=0;l<r;l++)i[l]=o.multiply(n[l],t);return new St(o,i)}divide(e){if(!this.field.equals(e.field))throw new O("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new O("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),o=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const l=r.getDegree()-e.getDegree(),f=t.multiply(r.getCoefficient(r.getDegree()),o),u=e.multiplyByMonomial(l,f),x=t.buildMonomial(l,f);n=n.addOrSubtract(x),r=r.addOrSubtract(u)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){const r=this.field.log(n);r===0?e+="1":r===1?e+="a":(e+="a^",e+=r)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class T extends C{}T.kind="ArithmeticException";class S extends $t{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let l=0;l<t;l++)r[l]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const o=new Int32Array(t);for(let l=0;l<t-1;l++)o[r[l]]=l;this.logTable=o,this.zero=new St(this,Int32Array.from([0])),this.one=new St(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new O;if(t===0)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new St(this,n)}inverse(e){if(e===0)throw new T;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+te.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}S.AZTEC_DATA_12=new S(4201,4096,1),S.AZTEC_DATA_10=new S(1033,1024,1),S.AZTEC_DATA_6=new S(67,64,1),S.AZTEC_PARAM=new S(19,16,1),S.QR_CODE_FIELD_256=new S(285,256,0),S.DATA_MATRIX_FIELD_256=new S(301,256,1),S.AZTEC_DATA_8=S.DATA_MATRIX_FIELD_256,S.MAXICODE_FIELD_64=S.AZTEC_DATA_6;class L extends C{}L.kind="ReedSolomonException";class W extends C{}W.kind="IllegalStateException";class H{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new St(n,e),i=new Int32Array(t);let o=!0;for(let I=0;I<t;I++){const N=r.evaluateAt(n.exp(I+n.getGeneratorBase()));i[i.length-1-I]=N,N!==0&&(o=!1)}if(o)return;const l=new St(n,i),f=this.runEuclideanAlgorithm(n.buildMonomial(t,1),l,t),u=f[0],x=f[1],p=this.findErrorLocations(u),E=this.findErrorMagnitudes(x,p);for(let I=0;I<p.length;I++){const N=e.length-1-n.log(p[I]);if(N<0)throw new L("Bad error location");e[N]=S.addOrSubtract(e[N],E[I])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const I=e;e=t,t=I}const r=this.field;let i=e,o=t,l=r.getZero(),f=r.getOne();for(;o.getDegree()>=(n/2|0);){let I=i,N=l;if(i=o,l=f,i.isZero())throw new L("r_{i-1} was zero");o=I;let R=r.getZero();const D=i.getCoefficient(i.getDegree()),P=r.inverse(D);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){const j=o.getDegree()-i.getDegree(),q=r.multiply(o.getCoefficient(o.getDegree()),P);R=R.addOrSubtract(r.buildMonomial(j,q)),o=o.addOrSubtract(i.multiplyByMonomial(j,q))}if(f=R.multiply(l).addOrSubtract(N),o.getDegree()>=i.getDegree())throw new W("Division algorithm failed to reduce polynomial?")}const u=f.getCoefficient(0);if(u===0)throw new L("sigmaTilde(0) was zero");const x=r.inverse(u),p=f.multiplyScalar(x),E=o.multiplyScalar(x);return[p,E]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let o=1;o<i.getSize()&&r<t;o++)e.evaluateAt(o)===0&&(n[r]=i.inverse(o),r++);if(r!==t)throw new L("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let o=0;o<n;o++){const l=i.inverse(t[o]);let f=1;for(let u=0;u<n;u++)if(o!==u){const x=i.multiply(t[u],l),p=(x&1)===0?x|1:x&-2;f=i.multiply(f,p)}r[o]=i.multiply(e.evaluateAt(l),i.inverse(f)),i.getGeneratorBase()!==0&&(r[o]=i.multiply(r[o],l))}return r}}var k;(function(w){w[w.UPPER=0]="UPPER",w[w.LOWER=1]="LOWER",w[w.MIXED=2]="MIXED",w[w.DIGIT=3]="DIGIT",w[w.PUNCT=4]="PUNCT",w[w.BINARY=5]="BINARY"})(k||(k={}));class G{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=G.convertBoolArrayToByteArray(r),o=G.getEncodedData(r),l=new Nn(i,o,null,null);return l.setNumBits(r.length),l}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=k.UPPER,r=k.UPPER,i="",o=0;for(;o<t;)if(r===k.BINARY){if(t-o<5)break;let l=G.readCode(e,o,5);if(o+=5,l===0){if(t-o<11)break;l=G.readCode(e,o,11)+31,o+=11}for(let f=0;f<l;f++){if(t-o<8){o=t;break}const u=G.readCode(e,o,8);i+=ue.castAsNonUtf8Char(u),o+=8}r=n}else{let l=r===k.DIGIT?4:5;if(t-o<l)break;let f=G.readCode(e,o,l);o+=l;let u=G.getCharacter(r,f);u.startsWith("CTRL_")?(n=r,r=G.getTable(u.charAt(5)),u.charAt(6)==="L"&&(n=r)):(i+=u,r=n)}return i}static getTable(e){switch(e){case"L":return k.LOWER;case"P":return k.PUNCT;case"M":return k.MIXED;case"D":return k.DIGIT;case"B":return k.BINARY;case"U":default:return k.UPPER}}static getCharacter(e,t){switch(e){case k.UPPER:return G.UPPER_TABLE[t];case k.LOWER:return G.LOWER_TABLE[t];case k.MIXED:return G.MIXED_TABLE[t];case k.PUNCT:return G.PUNCT_TABLE[t];case k.DIGIT:return G.DIGIT_TABLE[t];default:throw new W("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=S.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=S.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=S.AZTEC_DATA_10):(n=12,t=S.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new Z;let o=e.length%n,l=new Int32Array(i);for(let E=0;E<i;E++,o+=n)l[E]=G.readCode(e,o,n);try{new H(t).decode(l,i-r)}catch(E){throw new Z(E)}let f=(1<<n)-1,u=0;for(let E=0;E<r;E++){let I=l[E];if(I===0||I===f)throw new Z;(I===1||I===f-1)&&u++}let x=new Array(r*n-u),p=0;for(let E=0;E<r;E++){let I=l[E];if(I===1||I===f-1)x.fill(I>1,p,p+n-1),p+=n-1;else for(let N=n-1;N>=0;--N)x[p++]=(I&1<<N)!==0}return x}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+n*4,i=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,t));if(t)for(let l=0;l<i.length;l++)i[l]=l;else{let l=r+1+2*te.truncDivision(te.truncDivision(r,2)-1,15),f=r/2,u=te.truncDivision(l,2);for(let x=0;x<f;x++){let p=x+te.truncDivision(x,15);i[f-x-1]=u-p-1,i[f+x]=u+p+1}}for(let l=0,f=0;l<n;l++){let u=(n-l)*4+(t?9:12),x=l*2,p=r-1-x;for(let E=0;E<u;E++){let I=E*2;for(let N=0;N<2;N++)o[f+I+N]=e.get(i[x+N],i[x+E]),o[f+2*u+I+N]=e.get(i[x+E],i[p-N]),o[f+4*u+I+N]=e.get(i[p-N],i[p-E]),o[f+6*u+I+N]=e.get(i[p-E],i[x+N])}f+=u*8}return o}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?G.readCode(e,t,8):G.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=G.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}G.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],G.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],G.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],G.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],G.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class U{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++){const i=e[n];t+=i}return t}}class Q{static floatToIntBits(e){return e}}Q.MAX_VALUE=Number.MAX_SAFE_INTEGER;class v{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof v){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*Q.floatToIntBits(this.x)+Q.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,o,l;if(n>=t&&n>=r?(o=e[0],i=e[1],l=e[2]):r>=n&&r>=t?(o=e[1],i=e[0],l=e[2]):(o=e[2],i=e[0],l=e[1]),this.crossProductZ(i,o,l)<0){const f=i;i=l,l=f}e[0]=i,e[1]=o,e[2]=l}static distance(e,t){return U.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ee extends le{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class oe{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=oe.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),r==null&&(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new F}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,o=!0,l=!1,f=!1,u=!1,x=!1,p=!1;const E=this.width,I=this.height;for(;o;){o=!1;let N=!0;for(;(N||!f)&&t<E;)N=this.containsBlackPoint(n,r,t,!1),N?(t++,o=!0,f=!0):f||t++;if(t>=E){i=!0;break}let R=!0;for(;(R||!u)&&r<I;)R=this.containsBlackPoint(e,t,r,!0),R?(r++,o=!0,u=!0):u||r++;if(r>=I){i=!0;break}let D=!0;for(;(D||!x)&&e>=0;)D=this.containsBlackPoint(n,r,e,!1),D?(e--,o=!0,x=!0):x||e--;if(e<0){i=!0;break}let P=!0;for(;(P||!p)&&n>=0;)P=this.containsBlackPoint(e,t,n,!0),P?(n--,o=!0,p=!0):p||n--;if(n<0){i=!0;break}o&&(l=!0)}if(!i&&l){const N=t-e;let R=null;for(let q=1;R===null&&q<N;q++)R=this.getBlackPointOnSegment(e,r-q,e+q,r);if(R==null)throw new F;let D=null;for(let q=1;D===null&&q<N;q++)D=this.getBlackPointOnSegment(e,n+q,e+q,n);if(D==null)throw new F;let P=null;for(let q=1;P===null&&q<N;q++)P=this.getBlackPointOnSegment(t,n+q,t-q,n);if(P==null)throw new F;let j=null;for(let q=1;j===null&&q<N;q++)j=this.getBlackPointOnSegment(t,r-q,t-q,r);if(j==null)throw new F;return this.centerEdges(j,R,P,D)}else throw new F}getBlackPointOnSegment(e,t,n,r){const i=U.round(U.distance(e,t,n,r)),o=(n-e)/i,l=(r-t)/i,f=this.image;for(let u=0;u<i;u++){const x=U.round(e+u*o),p=U.round(t+u*l);if(f.get(x,p))return new v(x,p)}return null}centerEdges(e,t,n,r){const i=e.getX(),o=e.getY(),l=t.getX(),f=t.getY(),u=n.getX(),x=n.getY(),p=r.getX(),E=r.getY(),I=oe.CORR;return i<this.width/2?[new v(p-I,E+I),new v(l+I,f+I),new v(u-I,x-I),new v(i+I,o-I)]:[new v(p+I,E+I),new v(l+I,f-I),new v(u-I,x+I),new v(i-I,o-I)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let o=e;o<=t;o++)if(i.get(o,n))return!0}else for(let o=e;o<=t;o++)if(i.get(n,o))return!0;return!1}}oe.INIT_SIZE=10,oe.CORR=1;class ge{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let o=0;o<t.length&&i;o+=2){const l=Math.floor(t[o]),f=Math.floor(t[o+1]);if(l<-1||l>n||f<-1||f>r)throw new F;i=!1,l===-1?(t[o]=0,i=!0):l===n&&(t[o]=n-1,i=!0),f===-1?(t[o+1]=0,i=!0):f===r&&(t[o+1]=r-1,i=!0)}i=!0;for(let o=t.length-2;o>=0&&i;o-=2){const l=Math.floor(t[o]),f=Math.floor(t[o+1]);if(l<-1||l>n||f<-1||f>r)throw new F;i=!1,l===-1?(t[o]=0,i=!0):l===n&&(t[o]=n-1,i=!0),f===-1?(t[o+1]=0,i=!0):f===r&&(t[o+1]=r-1,i=!0)}}}class pe{constructor(e,t,n,r,i,o,l,f,u){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=l,this.a23=f,this.a33=u}static quadrilateralToQuadrilateral(e,t,n,r,i,o,l,f,u,x,p,E,I,N,R,D){const P=pe.quadrilateralToSquare(e,t,n,r,i,o,l,f);return pe.squareToQuadrilateral(u,x,p,E,I,N,R,D).times(P)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,l=this.a22,f=this.a23,u=this.a31,x=this.a32,p=this.a33;for(let E=0;E<t;E+=2){const I=e[E],N=e[E+1],R=i*I+f*N+p;e[E]=(n*I+o*N+u)/R,e[E+1]=(r*I+l*N+x)/R}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,o=this.a21,l=this.a22,f=this.a23,u=this.a31,x=this.a32,p=this.a33,E=e.length;for(let I=0;I<E;I++){const N=e[I],R=t[I],D=i*N+f*R+p;e[I]=(n*N+o*R+u)/D,t[I]=(r*N+l*R+x)/D}}static squareToQuadrilateral(e,t,n,r,i,o,l,f){const u=e-n+i-l,x=t-r+o-f;if(u===0&&x===0)return new pe(n-e,i-n,e,r-t,o-r,t,0,0,1);{const p=n-i,E=l-i,I=r-o,N=f-o,R=p*N-E*I,D=(u*N-E*x)/R,P=(p*x-u*I)/R;return new pe(n-e+D*n,l-e+P*l,e,r-t+D*r,f-t+P*f,t,D,P,1)}}static quadrilateralToSquare(e,t,n,r,i,o,l,f){return pe.squareToQuadrilateral(e,t,n,r,i,o,l,f).buildAdjoint()}buildAdjoint(){return new pe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new pe(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Ve extends ge{sampleGrid(e,t,n,r,i,o,l,f,u,x,p,E,I,N,R,D,P,j,q){const X=pe.quadrilateralToQuadrilateral(r,i,o,l,f,u,x,p,E,I,N,R,D,P,j,q);return this.sampleGridWithTransform(e,t,n,X)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new F;const i=new rt(t,n),o=new Float32Array(2*t);for(let l=0;l<n;l++){const f=o.length,u=l+.5;for(let x=0;x<f;x+=2)o[x]=x/2+.5,o[x+1]=u;r.transformPoints(o),ge.checkAndNudgePoints(e,o);try{for(let x=0;x<f;x+=2)e.get(Math.floor(o[x]),Math.floor(o[x+1]))&&i.set(x/2,l)}catch{throw new F}}return i}}class ye{static setGridSampler(e){ye.gridSampler=e}static getInstance(){return ye.gridSampler}}ye.gridSampler=new Ve;class He{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new v(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class pt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let o=n[0];n[0]=n[2],n[2]=o}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new ee(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new F;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let o=0;o<4;o++){let l=n[(this.shift+o)%4];this.compact?(r<<=7,r+=l>>1&127):(r<<=10,r+=(l>>2&992)+(l>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(i&63)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(i&2047)+1)}getRotation(e,t){let n=0;e.forEach((r,i,o)=>{let l=(r>>t-2<<1)+(r&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(let r=0;r<4;r++)if(te.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new F}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,o=new Int32Array(n);for(let f=n-1;f>=0;--f)o[f]=e&15,e>>=4;try{new H(S.AZTEC_PARAM).decode(o,i)}catch{throw new F}let l=0;for(let f=0;f<r;f++)l=(l<<4)+o[f];return l}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let p=this.getFirstDifferent(t,o,1,-1),E=this.getFirstDifferent(n,o,1,1),I=this.getFirstDifferent(r,o,-1,1),N=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let R=this.distancePoint(N,p)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(R<.75||R>1.25||!this.isWhiteOrBlackRectangle(p,E,I,N))break}t=p,n=E,r=I,i=N,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new F;this.compact=this.nbCenterLayers===5;let l=new v(t.getX()+.5,t.getY()-.5),f=new v(n.getX()+.5,n.getY()+.5),u=new v(r.getX()-.5,r.getY()+.5),x=new v(i.getX()-.5,i.getY()-.5);return this.expandSquare([l,f,u,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let l=new oe(this.image).detect();e=l[0],t=l[1],n=l[2],r=l[3]}catch{let f=this.image.getWidth()/2,u=this.image.getHeight()/2;e=this.getFirstDifferent(new He(f+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new He(f+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new He(f-7,u+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new He(f-7,u-7),!1,-1,-1).toResultPoint()}let i=U.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=U.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let l=new oe(this.image,15,i,o).detect();e=l[0],t=l[1],n=l[2],r=l[3]}catch{e=this.getFirstDifferent(new He(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new He(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new He(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new He(i-7,o-7),!1,-1,-1).toResultPoint()}return i=U.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=U.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new He(i,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let o=ye.getInstance(),l=this.getDimension(),f=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return o.sampleGrid(e,l,l,f,f,u,f,u,u,f,u,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),o=i/n,l=e.getX(),f=e.getY(),u=o*(t.getX()-e.getX())/i,x=o*(t.getY()-e.getY())/i;for(let p=0;p<n;p++)this.image.get(U.round(l+p*u),U.round(f+p*x))&&(r|=1<<n-p-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new He(e.getX()-i,e.getY()+i),t=new He(t.getX()-i,t.getY()-i),n=new He(n.getX()+i,n.getY()-i),r=new He(r.getX()+i,r.getY()+i);let o=this.getColor(r,e);if(o===0)return!1;let l=this.getColor(e,t);return l!==o||(l=this.getColor(t,n),l!==o)?!1:(l=this.getColor(n,r),l===o)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,l=e.getX(),f=e.getY(),u=this.image.get(e.getX(),e.getY()),x=Math.ceil(n);for(let E=0;E<x;E++)l+=r,f+=i,this.image.get(U.round(l),U.round(f))!==u&&o++;let p=o/n;return p>.1&&p<.9?0:p<=.1===u?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,o=e.getY()+r;for(;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=r;for(i-=n,o-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=r;return o-=r,new He(i,o)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,u=new v(l+r*i,f+r*o),x=new v(l-r*i,f-r*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;let p=new v(l+r*i,f+r*o),E=new v(l-r*i,f-r*o);return[u,p,x,E]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=U.round(e.getX()),n=U.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return U.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return U.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(te.truncDivision(this.nbLayers-4,8)+1)+15}}class Nt{decode(e,t=null){let n=null,r=new pt(e.getBlackMatrix()),i=null,o=null;try{let x=r.detectMirror(!1);i=x.getPoints(),this.reportFoundResultPoints(t,i),o=new G().decode(x)}catch(x){n=x}if(o==null)try{let x=r.detectMirror(!0);i=x.getPoints(),this.reportFoundResultPoints(t,i),o=new G().decode(x)}catch(x){throw n??x}let l=new wt(o.getText(),o.getRawBytes(),o.getNumBits(),i,ae.AZTEC,ne.currentTimeMillis()),f=o.getByteSegments();f!=null&&l.putMetadata(it.BYTE_SEGMENTS,f);let u=o.getECLevel();return u!=null&&l.putMetadata(it.ERROR_CORRECTION_LEVEL,u),l}reportFoundResultPoints(e,t){if(e!=null){let n=e.get(Te.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((r,i,o)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class zt extends an{constructor(e=500){super(new Nt,e)}}class je{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(Te.TRY_HARDER)===!0&&e.isRotateSupported()){const i=e.rotateCounterClockwise(),o=this.doDecode(i,t),l=o.getResultMetadata();let f=270;l!==null&&l.get(it.ORIENTATION)===!0&&(f=f+l.get(it.ORIENTATION)%360),o.putMetadata(it.ORIENTATION,f);const u=o.getResultPoints();if(u!==null){const x=i.getHeight();for(let p=0;p<u.length;p++)u[p]=new v(x-u[p].getY()-1,u[p].getX())}return o}else throw new F}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new $(n);const o=t&&t.get(Te.TRY_HARDER)===!0,l=Math.max(1,r>>(o?8:5));let f;o?f=r:f=15;const u=Math.trunc(r/2);for(let x=0;x<f;x++){const p=Math.trunc((x+1)/2),E=(x&1)===0,I=u+l*(E?p:-p);if(I<0||I>=r)break;try{i=e.getBlackRow(I,i)}catch{continue}for(let N=0;N<2;N++){if(N===1&&(i.reverse(),t&&t.get(Te.NEED_RESULT_POINT_CALLBACK)===!0)){const R=new Map;t.forEach((D,P)=>R.set(P,D)),R.delete(Te.NEED_RESULT_POINT_CALLBACK),t=R}try{const R=this.decodeRow(I,i,t);if(N===1){R.putMetadata(it.ORIENTATION,180);const D=R.getResultPoints();D!==null&&(D[0]=new v(n-D[0].getX()-1,D[0].getY()),D[1]=new v(n-D[1].getX()-1,D[1].getY()))}return R}catch{}}}throw new F}static recordPattern(e,t,n){const r=n.length;for(let u=0;u<r;u++)n[u]=0;const i=e.getSize();if(t>=i)throw new F;let o=!e.get(t),l=0,f=t;for(;f<i;){if(e.get(f)!==o)n[l]++;else{if(++l===r)break;n[l]=1,o=!o}f++}if(!(l===r||l===r-1&&f===i))throw new F}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new F;je.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,o=0;for(let u=0;u<r;u++)i+=e[u],o+=t[u];if(i<o)return Number.POSITIVE_INFINITY;const l=i/o;n*=l;let f=0;for(let u=0;u<r;u++){const x=e[u],p=t[u]*l,E=x>p?x-p:p-x;if(E>n)return Number.POSITIVE_INFINITY;f+=E}return f/i}}class J extends je{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),o=n,l=!1;const f=6;for(let u=n;u<t;u++)if(e.get(u)!==l)i[r]++;else{if(r===f-1){let x=J.MAX_AVG_VARIANCE,p=-1;for(let E=J.CODE_START_A;E<=J.CODE_START_C;E++){const I=je.patternMatchVariance(i,J.CODE_PATTERNS[E],J.MAX_INDIVIDUAL_VARIANCE);I<x&&(x=I,p=E)}if(p>=0&&e.isRange(Math.max(0,o-(u-o)/2),o,!1))return Int32Array.from([o,u,p]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,l=!l}throw new F}static decodeCode(e,t,n){je.recordPattern(e,n,t);let r=J.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<J.CODE_PATTERNS.length;o++){const l=J.CODE_PATTERNS[o],f=this.patternMatchVariance(t,l,J.MAX_INDIVIDUAL_VARIANCE);f<r&&(r=f,i=o)}if(i>=0)return i;throw new F}decodeRow(e,t,n){const r=n&&n.get(Te.ASSUME_GS1)===!0,i=J.findStartPattern(t),o=i[2];let l=0;const f=new Uint8Array(20);f[l++]=o;let u;switch(o){case J.CODE_START_A:u=J.CODE_CODE_A;break;case J.CODE_START_B:u=J.CODE_CODE_B;break;case J.CODE_START_C:u=J.CODE_CODE_C;break;default:throw new Z}let x=!1,p=!1,E="",I=i[0],N=i[1];const R=Int32Array.from([0,0,0,0,0,0]);let D=0,P=0,j=o,q=0,X=!0,Ne=!1,Ae=!1;for(;!x;){const sr=p;switch(p=!1,D=P,P=J.decodeCode(t,R,N),f[l++]=P,P!==J.CODE_STOP&&(X=!0),P!==J.CODE_STOP&&(q++,j+=q*P),I=N,N+=R.reduce((m1,b1)=>m1+b1,0),P){case J.CODE_START_A:case J.CODE_START_B:case J.CODE_START_C:throw new Z}switch(u){case J.CODE_CODE_A:if(P<64)Ae===Ne?E+=String.fromCharCode(32+P):E+=String.fromCharCode(32+P+128),Ae=!1;else if(P<96)Ae===Ne?E+=String.fromCharCode(P-64):E+=String.fromCharCode(P+64),Ae=!1;else switch(P!==J.CODE_STOP&&(X=!1),P){case J.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case J.CODE_FNC_2:case J.CODE_FNC_3:break;case J.CODE_FNC_4_A:!Ne&&Ae?(Ne=!0,Ae=!1):Ne&&Ae?(Ne=!1,Ae=!1):Ae=!0;break;case J.CODE_SHIFT:p=!0,u=J.CODE_CODE_B;break;case J.CODE_CODE_B:u=J.CODE_CODE_B;break;case J.CODE_CODE_C:u=J.CODE_CODE_C;break;case J.CODE_STOP:x=!0;break}break;case J.CODE_CODE_B:if(P<96)Ae===Ne?E+=String.fromCharCode(32+P):E+=String.fromCharCode(32+P+128),Ae=!1;else switch(P!==J.CODE_STOP&&(X=!1),P){case J.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case J.CODE_FNC_2:case J.CODE_FNC_3:break;case J.CODE_FNC_4_B:!Ne&&Ae?(Ne=!0,Ae=!1):Ne&&Ae?(Ne=!1,Ae=!1):Ae=!0;break;case J.CODE_SHIFT:p=!0,u=J.CODE_CODE_A;break;case J.CODE_CODE_A:u=J.CODE_CODE_A;break;case J.CODE_CODE_C:u=J.CODE_CODE_C;break;case J.CODE_STOP:x=!0;break}break;case J.CODE_CODE_C:if(P<100)P<10&&(E+="0"),E+=P;else switch(P!==J.CODE_STOP&&(X=!1),P){case J.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case J.CODE_CODE_A:u=J.CODE_CODE_A;break;case J.CODE_CODE_B:u=J.CODE_CODE_B;break;case J.CODE_STOP:x=!0;break}break}sr&&(u=u===J.CODE_CODE_A?J.CODE_CODE_B:J.CODE_CODE_A)}const kt=N-I;if(N=t.getNextUnset(N),!t.isRange(N,Math.min(t.getSize(),N+(N-I)/2),!1))throw new F;if(j-=q*D,j%103!==D)throw new Y;const tn=E.length;if(tn===0)throw new F;tn>0&&X&&(u===J.CODE_CODE_C?E=E.substring(0,tn-2):E=E.substring(0,tn-1));const Ut=(i[1]+i[0])/2,ze=I+kt/2,Ct=f.length,Wt=new Uint8Array(Ct);for(let sr=0;sr<Ct;sr++)Wt[sr]=f[sr];const ir=[new v(Ut,e),new v(ze,e)];return new wt(E,Wt,0,ir,ae.CODE_128,new Date().getTime())}}J.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],J.MAX_AVG_VARIANCE=.25,J.MAX_INDIVIDUAL_VARIANCE=.7,J.CODE_SHIFT=98,J.CODE_CODE_C=99,J.CODE_CODE_B=100,J.CODE_CODE_A=101,J.CODE_FNC_1=102,J.CODE_FNC_2=97,J.CODE_FNC_3=96,J.CODE_FNC_4_A=101,J.CODE_FNC_4_B=100,J.CODE_START_A=103,J.CODE_START_B=104,J.CODE_START_C=105,J.CODE_STOP=106;class Me extends je{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i=Me.findAsteriskPattern(t,r),o=t.getNextSet(i[1]),l=t.getSize(),f,u;do{Me.recordPattern(t,o,r);let R=Me.toNarrowWidePattern(r);if(R<0)throw new F;f=Me.patternToChar(R),this.decodeRowResult+=f,u=o;for(let D of r)o+=D;o=t.getNextSet(o)}while(f!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let R of r)x+=R;let p=o-u-x;if(o!==l&&p*2<x)throw new F;if(this.usingCheckDigit){let R=this.decodeRowResult.length-1,D=0;for(let P=0;P<R;P++)D+=Me.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(P));if(this.decodeRowResult.charAt(R)!==Me.ALPHABET_STRING.charAt(D%43))throw new Y;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new F;let E;this.extendedMode?E=Me.decodeExtended(this.decodeRowResult):E=this.decodeRowResult;let I=(i[1]+i[0])/2,N=u+x/2;return new wt(E,null,0,[new v(I,e),new v(N,e)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,o=r,l=!1,f=t.length;for(let u=r;u<n;u++)if(e.get(u)!==l)t[i]++;else{if(i===f-1){if(this.toNarrowWidePattern(t)===Me.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((u-o)/2)),o,!1))return[o,u];o+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,l=!l}throw new F}static toNarrowWidePattern(e){let t=e.length,n=0,r;do{let i=2147483647;for(let f of e)f<i&&f>n&&(i=f);n=i,r=0;let o=0,l=0;for(let f=0;f<t;f++){let u=e[f];u>n&&(l|=1<<t-1-f,r++,o+=u)}if(r===3){for(let f=0;f<t&&r>0;f++){let u=e[f];if(u>n&&(r--,u*2>=o))return-1}return l}}while(r>3);return-1}static patternToChar(e){for(let t=0;t<Me.CHARACTER_ENCODINGS.length;t++)if(Me.CHARACTER_ENCODINGS[t]===e)return Me.ALPHABET_STRING.charAt(t);if(e===Me.ASTERISK_ENCODING)return"*";throw new F}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let i=e.charAt(r);if(i==="+"||i==="$"||i==="%"||i==="/"){let o=e.charAt(r+1),l="\0";switch(i){case"+":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new Z;break;case"$":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new Z;break;case"%":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o==="X"||o==="Y"||o==="Z")l="";else throw new Z;break;case"/":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new Z;break}n+=l,r++}else n+=i}return n}}Me.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Me.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Me.ASTERISK_ENCODING=148;class _e extends je{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),o=new De;_e.decodeMiddle(t,r[1],i[0],o);let l=o.toString(),f=null;n!=null&&(f=n.get(Te.ALLOWED_LENGTHS)),f==null&&(f=_e.DEFAULT_ALLOWED_LENGTHS);let u=l.length,x=!1,p=0;for(let N of f){if(u===N){x=!0;break}N>p&&(p=N)}if(!x&&u>p&&(x=!0),!x)throw new Z;const E=[new v(r[1],e),new v(i[0],e)];return new wt(l,null,0,E,ae.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),o=new Int32Array(5),l=new Int32Array(5);for(i.fill(0),o.fill(0),l.fill(0);t<n;){je.recordPattern(e,t,i);for(let u=0;u<5;u++){let x=2*u;o[u]=i[x],l[u]=i[x+1]}let f=_e.decodeDigit(o);r.append(f.toString()),f=this.decodeDigit(l),r.append(f.toString()),i.forEach(function(u){t+=u})}}decodeStart(e){let t=_e.skipWhiteSpace(e),n=_e.findGuardPattern(e,t,_e.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(n!==0)throw new F}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new F;return n}decodeEnd(e){e.reverse();try{let t=_e.skipWhiteSpace(e),n;try{n=_e.findGuardPattern(e,t,_e.END_PATTERN_REVERSED[0])}catch(i){i instanceof F&&(n=_e.findGuardPattern(e,t,_e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),o=e.getSize(),l=!1,f=0,u=t;i.fill(0);for(let x=t;x<o;x++)if(e.get(x)!==l)i[f]++;else{if(f===r-1){if(je.patternMatchVariance(i,n,_e.MAX_INDIVIDUAL_VARIANCE)<_e.MAX_AVG_VARIANCE)return[u,x];u+=i[0]+i[1],ne.arraycopy(i,2,i,0,f-1),i[f-1]=0,i[f]=0,f--}else f++;i[f]=1,l=!l}throw new F}static decodeDigit(e){let t=_e.MAX_AVG_VARIANCE,n=-1,r=_e.PATTERNS.length;for(let i=0;i<r;i++){let o=_e.PATTERNS[i],l=je.patternMatchVariance(e,o,_e.MAX_INDIVIDUAL_VARIANCE);l<t?(t=l,n=i):l===t&&(n=-1)}if(n>=0)return n%10;throw new F}}_e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],_e.MAX_AVG_VARIANCE=.38,_e.MAX_INDIVIDUAL_VARIANCE=.5,_e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],_e.START_PATTERN=Int32Array.from([1,1,1,1]),_e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Je extends je{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,r=0,i=Int32Array.from([0,0,0]);for(;!t;){i=Int32Array.from([0,0,0]),n=Je.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let o=n[0];r=n[1];let l=o-(r-o);l>=0&&(t=e.isRange(l,o,!1))}return n}static checkChecksum(e){return Je.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Je.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new Z;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new Z;n+=i}return(1e3-n)%10}static decodeEnd(e,t){return Je.findGuardPattern(e,t,!1,Je.START_END_PATTERN,new Int32Array(Je.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let o=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let l=0,f=t,u=r.length,x=n;for(let p=t;p<o;p++)if(e.get(p)!==x)i[l]++;else{if(l===u-1){if(je.patternMatchVariance(i,r,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return Int32Array.from([f,p]);f+=i[0]+i[1];let E=i.slice(2,i.length-1);for(let I=0;I<l-1;I++)i[I]=E[I];i[l-1]=0,i[l]=0,l--}else l++;i[l]=1,x=!x}throw new F}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,o=-1,l=r.length;for(let f=0;f<l;f++){let u=r[f],x=je.patternMatchVariance(t,u,Je.MAX_INDIVIDUAL_VARIANCE);x<i&&(i=x,o=f)}if(o>=0)return o;throw new F}}Je.MAX_AVG_VARIANCE=.48,Je.MAX_INDIVIDUAL_VARIANCE=.7,Je.START_END_PATTERN=Int32Array.from([1,1,1]),Je.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Je.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Je.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class wr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),l=wr.parseExtensionString(o),f=[new v((n[0]+n[1])/2,e),new v(i,e)],u=new wt(o,null,0,f,ae.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],l=0;for(let u=0;u<5&&o<i;u++){let x=Je.decodeDigit(e,r,o,Je.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let p of r)o+=p;x>=10&&(l|=1<<4-u),u!==4&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(n.length!==5)throw new F;let f=this.determineCheckDigit(l);if(wr.extensionChecksum(n.toString())!==f)throw new F;return o}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new F}static parseExtensionString(e){if(e.length!==5)return null;let t=wr.parseExtension5String(e);return t==null?null:new Map([[it.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),r=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return t+r+"."+o}}class _i{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),l=_i.parseExtensionString(o),f=[new v((n[0]+n[1])/2,e),new v(i,e)],u=new wt(o,null,0,f,ae.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],l=0;for(let f=0;f<2&&o<i;f++){let u=Je.decodeDigit(e,r,o,Je.L_AND_G_PATTERNS);n+=String.fromCharCode(48+u%10);for(let x of r)o+=x;u>=10&&(l|=1<<1-f),f!==1&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(n.length!==2)throw new F;if(parseInt(n.toString())%4!==l)throw new F;return o}static parseExtensionString(e){return e.length!==2?null:new Map([[it.ISSUE_NUMBER,parseInt(e)]])}}class Us{static decodeRow(e,t,n){let r=Je.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new wr().decodeRow(e,t,r)}catch{return new _i().decodeRow(e,t,r)}}}Us.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Pe extends Je{constructor(){super(),this.decodeRowStringBuffer="",Pe.L_AND_G_PATTERNS=Pe.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Pe.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];Pe.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Pe.findStartGuardPattern(t),i=n==null?null:n.get(Te.NEED_RESULT_POINT_CALLBACK);if(i!=null){const X=new v((r[0]+r[1])/2,e);i.foundPossibleResultPoint(X)}let o=this.decodeMiddle(t,r,this.decodeRowStringBuffer),l=o.rowOffset,f=o.resultString;if(i!=null){const X=new v(l,e);i.foundPossibleResultPoint(X)}let u=this.decodeEnd(t,l);if(i!=null){const X=new v((u[0]+u[1])/2,e);i.foundPossibleResultPoint(X)}let x=u[1],p=x+(x-u[0]);if(p>=t.getSize()||!t.isRange(x,p,!1))throw new F;let E=f.toString();if(E.length<8)throw new Z;if(!Pe.checkChecksum(E))throw new Y;let I=(r[1]+r[0])/2,N=(u[1]+u[0])/2,R=this.getBarcodeFormat(),D=[new v(I,e),new v(N,e)],P=new wt(E,null,0,D,R,new Date().getTime()),j=0;try{let X=Us.decodeRow(e,t,u[1]);P.putMetadata(it.UPC_EAN_EXTENSION,X.getText()),P.putAllMetadata(X.getResultMetadata()),P.addResultPoints(X.getResultPoints()),j=X.getText().length}catch{}let q=n==null?null:n.get(Te.ALLOWED_EAN_EXTENSIONS);if(q!=null){let X=!1;for(let Ne in q)if(j.toString()===Ne){X=!0;break}if(!X)throw new F}return P}decodeEnd(e,t){return Pe.findGuardPattern(e,t,!1,Pe.START_END_PATTERN,new Int32Array(Pe.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Pe.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Pe.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new Z;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new Z;n+=i}return(1e3-n)%10}}class Un extends Pe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],l=0;for(let u=0;u<6&&o<i;u++){let x=Pe.decodeDigit(e,r,o,Pe.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let p of r)o+=p;x>=10&&(l|=1<<5-u)}n=Un.determineFirstDigit(n,l),o=Pe.findGuardPattern(e,o,!0,Pe.MIDDLE_PATTERN,new Int32Array(Pe.MIDDLE_PATTERN.length).fill(0))[1];for(let u=0;u<6&&o<i;u++){let x=Pe.decodeDigit(e,r,o,Pe.L_PATTERNS);n+=String.fromCharCode(48+x);for(let p of r)o+=p}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode(48+n)+e,e;throw new F}}Un.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Vs extends Pe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1];for(let f=0;f<4&&o<i;f++){let u=Pe.decodeDigit(e,r,o,Pe.L_PATTERNS);n+=String.fromCharCode(48+u);for(let x of r)o+=x}o=Pe.findGuardPattern(e,o,!0,Pe.MIDDLE_PATTERN,new Int32Array(Pe.MIDDLE_PATTERN.length).fill(0))[1];for(let f=0;f<4&&o<i;f++){let u=Pe.decodeDigit(e,r,o,Pe.L_PATTERNS);n+=String.fromCharCode(48+u);for(let x of r)o+=x}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return ae.EAN_8}}class Hs extends Pe{constructor(){super(...arguments),this.ean13Reader=new Un}getBarcodeFormat(){return ae.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new wt(t.substring(1),null,null,e.getResultPoints(),ae.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new F}reset(){this.ean13Reader.reset()}}class en extends Pe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(u=>u);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let o=t[1],l=0;for(let u=0;u<6&&o<i;u++){const x=en.decodeDigit(e,r,o,en.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let p of r)o+=p;x>=10&&(l|=1<<5-u)}let f=en.determineNumSysAndCheckDigit(n,l);return{rowOffset:o,resultString:f}}decodeEnd(e,t){return en.findGuardPatternWithoutCounters(e,t,!0,en.MIDDLE_END_PATTERN)}checkChecksum(e){return Pe.checkChecksum(en.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let i=String.fromCharCode(48+n),o=String.fromCharCode(48+r);return i+e+o}throw F.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(i=>i.charCodeAt(0)),n=new De;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}en.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),en.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ti extends je{constructor(e){super();let t=e==null?null:e.get(Te.POSSIBLE_FORMATS),n=[];h(t)?(n.push(new Un),n.push(new Hs),n.push(new Vs),n.push(new en)):(t.indexOf(ae.EAN_13)>-1&&n.push(new Un),t.indexOf(ae.UPC_A)>-1&&n.push(new Hs),t.indexOf(ae.EAN_8)>-1&&n.push(new Vs),t.indexOf(ae.UPC_E)>-1&&n.push(new en)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{const i=r.decodeRow(e,t,n),o=i.getBarcodeFormat()===ae.EAN_13&&i.getText().charAt(0)==="0",l=n==null?null:n.get(Te.POSSIBLE_FORMATS),f=l==null||l.includes(ae.UPC_A);if(o&&f){const u=i.getRawBytes(),x=new wt(i.getText().substring(1),u,u?u.length:null,i.getResultPoints(),ae.UPC_A);return x.putAllMetadata(i.getResultMetadata()),x}return i}catch{}throw new F}reset(){for(let e of this.readers)e.reset()}}class bt extends je{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(je.patternMatchVariance(e,t[n],bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE)return n;throw new F}static count(e){return U.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],r=t/n;if(r>=bt.MIN_FINDER_PATTERN_RATIO&&r<=bt.MAX_FINDER_PATTERN_RATIO){let i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(let l of e)l>o&&(o=l),l<i&&(i=l);return o<10*i}return!1}}bt.MAX_AVG_VARIANCE=.2,bt.MAX_INDIVIDUAL_VARIANCE=.45,bt.MIN_FINDER_PATTERN_RATIO=9.5/12,bt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Qn{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Qn))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Xr{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new v(n,i)),this.resultPoints.push(new v(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Xr))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class ln{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let f of e)r+=f;let i=0,o=0,l=e.length;for(let f=0;f<l-1;f++){let u;for(u=1,o|=1<<f;u<e[f];u++,o&=~(1<<f)){let x=ln.combins(r-u-1,l-f-2);if(n&&o===0&&r-u-(l-f-1)>=l-f-1&&(x-=ln.combins(r-u-(l-f),l-f-2)),l-f-1>1){let p=0;for(let E=r-u-(l-f-2);E>t;E--)p+=ln.combins(r-u-E-1,l-f-3);x-=p*(l-1-f)}else r-u>t&&x--;i+=x}r-=u}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,o=1;for(let l=e;l>n;l--)i*=l,o<=r&&(i/=o,o++);for(;o<=r;)i/=o,o++;return i}}class Za{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,r=new $(n),i=0,l=e[0].getRightChar().getValue();for(let f=11;f>=0;--f)(l&1<<f)!=0&&r.set(i),i++;for(let f=1;f<e.length;++f){let u=e[f],x=u.getLeftChar().getValue();for(let p=11;p>=0;--p)(x&1<<p)!=0&&r.set(i),i++;if(u.getRightChar()!=null){let p=u.getRightChar().getValue();for(let E=11;E>=0;--E)(p&1<<E)!=0&&r.set(i),i++}}return r}}class Vn{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Si{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Pt extends Si{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Pt.FNC1}}Pt.FNC1="$";class Hn extends Si{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Zt extends Si{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new Z;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Zt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Zt.FNC1}isAnyFNC1(){return this.firstDigit===Zt.FNC1||this.secondDigit===Zt.FNC1}}Zt.FNC1=10;class re{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new F;let t=e.substring(0,2);for(let i of re.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===re.VARIABLE_LENGTH?re.processVariableAI(2,i[2],e):re.processFixedAI(2,i[1],e);if(e.length<3)throw new F;let n=e.substring(0,3);for(let i of re.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===re.VARIABLE_LENGTH?re.processVariableAI(3,i[2],e):re.processFixedAI(3,i[1],e);for(let i of re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===re.VARIABLE_LENGTH?re.processVariableAI(4,i[2],e):re.processFixedAI(4,i[1],e);if(e.length<4)throw new F;let r=e.substring(0,4);for(let i of re.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===re.VARIABLE_LENGTH?re.processVariableAI(4,i[2],e):re.processFixedAI(4,i[1],e);throw new F}static processFixedAI(e,t,n){if(n.length<e)throw new F;let r=n.substring(0,e);if(n.length<e+t)throw new F;let i=n.substring(e,e+t),o=n.substring(e+t),l="("+r+")"+i,f=re.parseFieldsInGeneralPurpose(o);return f==null?l:l+f}static processVariableAI(e,t,n){let r=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;let o=n.substring(e,i),l=n.substring(i),f="("+r+")"+o,u=re.parseFieldsInGeneralPurpose(l);return u==null?f:f+u}}re.VARIABLE_LENGTH=[],re.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",re.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",re.VARIABLE_LENGTH,20],["22",re.VARIABLE_LENGTH,29],["30",re.VARIABLE_LENGTH,8],["37",re.VARIABLE_LENGTH,8],["90",re.VARIABLE_LENGTH,30],["91",re.VARIABLE_LENGTH,30],["92",re.VARIABLE_LENGTH,30],["93",re.VARIABLE_LENGTH,30],["94",re.VARIABLE_LENGTH,30],["95",re.VARIABLE_LENGTH,30],["96",re.VARIABLE_LENGTH,30],["97",re.VARIABLE_LENGTH,3],["98",re.VARIABLE_LENGTH,30],["99",re.VARIABLE_LENGTH,30]],re.THREE_DIGIT_DATA_LENGTH=[["240",re.VARIABLE_LENGTH,30],["241",re.VARIABLE_LENGTH,30],["242",re.VARIABLE_LENGTH,6],["250",re.VARIABLE_LENGTH,30],["251",re.VARIABLE_LENGTH,30],["253",re.VARIABLE_LENGTH,17],["254",re.VARIABLE_LENGTH,20],["400",re.VARIABLE_LENGTH,30],["401",re.VARIABLE_LENGTH,30],["402",17],["403",re.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",re.VARIABLE_LENGTH,20],["421",re.VARIABLE_LENGTH,15],["422",3],["423",re.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",re.VARIABLE_LENGTH,15],["391",re.VARIABLE_LENGTH,18],["392",re.VARIABLE_LENGTH,15],["393",re.VARIABLE_LENGTH,18],["703",re.VARIABLE_LENGTH,30]],re.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",re.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",re.VARIABLE_LENGTH,20],["8003",re.VARIABLE_LENGTH,30],["8004",re.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",re.VARIABLE_LENGTH,30],["8008",re.VARIABLE_LENGTH,12],["8018",18],["8020",re.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",re.VARIABLE_LENGTH,70],["8200",re.VARIABLE_LENGTH,70]];class Jn{constructor(e){this.buffer=new De,this.information=e}decodeAllCodes(e,t){let n=t,r=null;do{let i=this.decodeGeneralPurposeField(n,r),o=re.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?r=""+i.getRemainingValue():r=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let i=this.extractNumericValueFromBitArray(e,4);return i===0?new Zt(this.information.getSize(),Zt.FNC1,Zt.FNC1):new Zt(this.information.getSize(),i-1,Zt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,r=(t-8)%11;return new Zt(e+7,n,r)}extractNumericValueFromBitArray(e,t){return Jn.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new Hn(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Hn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new Hn(this.current.getPosition(),this.buffer.toString()):t=new Hn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Vn(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new Hn(this.current.getPosition(),this.buffer.toString());return new Vn(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Vn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new Hn(this.current.getPosition(),this.buffer.toString());return new Vn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Vn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new Hn(this.current.getPosition(),this.buffer.toString());return new Vn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Vn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Pt(e+5,Pt.FNC1);if(t>=5&&t<15)return new Pt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Pt(e+7,""+(n+1));if(n>=90&&n<116)return new Pt(e+7,""+(n+7));let r=this.extractNumericValueFromBitArray(e,8),i;switch(r){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new Z}return new Pt(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Pt(e+5,Pt.FNC1);if(t>=5&&t<15)return new Pt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Pt(e+6,""+(n+33));let r;switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new W("Decoding invalid alphanumeric value: "+n)}return new Pt(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Ni{constructor(e){this.information=e,this.generalDecoder=new Jn(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Lt extends Ni{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i)}Lt.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-48;n+=(r&1)===0?3*i:i}n=10-n%10,n===10&&(n=0),e.append(n)}}Lt.GTIN_SIZE=40;class $n extends Lt{constructor(e){super(e)}parseInformation(){let e=new De;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,$n.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,$n.HEADER_SIZE+44)}}$n.HEADER_SIZE=4;class Yr extends Ni{constructor(e){super(e)}parseInformation(){let e=new De;return this.getGeneralDecoder().decodeAllCodes(e,Yr.HEADER_SIZE)}}Yr.HEADER_SIZE=5;class zr extends Lt{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),o=1e5;for(let l=0;l<5;++l)i/o===0&&e.append("0"),o/=10;e.append(i)}}class cn extends zr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=cn.HEADER_SIZE+zr.GTIN_SIZE+cn.WEIGHT_SIZE)throw new F;let e=new De;return this.encodeCompressedGtin(e,cn.HEADER_SIZE),this.encodeCompressedWeight(e,cn.HEADER_SIZE+zr.GTIN_SIZE,cn.WEIGHT_SIZE),e.toString()}}cn.HEADER_SIZE=5,cn.WEIGHT_SIZE=15;class ja extends cn{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Ka extends cn{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class fn extends Lt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<fn.HEADER_SIZE+Lt.GTIN_SIZE)throw new F;let e=new De;this.encodeCompressedGtin(e,fn.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(fn.HEADER_SIZE+Lt.GTIN_SIZE,fn.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(fn.HEADER_SIZE+Lt.GTIN_SIZE+fn.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}fn.HEADER_SIZE=8,fn.LAST_DIGIT_SIZE=2;class Ot extends Lt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Ot.HEADER_SIZE+Lt.GTIN_SIZE)throw new F;let e=new De;this.encodeCompressedGtin(e,Ot.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Ot.HEADER_SIZE+Lt.GTIN_SIZE,Ot.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Ot.HEADER_SIZE+Lt.GTIN_SIZE+Ot.LAST_DIGIT_SIZE,Ot.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(Ot.HEADER_SIZE+Lt.GTIN_SIZE+Ot.LAST_DIGIT_SIZE+Ot.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}Ot.HEADER_SIZE=8,Ot.LAST_DIGIT_SIZE=2,Ot.FIRST_THREE_DIGITS_SIZE=10;class tt extends zr{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new F;let e=new De;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(n==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let o=n;o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;function Ws(w){try{if(w.get(1))return new $n(w);if(!w.get(2))return new Yr(w);switch(Jn.extractNumericValueFromBitArray(w,1,4)){case 4:return new ja(w);case 5:return new Ka(w)}switch(Jn.extractNumericValueFromBitArray(w,1,5)){case 12:return new fn(w);case 13:return new Ot(w)}switch(Jn.extractNumericValueFromBitArray(w,1,7)){case 56:return new tt(w,"310","11");case 57:return new tt(w,"320","11");case 58:return new tt(w,"310","13");case 59:return new tt(w,"320","13");case 60:return new tt(w,"310","15");case 61:return new tt(w,"320","15");case 62:return new tt(w,"310","17");case 63:return new tt(w,"320","17")}}catch(e){throw console.log(e),new W("unknown decoder: "+w)}}class On{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof On?On.equalsOrNull(e.leftchar,t.leftchar)&&On.equalsOrNull(e.rightchar,t.rightchar)&&On.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:On.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Oi{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof Oi?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,i)=>{t.forEach(o=>{r.getLeftChar().getValue()===o.getLeftChar().getValue()&&r.getRightChar().getValue()===o.getRightChar().getValue()&&r.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}}class V extends bt{constructor(e){super(...arguments),this.pairs=new Array(V.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return V.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,V.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof F){if(!this.pairs.length)throw new F;n=!0}}if(this.checkChecksum())return this.pairs;let r;if(this.rows.length?r=!0:r=!1,this.storeRow(e,!1),r){let i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new F}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let o of e)this.pairs.push(o.getPairs());if(this.pairs.push(r.getPairs()),!V.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(r);try{return this.checkRows(i,n+1)}catch(o){this.verbose&&console.log(o)}}throw new F}static isValidSequence(e){for(let t of V.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let o=this.rows[n];if(o.getRowNumber()>e){i=o.isEquivalent(this.pairs);break}r=o.isEquivalent(this.pairs),n++}i||r||V.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Oi(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let r of n.getPairs())for(let i of e)if(On.equals(r,i))break}}static isPartialRow(e,t){for(let n of t){let r=!0;for(let i of e){let o=!1;for(let l of n.getPairs())if(i.equals(l)){o=!0;break}if(!o){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=Za.buildBitArray(e),r=Ws(t).parseInformation(),i=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),l=[i[0],i[1],o[0],o[1]];return new wt(r,null,null,l,ae.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let r=n.getChecksumPortion(),i=2;for(let l=1;l<this.pairs.size();++l){let f=this.pairs.get(l);r+=f.getLeftChar().getChecksumPortion(),i++;let u=f.getRightChar();u!=null&&(r+=u.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let i,o=!0,l=-1;do this.findNextPair(e,t,l),i=this.parseFoundFinderPattern(e,n,r),i==null?l=V.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);let f=this.decodeDataCharacter(e,i,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new F;let u;try{u=this.decodeDataCharacter(e,i,r,!1)}catch(x){u=null,this.verbose&&console.log(x)}return new On(f,u,i,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o;n>=0?o=n:this.isEmptyPair(t)?o=0:o=t[t.length-1].getFinderPattern().getStartEnd()[1];let l=t.length%2!=0;this.startFromEven&&(l=!l);let f=!1;for(;o<i&&(f=!e.get(o),!!f);)o++;let u=0,x=o;for(let p=o;p<i;p++)if(e.get(p)!=f)r[u]++;else{if(u==3){if(l&&V.reverseCounters(r),V.isFinderPattern(r)){this.startEnd[0]=x,this.startEnd[1]=p;return}l&&V.reverseCounters(r),x+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,u--}else u++;r[u]=1,f=!f}throw new F}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,o;if(n){let u=this.startEnd[0]-1;for(;u>=0&&!e.get(u);)u--;u++,r=this.startEnd[0]-u,i=u,o=this.startEnd[1]}else i=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),r=o-this.startEnd[1];let l=this.getDecodeFinderCounters();ne.arraycopy(l,0,l,1,l.length-1),l[0]=r;let f;try{f=this.parseFinderValue(l,V.FINDER_PATTERNS)}catch{return null}return new Xr(f,[i,o],i,o,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let ze=0;ze<i.length;ze++)i[ze]=0;if(r)V.recordPatternInReverse(e,t.getStartEnd()[0],i);else{V.recordPattern(e,t.getStartEnd()[1],i);for(let ze=0,Ct=i.length-1;ze<Ct;ze++,Ct--){let Wt=i[ze];i[ze]=i[Ct],i[Ct]=Wt}}let o=17,l=U.sum(new Int32Array(i))/o,f=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(l-f)/f>.3)throw new F;let u=this.getOddCounts(),x=this.getEvenCounts(),p=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let ze=0;ze<i.length;ze++){let Ct=1*i[ze]/l,Wt=Ct+.5;if(Wt<1){if(Ct<.3)throw new F;Wt=1}else if(Wt>8){if(Ct>8.7)throw new F;Wt=8}let ir=ze/2;(ze&1)==0?(u[ir]=Wt,p[ir]=Ct-Wt):(x[ir]=Wt,E[ir]=Ct-Wt)}this.adjustOddEvenCounts(o);let I=4*t.getValue()+(n?0:2)+(r?0:1)-1,N=0,R=0;for(let ze=u.length-1;ze>=0;ze--){if(V.isNotA1left(t,n,r)){let Ct=V.WEIGHTS[I][2*ze];R+=u[ze]*Ct}N+=u[ze]}let D=0;for(let ze=x.length-1;ze>=0;ze--)if(V.isNotA1left(t,n,r)){let Ct=V.WEIGHTS[I][2*ze+1];D+=x[ze]*Ct}let P=R+D;if((N&1)!=0||N>13||N<4)throw new F;let j=(13-N)/2,q=V.SYMBOL_WIDEST[j],X=9-q,Ne=ln.getRSSvalue(u,q,!0),Ae=ln.getRSSvalue(x,X,!1),kt=V.EVEN_TOTAL_SUBSET[j],tn=V.GSUM[j],Ut=Ne*kt+Ae+tn;return new Qn(Ut,P)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=U.sum(new Int32Array(this.getOddCounts())),n=U.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let o=!1,l=!1;n>13?l=!0:n<4&&(o=!0);let f=t+n-e,u=(t&1)==1,x=(n&1)==0;if(f==1)if(u){if(x)throw new F;i=!0}else{if(!x)throw new F;l=!0}else if(f==-1)if(u){if(x)throw new F;r=!0}else{if(!x)throw new F;o=!0}else if(f==0){if(u){if(!x)throw new F;t<n?(r=!0,l=!0):(i=!0,o=!0)}else if(x)throw new F}else throw new F;if(r){if(i)throw new F;V.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&V.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(l)throw new F;V.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&V.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}V.SYMBOL_WIDEST=[7,5,4,3,1],V.EVEN_TOTAL_SUBSET=[4,20,52,104,204],V.GSUM=[0,348,1388,2948,3988],V.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],V.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],V.FINDER_PAT_A=0,V.FINDER_PAT_B=1,V.FINDER_PAT_C=2,V.FINDER_PAT_D=3,V.FINDER_PAT_E=4,V.FINDER_PAT_F=5,V.FINDER_PATTERN_SEQUENCES=[[V.FINDER_PAT_A,V.FINDER_PAT_A],[V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B],[V.FINDER_PAT_A,V.FINDER_PAT_C,V.FINDER_PAT_B,V.FINDER_PAT_D],[V.FINDER_PAT_A,V.FINDER_PAT_E,V.FINDER_PAT_B,V.FINDER_PAT_D,V.FINDER_PAT_C],[V.FINDER_PAT_A,V.FINDER_PAT_E,V.FINDER_PAT_B,V.FINDER_PAT_D,V.FINDER_PAT_D,V.FINDER_PAT_F],[V.FINDER_PAT_A,V.FINDER_PAT_E,V.FINDER_PAT_B,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_F,V.FINDER_PAT_F],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_D],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_E],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_F,V.FINDER_PAT_F],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_E,V.FINDER_PAT_F,V.FINDER_PAT_F]],V.MAX_PAIRS=11;class qa extends Qn{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class st extends bt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);st.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);st.addOrTally(this.possibleRightPairs,i),t.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1){for(let l of this.possibleRightPairs)if(l.getCount()>1&&st.checkChecksum(o,l))return st.constructResult(o,l)}throw new F}static addOrTally(e,t){if(t==null)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new De;for(let u=13-r.length;u>0;u--)i.append("0");i.append(r);let o=0;for(let u=0;u<13;u++){let x=i.charAt(u).charCodeAt(0)-48;o+=(u&1)===0?3*x:x}o=10-o%10,o===10&&(o=0),i.append(o.toString());let l=e.getFinderPattern().getResultPoints(),f=t.getFinderPattern().getResultPoints();return new wt(i.toString(),null,0,[l[0],l[1],f[0],f[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,n,t,i),l=r==null?null:r.get(Te.NEED_RESULT_POINT_CALLBACK);if(l!=null){let x=(i[0]+i[1])/2;t&&(x=e.getSize()-1-x),l.foundPossibleResultPoint(new v(x,n))}let f=this.decodeDataCharacter(e,o,!0),u=this.decodeDataCharacter(e,o,!1);return new qa(1597*f.getValue()+u.getValue(),f.getChecksumPortion()+4*u.getChecksumPortion(),o)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let D=0;D<r.length;D++)r[D]=0;if(n)je.recordPatternInReverse(e,t.getStartEnd()[0],r);else{je.recordPattern(e,t.getStartEnd()[1]+1,r);for(let D=0,P=r.length-1;D<P;D++,P--){let j=r[D];r[D]=r[P],r[P]=j}}let i=n?16:15,o=U.sum(new Int32Array(r))/i,l=this.getOddCounts(),f=this.getEvenCounts(),u=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors();for(let D=0;D<r.length;D++){let P=r[D]/o,j=Math.floor(P+.5);j<1?j=1:j>8&&(j=8);let q=Math.floor(D/2);(D&1)===0?(l[q]=j,u[q]=P-j):(f[q]=j,x[q]=P-j)}this.adjustOddEvenCounts(n,i);let p=0,E=0;for(let D=l.length-1;D>=0;D--)E*=9,E+=l[D],p+=l[D];let I=0,N=0;for(let D=f.length-1;D>=0;D--)I*=9,I+=f[D],N+=f[D];let R=E+3*I;if(n){if((p&1)!==0||p>12||p<4)throw new F;let D=(12-p)/2,P=st.OUTSIDE_ODD_WIDEST[D],j=9-P,q=ln.getRSSvalue(l,P,!1),X=ln.getRSSvalue(f,j,!0),Ne=st.OUTSIDE_EVEN_TOTAL_SUBSET[D],Ae=st.OUTSIDE_GSUM[D];return new Qn(q*Ne+X+Ae,R)}else{if((N&1)!==0||N>10||N<4)throw new F;let D=(10-N)/2,P=st.INSIDE_ODD_WIDEST[D],j=9-P,q=ln.getRSSvalue(l,P,!0),X=ln.getRSSvalue(f,j,!1),Ne=st.INSIDE_ODD_TOTAL_SUBSET[D],Ae=st.INSIDE_GSUM[D];return new Qn(X*Ne+q+Ae,R)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,o=0;for(;o<r&&(i=!e.get(o),t!==i);)o++;let l=0,f=o;for(let u=o;u<r;u++)if(e.get(u)!==i)n[l]++;else{if(l===3){if(bt.isFinderPattern(n))return[f,u];f+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,l--}else l++;n[l]=1,i=!i}throw new F}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),o=r[0]-1;for(;o>=0&&i!==e.get(o);)o--;o++;const l=r[0]-o,f=this.getDecodeFinderCounters(),u=new Int32Array(f.length);ne.arraycopy(f,0,u,1,f.length-1),u[0]=l;const x=this.parseFinderValue(u,st.FINDER_PATTERNS);let p=o,E=r[1];return n&&(p=e.getSize()-1-p,E=e.getSize()-1-E),new Xr(x,[o,r[1]],p,E,t)}adjustOddEvenCounts(e,t){let n=U.sum(new Int32Array(this.getOddCounts())),r=U.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,l=!1,f=!1;e?(n>12?o=!0:n<4&&(i=!0),r>12?f=!0:r<4&&(l=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?f=!0:r<4&&(l=!0));let u=n+r-t,x=(n&1)===(e?1:0),p=(r&1)===1;if(u===1)if(x){if(p)throw new F;o=!0}else{if(!p)throw new F;f=!0}else if(u===-1)if(x){if(p)throw new F;i=!0}else{if(!p)throw new F;l=!0}else if(u===0){if(x){if(!p)throw new F;n<r?(i=!0,f=!0):(o=!0,l=!0)}else if(p)throw new F}else throw new F;if(i){if(o)throw new F;bt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&bt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(f)throw new F;bt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&bt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],st.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],st.OUTSIDE_GSUM=[0,161,961,2015,2715],st.INSIDE_GSUM=[0,336,1036,1516],st.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],st.INSIDE_ODD_WIDEST=[2,4,6,8],st.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class er extends je{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const n=e?e.get(Te.POSSIBLE_FORMATS):null,r=e&&e.get(Te.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(ae.EAN_13)||n.includes(ae.UPC_A)||n.includes(ae.EAN_8)||n.includes(ae.UPC_E))&&this.readers.push(new Ti(e)),n.includes(ae.CODE_39)&&this.readers.push(new Me(r)),n.includes(ae.CODE_128)&&this.readers.push(new J),n.includes(ae.ITF)&&this.readers.push(new _e),n.includes(ae.RSS_14)&&this.readers.push(new st),n.includes(ae.RSS_EXPANDED)&&this.readers.push(new V(this.verbose))):(this.readers.push(new Ti(e)),this.readers.push(new Me),this.readers.push(new Ti(e)),this.readers.push(new J),this.readers.push(new _e),this.readers.push(new st),this.readers.push(new V(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new F}reset(){this.readers.forEach(e=>e.reset())}}class Qa extends an{constructor(e=500,t){super(new er(t),e,t)}}class Fe{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Le{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Oe{constructor(e,t,n,r,i,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;let l=0;const f=o.getECCodewords(),u=o.getECBlocks();for(let x of u)l+=x.getCount()*(x.getDataCodewords()+f);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if((e&1)!==0||(t&1)!==0)throw new Z;for(let n of Oe.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new Z}toString(){return""+this.versionNumber}static buildVersions(){return[new Oe(1,10,10,8,8,new Fe(5,new Le(1,3))),new Oe(2,12,12,10,10,new Fe(7,new Le(1,5))),new Oe(3,14,14,12,12,new Fe(10,new Le(1,8))),new Oe(4,16,16,14,14,new Fe(12,new Le(1,12))),new Oe(5,18,18,16,16,new Fe(14,new Le(1,18))),new Oe(6,20,20,18,18,new Fe(18,new Le(1,22))),new Oe(7,22,22,20,20,new Fe(20,new Le(1,30))),new Oe(8,24,24,22,22,new Fe(24,new Le(1,36))),new Oe(9,26,26,24,24,new Fe(28,new Le(1,44))),new Oe(10,32,32,14,14,new Fe(36,new Le(1,62))),new Oe(11,36,36,16,16,new Fe(42,new Le(1,86))),new Oe(12,40,40,18,18,new Fe(48,new Le(1,114))),new Oe(13,44,44,20,20,new Fe(56,new Le(1,144))),new Oe(14,48,48,22,22,new Fe(68,new Le(1,174))),new Oe(15,52,52,24,24,new Fe(42,new Le(2,102))),new Oe(16,64,64,14,14,new Fe(56,new Le(2,140))),new Oe(17,72,72,16,16,new Fe(36,new Le(4,92))),new Oe(18,80,80,18,18,new Fe(48,new Le(4,114))),new Oe(19,88,88,20,20,new Fe(56,new Le(4,144))),new Oe(20,96,96,22,22,new Fe(68,new Le(4,174))),new Oe(21,104,104,24,24,new Fe(56,new Le(6,136))),new Oe(22,120,120,18,18,new Fe(68,new Le(6,175))),new Oe(23,132,132,20,20,new Fe(62,new Le(8,163))),new Oe(24,144,144,22,22,new Fe(62,new Le(8,156),new Le(2,155))),new Oe(25,8,18,6,16,new Fe(7,new Le(1,5))),new Oe(26,8,32,6,14,new Fe(11,new Le(1,10))),new Oe(27,12,26,10,24,new Fe(14,new Le(1,16))),new Oe(28,12,36,10,16,new Fe(18,new Le(1,22))),new Oe(29,16,36,14,16,new Fe(24,new Le(1,32))),new Oe(30,16,48,14,22,new Fe(28,new Le(1,49)))]}}Oe.VERSIONS=Oe.buildVersions();class Ri{constructor(e){const t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new Z;this.version=Ri.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new rt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return Oe.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let l=!1,f=!1,u=!1,x=!1;do if(n===i&&r===0&&!l)e[t++]=this.readCorner1(i,o)&255,n-=2,r+=2,l=!0;else if(n===i-2&&r===0&&(o&3)!==0&&!f)e[t++]=this.readCorner2(i,o)&255,n-=2,r+=2,f=!0;else if(n===i+4&&r===2&&(o&7)===0&&!u)e[t++]=this.readCorner3(i,o)&255,n-=2,r+=2,u=!0;else if(n===i-2&&r===0&&(o&7)===4&&!x)e[t++]=this.readCorner4(i,o)&255,n-=2,r+=2,x=!0;else{do n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,o)&255),n-=2,r+=2;while(n>=0&&r<o);n+=1,r+=3;do n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,o)&255),n+=2,r-=2;while(n<i&&r>=0);n+=3,r+=1}while(n<i||r<o);if(t!==this.version.getTotalCodewords())throw new Z;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new O("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/r|0,l=n/i|0,f=o*r,u=l*i,x=new rt(u,f);for(let p=0;p<o;++p){const E=p*r;for(let I=0;I<l;++I){const N=I*i;for(let R=0;R<r;++R){const D=p*(r+2)+1+R,P=E+R;for(let j=0;j<i;++j){const q=I*(i+2)+1+j;if(e.get(q,D)){const X=N+j;x.set(X,P)}}}}}return x}}class Di{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let R of i)r+=R.getCount();const o=new Array(r);let l=0;for(let R of i)for(let D=0;D<R.getCount();D++){const P=R.getDataCodewords(),j=n.getECCodewords()+P;o[l++]=new Di(P,new Uint8Array(j))}const u=o[0].codewords.length-n.getECCodewords(),x=u-1;let p=0;for(let R=0;R<x;R++)for(let D=0;D<l;D++)o[D].codewords[R]=e[p++];const E=t.getVersionNumber()===24,I=E?8:l;for(let R=0;R<I;R++)o[R].codewords[u-1]=e[p++];const N=o[0].codewords.length;for(let R=u;R<N;R++)for(let D=0;D<l;D++){const P=E?(D+8)%l:D,j=E&&P>7?R-1:R;o[P].codewords[j]=e[p++]}if(p!==e.length)throw new O;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Mi{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new O(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const o=8-n,l=e<o?e:o,f=o-l,u=255>>8-l<<f;t=(i[r]&u)>>f,e-=l,n+=l,n===8&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|i[r]&255,r++,e-=8;if(e>0){const o=8-e,l=255>>o<<o;t=t<<e|(i[r]&l)>>o,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ut;(function(w){w[w.PAD_ENCODE=0]="PAD_ENCODE",w[w.ASCII_ENCODE=1]="ASCII_ENCODE",w[w.C40_ENCODE=2]="C40_ENCODE",w[w.TEXT_ENCODE=3]="TEXT_ENCODE",w[w.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",w[w.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",w[w.BASE256_ENCODE=6]="BASE256_ENCODE"})(ut||(ut={}));class Rn{static decode(e){const t=new Mi(e),n=new De,r=new De,i=new Array;let o=ut.ASCII_ENCODE;do if(o===ut.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,r);else{switch(o){case ut.C40_ENCODE:this.decodeC40Segment(t,n);break;case ut.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case ut.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case ut.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case ut.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new Z}o=ut.ASCII_ENCODE}while(o!==ut.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Nn(e,n.toString(),i.length===0?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(i===0)throw new Z;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),ut.ASCII_ENCODE;if(i===129)return ut.PAD_ENCODE;if(i<=229){const o=i-130;o<10&&t.append("0"),t.append(""+o)}else switch(i){case 230:return ut.C40_ENCODE;case 231:return ut.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return ut.ANSIX12_ENCODE;case 239:return ut.TEXT_ENCODE;case 240:return ut.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new Z;break}}while(e.available()>0);return ut.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),r);for(let l=0;l<3;l++){const f=r[l];switch(i){case 0:if(f<3)i=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){const u=this.C40_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new Z;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),i=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){const u=this.C40_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(f){case 27:t.append("");break;case 30:n=!0;break;default:throw new Z}i=0;break;case 3:n?(t.append(String.fromCharCode(f+224)),n=!1):t.append(String.fromCharCode(f+96)),i=0;break;default:throw new Z}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),r);for(let l=0;l<3;l++){const f=r[l];switch(i){case 0:if(f<3)i=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){const u=this.TEXT_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new Z;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),i=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){const u=this.TEXT_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(f){case 27:t.append("");break;case 30:n=!0;break;default:throw new Z}i=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){const u=this.TEXT_SHIFT3_SET_CHARS[f];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u),i=0}else throw new Z;break;default:throw new Z}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(e.available()===8)return;const r=e.readBits(8);if(r===254)return;this.parseTwoBytes(r,e.readBits(8),n);for(let i=0;i<3;i++){const o=n[i];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new Z;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=i*1600,i=Math.floor(r/40),n[1]=i,n[2]=r-i*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(r===31){const i=8-e.getBitOffset();i!==8&&e.readBits(i);return}(r&32)===0&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),r++),o<0)throw new Z;const l=new Uint8Array(o);for(let f=0;f<o;f++){if(e.available()<8)throw new Z;l[f]=this.unrandomize255State(e.readBits(8),r++)}n.push(l);try{t.append(ct.decode(l,ue.ISO88591))}catch(f){throw new W("Platform does not support required encoding: "+f.message)}}static unrandomize255State(e,t){const n=149*t%255+1,r=e-n;return r>=0?r:r+256}}Rn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Rn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Rn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Rn.TEXT_SHIFT2_SET_CHARS=Rn.C40_SHIFT2_SET_CHARS,Rn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ja{constructor(){this.rsDecoder=new H(S.DATA_MATRIX_FIELD_256)}decode(e){const t=new Ri(e),n=t.getVersion(),r=t.readCodewords(),i=Di.getDataBlocks(r,n);let o=0;for(let u of i)o+=u.getNumDataCodewords();const l=new Uint8Array(o),f=i.length;for(let u=0;u<f;u++){const x=i[u],p=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(p,E);for(let I=0;I<E;I++)l[I*f+u]=p[I]}return Rn.decode(l)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Y}for(let r=0;r<t;r++)e[r]=n[r]}}class lt{constructor(e){this.image=e,this.rectangleDetector=new oe(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new F;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],o=t[3];let l=this.transitionsBetween(n,o)+1,f=this.transitionsBetween(i,o)+1;(l&1)===1&&(l+=1),(f&1)===1&&(f+=1),4*l<7*f&&4*f<7*l&&(l=f=Math.max(l,f));let u=lt.sampleGrid(this.image,n,r,i,o,l,f);return new le(u,[n,r,i,o])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new v(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new v(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],o=this.transitionsBetween(t,n),l=this.transitionsBetween(n,r),f=this.transitionsBetween(r,i),u=this.transitionsBetween(i,t),x=o,p=[i,t,n,r];return x>l&&(x=l,p[0]=t,p[1]=n,p[2]=r,p[3]=i),x>f&&(x=f,p[0]=n,p[1]=r,p[2]=i,p[3]=t),x>u&&(p[0]=r,p[1]=i,p[2]=t,p[3]=n),p}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),l=lt.shiftPoint(n,r,(o+1)*4),f=lt.shiftPoint(r,n,(o+1)*4),u=this.transitionsBetween(l,t),x=this.transitionsBetween(f,i);return u<x?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),l=this.transitionsBetween(n,i),f=lt.shiftPoint(t,n,(l+1)*4),u=lt.shiftPoint(r,n,(o+1)*4);o=this.transitionsBetween(f,i),l=this.transitionsBetween(u,i);let x=new v(i.getX()+(r.getX()-n.getX())/(o+1),i.getY()+(r.getY()-n.getY())/(o+1)),p=new v(i.getX()+(t.getX()-n.getX())/(l+1),i.getY()+(t.getY()-n.getY())/(l+1));if(!this.isValid(x))return this.isValid(p)?p:null;if(!this.isValid(p))return x;let E=this.transitionsBetween(f,x)+this.transitionsBetween(u,x),I=this.transitionsBetween(f,p)+this.transitionsBetween(u,p);return E>I?x:p}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,l=this.transitionsBetween(r,i)+1,f=lt.shiftPoint(t,n,l*4),u=lt.shiftPoint(r,n,o*4);o=this.transitionsBetween(f,i)+1,l=this.transitionsBetween(u,i)+1,(o&1)===1&&(o+=1),(l&1)===1&&(l+=1);let x=(t.getX()+n.getX()+r.getX()+i.getX())/4,p=(t.getY()+n.getY()+r.getY()+i.getY())/4;t=lt.moveAway(t,x,p),n=lt.moveAway(n,x,p),r=lt.moveAway(r,x,p),i=lt.moveAway(i,x,p);let E,I;return f=lt.shiftPoint(t,n,l*4),f=lt.shiftPoint(f,i,o*4),E=lt.shiftPoint(n,t,l*4),E=lt.shiftPoint(E,r,o*4),u=lt.shiftPoint(r,i,l*4),u=lt.shiftPoint(u,n,o*4),I=lt.shiftPoint(i,r,l*4),I=lt.shiftPoint(I,t,o*4),[f,E,u,I]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,o,l){return ye.getInstance().sampleGrid(e,o,l,.5,.5,o-.5,.5,o-.5,l-.5,.5,l-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),l=Math.abs(o-r)>Math.abs(i-n);if(l){let R=n;n=r,r=R,R=i,i=o,o=R}let f=Math.abs(i-n),u=Math.abs(o-r),x=-f/2,p=r<o?1:-1,E=n<i?1:-1,I=0,N=this.image.get(l?r:n,l?n:r);for(let R=n,D=r;R!==i;R+=E){let P=this.image.get(l?D:R,l?R:D);if(P!==N&&(I++,N=P),x+=u,x>0){if(D===o)break;D+=p,x-=f}}return I}}class Dn{constructor(){this.decoder=new Ja}decode(e,t=null){let n,r;if(t!=null&&t.has(Te.PURE_BARCODE)){const u=Dn.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(u),r=Dn.NO_POINTS}else{const u=new lt(e.getBlackMatrix()).detect();n=this.decoder.decode(u.getBits()),r=u.getPoints()}const i=n.getRawBytes(),o=new wt(n.getText(),i,8*i.length,r,ae.DATA_MATRIX,ne.currentTimeMillis()),l=n.getByteSegments();l!=null&&o.putMetadata(it.BYTE_SEGMENTS,l);const f=n.getECLevel();return f!=null&&o.putMetadata(it.ERROR_CORRECTION_LEVEL,f),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new F;const r=this.moduleSize(t,e);let i=t[1];const o=n[1];let l=t[0];const u=(n[0]-l+1)/r,x=(o-i+1)/r;if(u<=0||x<=0)throw new F;const p=r/2;i+=p,l+=p;const E=new rt(u,x);for(let I=0;I<x;I++){const N=i+I*r;for(let R=0;R<u;R++)e.get(l+R*r,N)&&E.set(R,I)}return E}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new F;const o=r-e[0];if(o===0)throw new F;return o}}Dn.NO_POINTS=[];class $a extends an{constructor(e=500){super(new Dn,e)}}var tr;(function(w){w[w.L=0]="L",w[w.M=1]="M",w[w.Q=2]="Q",w[w.H=3]="H"})(tr||(tr={}));class Ke{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,Ke.FOR_BITS.set(n,this),Ke.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ke.L;case"M":return Ke.M;case"Q":return Ke.Q;case"H":return Ke.H;default:throw new _(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ke))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Ke.FOR_BITS.size)throw new O;return Ke.FOR_BITS.get(e)}}Ke.FOR_BITS=new Map,Ke.FOR_VALUE=new Map,Ke.L=new Ke(tr.L,"L",1),Ke.M=new Ke(tr.M,"M",0),Ke.Q=new Ke(tr.Q,"Q",3),Ke.H=new Ke(tr.H,"H",2);class It{constructor(e){this.errorCorrectionLevel=Ke.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return te.bitCount(e^t)}static decodeFormatInformation(e,t){const n=It.doDecodeFormatInformation(e,t);return n!==null?n:It.doDecodeFormatInformation(e^It.FORMAT_INFO_MASK_QR,t^It.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of It.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===e||o===t)return new It(i[1]);let l=It.numBitsDiffering(e,o);l<n&&(r=i[1],n=l),e!==t&&(l=It.numBitsDiffering(t,o),l<n&&(r=i[1],n=l))}return n<=3?new It(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof It))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}It.FORMAT_INFO_MASK_QR=21522,It.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class M{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class b{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ce{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0;const i=n[0].getECCodewordsPerBlock(),o=n[0].getECBlocks();for(const l of o)r+=l.getCount()*(l.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new Z;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Z}}static getVersionForNumber(e){if(e<1||e>40)throw new O;return ce.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<ce.VERSION_DECODE_INFO.length;r++){const i=ce.VERSION_DECODE_INFO[r];if(i===e)return ce.getVersionForNumber(r+7);const o=It.numBitsDiffering(e,i);o<t&&(n=r+7,t=o)}return t<=3?ce.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new rt(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const i=this.alignmentPatternCenters[r]-2;for(let o=0;o<n;o++)r===0&&(o===0||o===n-1)||r===n-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,i,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}ce.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ce.VERSIONS=[new ce(1,new Int32Array(0),new M(7,new b(1,19)),new M(10,new b(1,16)),new M(13,new b(1,13)),new M(17,new b(1,9))),new ce(2,Int32Array.from([6,18]),new M(10,new b(1,34)),new M(16,new b(1,28)),new M(22,new b(1,22)),new M(28,new b(1,16))),new ce(3,Int32Array.from([6,22]),new M(15,new b(1,55)),new M(26,new b(1,44)),new M(18,new b(2,17)),new M(22,new b(2,13))),new ce(4,Int32Array.from([6,26]),new M(20,new b(1,80)),new M(18,new b(2,32)),new M(26,new b(2,24)),new M(16,new b(4,9))),new ce(5,Int32Array.from([6,30]),new M(26,new b(1,108)),new M(24,new b(2,43)),new M(18,new b(2,15),new b(2,16)),new M(22,new b(2,11),new b(2,12))),new ce(6,Int32Array.from([6,34]),new M(18,new b(2,68)),new M(16,new b(4,27)),new M(24,new b(4,19)),new M(28,new b(4,15))),new ce(7,Int32Array.from([6,22,38]),new M(20,new b(2,78)),new M(18,new b(4,31)),new M(18,new b(2,14),new b(4,15)),new M(26,new b(4,13),new b(1,14))),new ce(8,Int32Array.from([6,24,42]),new M(24,new b(2,97)),new M(22,new b(2,38),new b(2,39)),new M(22,new b(4,18),new b(2,19)),new M(26,new b(4,14),new b(2,15))),new ce(9,Int32Array.from([6,26,46]),new M(30,new b(2,116)),new M(22,new b(3,36),new b(2,37)),new M(20,new b(4,16),new b(4,17)),new M(24,new b(4,12),new b(4,13))),new ce(10,Int32Array.from([6,28,50]),new M(18,new b(2,68),new b(2,69)),new M(26,new b(4,43),new b(1,44)),new M(24,new b(6,19),new b(2,20)),new M(28,new b(6,15),new b(2,16))),new ce(11,Int32Array.from([6,30,54]),new M(20,new b(4,81)),new M(30,new b(1,50),new b(4,51)),new M(28,new b(4,22),new b(4,23)),new M(24,new b(3,12),new b(8,13))),new ce(12,Int32Array.from([6,32,58]),new M(24,new b(2,92),new b(2,93)),new M(22,new b(6,36),new b(2,37)),new M(26,new b(4,20),new b(6,21)),new M(28,new b(7,14),new b(4,15))),new ce(13,Int32Array.from([6,34,62]),new M(26,new b(4,107)),new M(22,new b(8,37),new b(1,38)),new M(24,new b(8,20),new b(4,21)),new M(22,new b(12,11),new b(4,12))),new ce(14,Int32Array.from([6,26,46,66]),new M(30,new b(3,115),new b(1,116)),new M(24,new b(4,40),new b(5,41)),new M(20,new b(11,16),new b(5,17)),new M(24,new b(11,12),new b(5,13))),new ce(15,Int32Array.from([6,26,48,70]),new M(22,new b(5,87),new b(1,88)),new M(24,new b(5,41),new b(5,42)),new M(30,new b(5,24),new b(7,25)),new M(24,new b(11,12),new b(7,13))),new ce(16,Int32Array.from([6,26,50,74]),new M(24,new b(5,98),new b(1,99)),new M(28,new b(7,45),new b(3,46)),new M(24,new b(15,19),new b(2,20)),new M(30,new b(3,15),new b(13,16))),new ce(17,Int32Array.from([6,30,54,78]),new M(28,new b(1,107),new b(5,108)),new M(28,new b(10,46),new b(1,47)),new M(28,new b(1,22),new b(15,23)),new M(28,new b(2,14),new b(17,15))),new ce(18,Int32Array.from([6,30,56,82]),new M(30,new b(5,120),new b(1,121)),new M(26,new b(9,43),new b(4,44)),new M(28,new b(17,22),new b(1,23)),new M(28,new b(2,14),new b(19,15))),new ce(19,Int32Array.from([6,30,58,86]),new M(28,new b(3,113),new b(4,114)),new M(26,new b(3,44),new b(11,45)),new M(26,new b(17,21),new b(4,22)),new M(26,new b(9,13),new b(16,14))),new ce(20,Int32Array.from([6,34,62,90]),new M(28,new b(3,107),new b(5,108)),new M(26,new b(3,41),new b(13,42)),new M(30,new b(15,24),new b(5,25)),new M(28,new b(15,15),new b(10,16))),new ce(21,Int32Array.from([6,28,50,72,94]),new M(28,new b(4,116),new b(4,117)),new M(26,new b(17,42)),new M(28,new b(17,22),new b(6,23)),new M(30,new b(19,16),new b(6,17))),new ce(22,Int32Array.from([6,26,50,74,98]),new M(28,new b(2,111),new b(7,112)),new M(28,new b(17,46)),new M(30,new b(7,24),new b(16,25)),new M(24,new b(34,13))),new ce(23,Int32Array.from([6,30,54,78,102]),new M(30,new b(4,121),new b(5,122)),new M(28,new b(4,47),new b(14,48)),new M(30,new b(11,24),new b(14,25)),new M(30,new b(16,15),new b(14,16))),new ce(24,Int32Array.from([6,28,54,80,106]),new M(30,new b(6,117),new b(4,118)),new M(28,new b(6,45),new b(14,46)),new M(30,new b(11,24),new b(16,25)),new M(30,new b(30,16),new b(2,17))),new ce(25,Int32Array.from([6,32,58,84,110]),new M(26,new b(8,106),new b(4,107)),new M(28,new b(8,47),new b(13,48)),new M(30,new b(7,24),new b(22,25)),new M(30,new b(22,15),new b(13,16))),new ce(26,Int32Array.from([6,30,58,86,114]),new M(28,new b(10,114),new b(2,115)),new M(28,new b(19,46),new b(4,47)),new M(28,new b(28,22),new b(6,23)),new M(30,new b(33,16),new b(4,17))),new ce(27,Int32Array.from([6,34,62,90,118]),new M(30,new b(8,122),new b(4,123)),new M(28,new b(22,45),new b(3,46)),new M(30,new b(8,23),new b(26,24)),new M(30,new b(12,15),new b(28,16))),new ce(28,Int32Array.from([6,26,50,74,98,122]),new M(30,new b(3,117),new b(10,118)),new M(28,new b(3,45),new b(23,46)),new M(30,new b(4,24),new b(31,25)),new M(30,new b(11,15),new b(31,16))),new ce(29,Int32Array.from([6,30,54,78,102,126]),new M(30,new b(7,116),new b(7,117)),new M(28,new b(21,45),new b(7,46)),new M(30,new b(1,23),new b(37,24)),new M(30,new b(19,15),new b(26,16))),new ce(30,Int32Array.from([6,26,52,78,104,130]),new M(30,new b(5,115),new b(10,116)),new M(28,new b(19,47),new b(10,48)),new M(30,new b(15,24),new b(25,25)),new M(30,new b(23,15),new b(25,16))),new ce(31,Int32Array.from([6,30,56,82,108,134]),new M(30,new b(13,115),new b(3,116)),new M(28,new b(2,46),new b(29,47)),new M(30,new b(42,24),new b(1,25)),new M(30,new b(23,15),new b(28,16))),new ce(32,Int32Array.from([6,34,60,86,112,138]),new M(30,new b(17,115)),new M(28,new b(10,46),new b(23,47)),new M(30,new b(10,24),new b(35,25)),new M(30,new b(19,15),new b(35,16))),new ce(33,Int32Array.from([6,30,58,86,114,142]),new M(30,new b(17,115),new b(1,116)),new M(28,new b(14,46),new b(21,47)),new M(30,new b(29,24),new b(19,25)),new M(30,new b(11,15),new b(46,16))),new ce(34,Int32Array.from([6,34,62,90,118,146]),new M(30,new b(13,115),new b(6,116)),new M(28,new b(14,46),new b(23,47)),new M(30,new b(44,24),new b(7,25)),new M(30,new b(59,16),new b(1,17))),new ce(35,Int32Array.from([6,30,54,78,102,126,150]),new M(30,new b(12,121),new b(7,122)),new M(28,new b(12,47),new b(26,48)),new M(30,new b(39,24),new b(14,25)),new M(30,new b(22,15),new b(41,16))),new ce(36,Int32Array.from([6,24,50,76,102,128,154]),new M(30,new b(6,121),new b(14,122)),new M(28,new b(6,47),new b(34,48)),new M(30,new b(46,24),new b(10,25)),new M(30,new b(2,15),new b(64,16))),new ce(37,Int32Array.from([6,28,54,80,106,132,158]),new M(30,new b(17,122),new b(4,123)),new M(28,new b(29,46),new b(14,47)),new M(30,new b(49,24),new b(10,25)),new M(30,new b(24,15),new b(46,16))),new ce(38,Int32Array.from([6,32,58,84,110,136,162]),new M(30,new b(4,122),new b(18,123)),new M(28,new b(13,46),new b(32,47)),new M(30,new b(48,24),new b(14,25)),new M(30,new b(42,15),new b(32,16))),new ce(39,Int32Array.from([6,26,54,82,110,138,166]),new M(30,new b(20,117),new b(4,118)),new M(28,new b(40,47),new b(7,48)),new M(30,new b(43,24),new b(22,25)),new M(30,new b(10,15),new b(67,16))),new ce(40,Int32Array.from([6,30,58,86,114,142,170]),new M(30,new b(19,118),new b(6,119)),new M(28,new b(18,47),new b(31,48)),new M(30,new b(34,24),new b(34,25)),new M(30,new b(20,15),new b(61,16)))];var gt;(function(w){w[w.DATA_MASK_000=0]="DATA_MASK_000",w[w.DATA_MASK_001=1]="DATA_MASK_001",w[w.DATA_MASK_010=2]="DATA_MASK_010",w[w.DATA_MASK_011=3]="DATA_MASK_011",w[w.DATA_MASK_100=4]="DATA_MASK_100",w[w.DATA_MASK_101=5]="DATA_MASK_101",w[w.DATA_MASK_110=6]="DATA_MASK_110",w[w.DATA_MASK_111=7]="DATA_MASK_111"})(gt||(gt={}));class jt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}jt.values=new Map([[gt.DATA_MASK_000,new jt(gt.DATA_MASK_000,(w,e)=>(w+e&1)===0)],[gt.DATA_MASK_001,new jt(gt.DATA_MASK_001,(w,e)=>(w&1)===0)],[gt.DATA_MASK_010,new jt(gt.DATA_MASK_010,(w,e)=>e%3===0)],[gt.DATA_MASK_011,new jt(gt.DATA_MASK_011,(w,e)=>(w+e)%3===0)],[gt.DATA_MASK_100,new jt(gt.DATA_MASK_100,(w,e)=>(Math.floor(w/2)+Math.floor(e/3)&1)===0)],[gt.DATA_MASK_101,new jt(gt.DATA_MASK_101,(w,e)=>w*e%6===0)],[gt.DATA_MASK_110,new jt(gt.DATA_MASK_110,(w,e)=>w*e%6<3)],[gt.DATA_MASK_111,new jt(gt.DATA_MASK_111,(w,e)=>(w+e+w*e%3&1)===0)]]);class e1{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new Z;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=It.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ce.getVersionForNumber(t);let n=0;const r=e-11;for(let o=5;o>=0;o--)for(let l=e-9;l>=r;l--)n=this.copyBit(l,o,n);let i=ce.decodeVersionInformation(n);if(i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let o=5;o>=0;o--)for(let l=e-9;l>=r;l--)n=this.copyBit(o,l,n);if(i=ce.decodeVersionInformation(n),i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new Z}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=jt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let o=!0;const l=new Uint8Array(t.getTotalCodewords());let f=0,u=0,x=0;for(let p=r-1;p>0;p-=2){p===6&&p--;for(let E=0;E<r;E++){const I=o?r-1-E:E;for(let N=0;N<2;N++)i.get(p-N,I)||(x++,u<<=1,this.bitMatrix.get(p-N,I)&&(u|=1),x===8&&(l[f++]=u,x=0,u=0))}o=!o}if(f!==t.getTotalCodewords())throw new Z;return l}remask(){if(this.parsedFormatInfo===null)return;const e=jt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class vi{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new O;const r=t.getECBlocksForLevel(n);let i=0;const o=r.getECBlocks();for(const N of o)i+=N.getCount();const l=new Array(i);let f=0;for(const N of o)for(let R=0;R<N.getCount();R++){const D=N.getDataCodewords(),P=r.getECCodewordsPerBlock()+D;l[f++]=new vi(D,new Uint8Array(P))}const u=l[0].codewords.length;let x=l.length-1;for(;x>=0&&l[x].codewords.length!==u;)x--;x++;const p=u-r.getECCodewordsPerBlock();let E=0;for(let N=0;N<p;N++)for(let R=0;R<f;R++)l[R].codewords[N]=e[E++];for(let N=x;N<f;N++)l[N].codewords[p]=e[E++];const I=l[0].codewords.length;for(let N=p;N<I;N++)for(let R=0;R<f;R++){const D=R<x?N:N+1;l[R].codewords[D]=e[E++]}return l}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Kt;(function(w){w[w.TERMINATOR=0]="TERMINATOR",w[w.NUMERIC=1]="NUMERIC",w[w.ALPHANUMERIC=2]="ALPHANUMERIC",w[w.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",w[w.BYTE=4]="BYTE",w[w.ECI=5]="ECI",w[w.KANJI=6]="KANJI",w[w.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",w[w.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",w[w.HANZI=9]="HANZI"})(Kt||(Kt={}));class fe{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,fe.FOR_BITS.set(r,this),fe.FOR_VALUE.set(e,this)}static forBits(e){const t=fe.FOR_BITS.get(e);if(t===void 0)throw new O;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof fe))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}fe.FOR_BITS=new Map,fe.FOR_VALUE=new Map,fe.TERMINATOR=new fe(Kt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),fe.NUMERIC=new fe(Kt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),fe.ALPHANUMERIC=new fe(Kt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),fe.STRUCTURED_APPEND=new fe(Kt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),fe.BYTE=new fe(Kt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),fe.ECI=new fe(Kt.ECI,"ECI",Int32Array.from([0,0,0]),7),fe.KANJI=new fe(Kt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),fe.FNC1_FIRST_POSITION=new fe(Kt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),fe.FNC1_SECOND_POSITION=new fe(Kt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),fe.HANZI=new fe(Kt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class nt{static decode(e,t,n,r){const i=new Mi(e);let o=new De;const l=new Array;let f=-1,u=-1;try{let x=null,p=!1,E;do{if(i.available()<4)E=fe.TERMINATOR;else{const I=i.readBits(4);E=fe.forBits(I)}switch(E){case fe.TERMINATOR:break;case fe.FNC1_FIRST_POSITION:case fe.FNC1_SECOND_POSITION:p=!0;break;case fe.STRUCTURED_APPEND:if(i.available()<16)throw new Z;f=i.readBits(8),u=i.readBits(8);break;case fe.ECI:const I=nt.parseECIValue(i);if(x=K.getCharacterSetECIByValue(I),x===null)throw new Z;break;case fe.HANZI:const N=i.readBits(4),R=i.readBits(E.getCharacterCountBits(t));N===nt.GB2312_SUBSET&&nt.decodeHanziSegment(i,o,R);break;default:const D=i.readBits(E.getCharacterCountBits(t));switch(E){case fe.NUMERIC:nt.decodeNumericSegment(i,o,D);break;case fe.ALPHANUMERIC:nt.decodeAlphanumericSegment(i,o,D,p);break;case fe.BYTE:nt.decodeByteSegment(i,o,D,x,l,r);break;case fe.KANJI:nt.decodeKanjiSegment(i,o,D);break;default:throw new Z}break}}while(E!==fe.TERMINATOR)}catch{throw new Z}return new Nn(e,o.toString(),l.length===0?null:l,n===null?null:n.toString(),f,u)}static decodeHanziSegment(e,t,n){if(n*13>e.available())throw new Z;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const o=e.readBits(13);let l=o/96<<8&4294967295|o%96;l<959?l+=41377:l+=42657,r[i]=l>>8&255,r[i+1]=l&255,i+=2,n--}try{t.append(ct.decode(r,ue.GB2312))}catch(o){throw new Z(o)}}static decodeKanjiSegment(e,t,n){if(n*13>e.available())throw new Z;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const o=e.readBits(13);let l=o/192<<8&4294967295|o%192;l<7936?l+=33088:l+=49472,r[i]=l>>8,r[i+1]=l,i+=2,n--}try{t.append(ct.decode(r,ue.SHIFT_JIS))}catch(o){throw new Z(o)}}static decodeByteSegment(e,t,n,r,i,o){if(8*n>e.available())throw new Z;const l=new Uint8Array(n);for(let u=0;u<n;u++)l[u]=e.readBits(8);let f;r===null?f=ue.guessEncoding(l,o):f=r.getName();try{t.append(ct.decode(l,f))}catch(u){throw new Z(u)}i.push(l)}static toAlphaNumericChar(e){if(e>=nt.ALPHANUMERIC_CHARS.length)throw new Z;return nt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new Z;const o=e.readBits(11);t.append(nt.toAlphaNumericChar(Math.floor(o/45))),t.append(nt.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new Z;t.append(nt.toAlphaNumericChar(e.readBits(6)))}if(r)for(let o=i;o<t.length();o++)t.charAt(o)==="%"&&(o<t.length()-1&&t.charAt(o+1)==="%"?t.deleteCharAt(o+1):t.setCharAt(o,""))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new Z;const r=e.readBits(10);if(r>=1e3)throw new Z;t.append(nt.toAlphaNumericChar(Math.floor(r/100))),t.append(nt.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(nt.toAlphaNumericChar(r%10)),n-=3}if(n===2){if(e.available()<7)throw new Z;const r=e.readBits(7);if(r>=100)throw new Z;t.append(nt.toAlphaNumericChar(Math.floor(r/10))),t.append(nt.toAlphaNumericChar(r%10))}else if(n===1){if(e.available()<4)throw new Z;const r=e.readBits(4);if(r>=10)throw new Z;t.append(nt.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){const n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){const n=e.readBits(16);return(t&31)<<16&4294967295|n}throw new Z}}nt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",nt.GB2312_SUBSET=1;class Gs{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class t1{constructor(){this.rsDecoder=new H(S.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(rt.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new e1(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const i=this.decodeBitMatrixParser(n,t);return i.setOther(new Gs(!0)),i}catch(i){throw r!==null?r:i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=vi.getDataBlocks(i,n,r);let l=0;for(const x of o)l+=x.getNumDataCodewords();const f=new Uint8Array(l);let u=0;for(const x of o){const p=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(p,E);for(let I=0;I<E;I++)f[u++]=p[I]}return nt.decode(f,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Y}for(let r=0;r<t;r++)e[r]=n[r]}}class Bi extends v{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,o=(this.estimatedModuleSize+n)/2;return new Bi(r,i,o)}}class Zr{constructor(e,t,n,r,i,o,l){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=this.width,r=e+n,i=this.startY+t/2,o=new Int32Array(3),l=this.image;for(let f=0;f<t;f++){const u=i+((f&1)===0?Math.floor((f+1)/2):-Math.floor((f+1)/2));o[0]=0,o[1]=0,o[2]=0;let x=e;for(;x<r&&!l.get(x,u);)x++;let p=0;for(;x<r;){if(l.get(x,u))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){const E=this.handlePossibleCenter(o,u,x);if(E!==null)return E}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;x++}if(this.foundPatternCross(o)){const E=this.handlePossibleCenter(o,u,r);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new F}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;let f=e;for(;f>=0&&i.get(t,f)&&l[1]<=n;)l[1]++,f--;if(f<0||l[1]>n)return NaN;for(;f>=0&&!i.get(t,f)&&l[0]<=n;)l[0]++,f--;if(l[0]>n)return NaN;for(f=e+1;f<o&&i.get(t,f)&&l[1]<=n;)l[1]++,f++;if(f===o||l[1]>n)return NaN;for(;f<o&&!i.get(t,f)&&l[2]<=n;)l[2]++,f++;if(l[2]>n)return NaN;const u=l[0]+l[1]+l[2];return 5*Math.abs(u-r)>=2*r?NaN:this.foundPatternCross(l)?Zr.centerFromEnd(l,f):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Zr.centerFromEnd(e,n),o=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(o)){const l=(e[0]+e[1]+e[2])/3;for(const u of this.possibleCenters)if(u.aboutEquals(l,o,i))return u.combineEstimate(o,i,l);const f=new Bi(i,o,l);this.possibleCenters.push(f),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(f)}return null}}class Pi extends v{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,r===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,o=(this.count*this.getY()+e)/r,l=(this.count*this.estimatedModuleSize+n)/r;return new Pi(i,o,l,r)}}class n1{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class xt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(Te.TRY_HARDER)!==void 0,n=e!=null&&e.get(Te.PURE_BARCODE)!==void 0,r=this.image,i=r.getHeight(),o=r.getWidth();let l=Math.floor(3*i/(4*xt.MAX_MODULES));(l<xt.MIN_SKIP||t)&&(l=xt.MIN_SKIP);let f=!1;const u=new Int32Array(5);for(let p=l-1;p<i&&!f;p+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;let E=0;for(let I=0;I<o;I++)if(r.get(I,p))(E&1)===1&&E++,u[E]++;else if((E&1)===0)if(E===4)if(xt.foundPatternCross(u)){if(this.handlePossibleCenter(u,p,I,n)===!0)if(l=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{const R=this.findRowSkip();R>u[2]&&(p+=R-u[2]-l,I=o-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,E=3;continue}E=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,E=3;else u[++E]++;else u[E]++;xt.foundPatternCross(u)&&this.handlePossibleCenter(u,p,o,n)===!0&&(l=u[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}const x=this.selectBestPatterns();return v.orderBestPatterns(x),new n1(x)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const o=e[i];if(o===0)return!1;t+=o}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let o=0;const l=this.image;for(;e>=o&&t>=o&&l.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!l.get(t-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||t<o||i[1]>n)return!1;for(;e>=o&&t>=o&&l.get(t-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;const f=l.getHeight(),u=l.getWidth();for(o=1;e+o<f&&t+o<u&&l.get(t+o,e+o);)i[2]++,o++;if(e+o>=f||t+o>=u)return!1;for(;e+o<f&&t+o<u&&!l.get(t+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=f||t+o>=u||i[3]>=n)return!1;for(;e+o<f&&t+o<u&&l.get(t+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;const x=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(x-r)<2*r&&xt.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),l=this.getCrossCheckStateCount();let f=e;for(;f>=0&&i.get(t,f);)l[2]++,f--;if(f<0)return NaN;for(;f>=0&&!i.get(t,f)&&l[1]<=n;)l[1]++,f--;if(f<0||l[1]>n)return NaN;for(;f>=0&&i.get(t,f)&&l[0]<=n;)l[0]++,f--;if(l[0]>n)return NaN;for(f=e+1;f<o&&i.get(t,f);)l[2]++,f++;if(f===o)return NaN;for(;f<o&&!i.get(t,f)&&l[3]<n;)l[3]++,f++;if(f===o||l[3]>=n)return NaN;for(;f<o&&i.get(t,f)&&l[4]<n;)l[4]++,f++;if(l[4]>=n)return NaN;const u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-r)>=2*r?NaN:xt.foundPatternCross(l)?xt.centerFromEnd(l,f):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,o=i.getWidth(),l=this.getCrossCheckStateCount();let f=e;for(;f>=0&&i.get(f,t);)l[2]++,f--;if(f<0)return NaN;for(;f>=0&&!i.get(f,t)&&l[1]<=n;)l[1]++,f--;if(f<0||l[1]>n)return NaN;for(;f>=0&&i.get(f,t)&&l[0]<=n;)l[0]++,f--;if(l[0]>n)return NaN;for(f=e+1;f<o&&i.get(f,t);)l[2]++,f++;if(f===o)return NaN;for(;f<o&&!i.get(f,t)&&l[3]<n;)l[3]++,f++;if(f===o||l[3]>=n)return NaN;for(;f<o&&i.get(f,t)&&l[4]<n;)l[4]++,f++;if(l[4]>=n)return NaN;const u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-r)>=r?NaN:xt.foundPatternCross(l)?xt.centerFromEnd(l,f):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let o=xt.centerFromEnd(e,n),l=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(l)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(l),e[2],i),!isNaN(o)&&(!r||this.crossCheckDiagonal(Math.floor(l),Math.floor(o),e[2],i)))){const f=i/7;let u=!1;const x=this.possibleCenters;for(let p=0,E=x.length;p<E;p++){const I=x[p];if(I.aboutEquals(f,l,o)){x[p]=I.combineEstimate(l,o,f),u=!0;break}}if(!u){const p=new Pi(o,l,f);x.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const n of this.possibleCenters)if(n.getCount()>=xt.CENTER_QUORUM)if(t==null)t=n;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-n.getX())-Math.abs(t.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=xt.CENTER_QUORUM&&(e++,t+=o.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const o of this.possibleCenters)i+=Math.abs(o.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new F;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const f of this.possibleCenters){const u=f.getEstimatedModuleSize();r+=u,i+=u*u}n=r/e;let o=Math.sqrt(i/e-n*n);t.sort((f,u)=>{const x=Math.abs(u.getEstimatedModuleSize()-n),p=Math.abs(f.getEstimatedModuleSize()-n);return x<p?-1:x>p?1:0});const l=Math.max(.2*n,o);for(let f=0;f<t.length&&t.length>3;f++){const u=t[f];Math.abs(u.getEstimatedModuleSize()-n)>l&&(t.splice(f,1),f--)}}if(t.length>3){let r=0;for(const i of t)r+=i.getEstimatedModuleSize();n=r/t.length,t.sort((i,o)=>{if(o.getCount()===i.getCount()){const l=Math.abs(o.getEstimatedModuleSize()-n),f=Math.abs(i.getEstimatedModuleSize()-n);return l<f?1:l>f?-1:0}else return o.getCount()-i.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}xt.CENTER_QUORUM=2,xt.MIN_SKIP=3,xt.MAX_MODULES=57;class pr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(Te.NEED_RESULT_POINT_CALLBACK);const n=new xt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new F("No pattern found in proccess finder.");const o=pr.computeDimension(t,n,r,i),l=ce.getProvisionalVersionForDimension(o),f=l.getDimensionForVersion()-7;let u=null;if(l.getAlignmentPatternCenters().length>0){const I=n.getX()-t.getX()+r.getX(),N=n.getY()-t.getY()+r.getY(),R=1-3/f,D=Math.floor(t.getX()+R*(I-t.getX())),P=Math.floor(t.getY()+R*(N-t.getY()));for(let j=4;j<=16;j<<=1)try{u=this.findAlignmentInRegion(i,D,P,j);break}catch(q){if(!(q instanceof F))throw q}}const x=pr.createTransform(t,n,r,u,o),p=pr.sampleGrid(this.image,x,o);let E;return u===null?E=[r,t,n]:E=[r,t,n,u],new le(p,E)}static createTransform(e,t,n,r,i){const o=i-3.5;let l,f,u,x;return r!==null?(l=r.getX(),f=r.getY(),u=o-3,x=u):(l=t.getX()-e.getX()+n.getX(),f=t.getY()-e.getY()+n.getY(),u=o,x=o),pe.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,u,x,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),l,f,n.getX(),n.getY())}static sampleGrid(e,t,n){return ye.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=U.round(v.distance(e,t)/r),o=U.round(v.distance(e,n)/r);let l=Math.floor((i+o)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new F("Dimensions could be not found.")}return l}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),o=1,l=e-(n-e);l<0?(o=e/(e-l),l=0):l>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);let f=Math.floor(t-(r-t)*o);return o=1,f<0?(o=t/(t-f),f=0):f>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(f-t),f=this.image.getHeight()-1),l=Math.floor(e+(l-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,l,f),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let I=e;e=t,t=I,I=n,n=r,r=I}const o=Math.abs(n-e),l=Math.abs(r-t);let f=-o/2;const u=e<n?1:-1,x=t<r?1:-1;let p=0;const E=n+u;for(let I=e,N=t;I!==E;I+=u){const R=i?N:I,D=i?I:N;if(p===1===this.image.get(R,D)){if(p===2)return U.distance(I,N,e,t);p++}if(f+=l,f>0){if(N===r)break;N+=x,f-=o}}return p===2?U.distance(n+u,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),o=Math.max(0,t-i),l=Math.min(this.image.getWidth()-1,t+i);if(l-o<e*3)throw new F("Alignment top exceeds estimated module size.");const f=Math.max(0,n-i),u=Math.min(this.image.getHeight()-1,n+i);if(u-f<e*3)throw new F("Alignment bottom exceeds estimated module size.");return new Zr(this.image,o,f,l-o,u-f,e,this.resultPointCallback).find()}}class Mn{constructor(){this.decoder=new t1}getDecoder(){return this.decoder}decode(e,t){let n,r;if(t!=null&&t.get(Te.PURE_BARCODE)!==void 0){const f=Mn.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(f,t),r=Mn.NO_POINTS}else{const f=new pr(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(f.getBits(),t),r=f.getPoints()}n.getOther()instanceof Gs&&n.getOther().applyMirroredCorrection(r);const i=new wt(n.getText(),n.getRawBytes(),void 0,r,ae.QR_CODE,void 0),o=n.getByteSegments();o!==null&&i.putMetadata(it.BYTE_SEGMENTS,o);const l=n.getECLevel();return l!==null&&i.putMetadata(it.ERROR_CORRECTION_LEVEL,l),n.hasStructuredAppend()&&(i.putMetadata(it.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(it.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new F;const r=this.moduleSize(t,e);let i=t[1],o=n[1],l=t[0],f=n[0];if(l>=f||i>=o)throw new F;if(o-i!==f-l&&(f=l+(o-i),f>=e.getWidth()))throw new F;const u=Math.round((f-l+1)/r),x=Math.round((o-i+1)/r);if(u<=0||x<=0)throw new F;if(x!==u)throw new F;const p=Math.floor(r/2);i+=p,l+=p;const E=l+Math.floor((u-1)*r)-f;if(E>0){if(E>p)throw new F;l-=E}const I=i+Math.floor((x-1)*r)-o;if(I>0){if(I>p)throw new F;i-=I}const N=new rt(u,x);for(let R=0;R<x;R++){const D=i+Math.floor(R*r);for(let P=0;P<u;P++)e.get(l+Math.floor(P*r),D)&&N.set(P,R)}return N}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],o=e[1],l=!0,f=0;for(;i<r&&o<n;){if(l!==t.get(i,o)){if(++f===5)break;l=!l}i++,o++}if(i===r||o===n)throw new F;return(i-e[0])/7}}Mn.NO_POINTS=new Array;class xe{PDF417Common(){}static getBitCountSum(e){return U.sum(e)}static toIntArray(e){if(e==null||!e.length)return xe.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=de.binarySearch(xe.SYMBOL_TABLE,e&262143);return t<0?-1:(xe.CODEWORD_TABLE[t]-1)%xe.NUMBER_OF_CODEWORDS}}xe.NUMBER_OF_CODEWORDS=929,xe.MAX_CODEWORDS_IN_BARCODE=xe.NUMBER_OF_CODEWORDS-1,xe.MIN_ROWS_IN_BARCODE=3,xe.MAX_ROWS_IN_BARCODE=90,xe.MODULES_IN_CODEWORD=17,xe.MODULES_IN_STOP_PATTERN=18,xe.BARS_IN_MODULE=8,xe.EMPTY_INT_ARRAY=new Int32Array([]),xe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class r1{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ce{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=Ce.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=Ce.detect(n,r)),new r1(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,o=!1;for(;r<t.getHeight();){const l=Ce.findVertices(t,r,i);if(l[0]==null&&l[3]==null){if(!o)break;o=!1,i=0;for(const f of n)f[1]!=null&&(r=Math.trunc(Math.max(r,f[1].getY()))),f[3]!=null&&(r=Math.max(r,Math.trunc(f[3].getY())));r+=Ce.ROW_STEP;continue}if(o=!0,n.push(l),!e)break;l[2]!=null?(i=Math.trunc(l[2].getX()),r=Math.trunc(l[2].getY())):(i=Math.trunc(l[4].getX()),r=Math.trunc(l[4].getY()))}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),o=new Array(8);return Ce.copyToResult(o,Ce.findRowsWithPattern(e,r,i,t,n,Ce.START_PATTERN),Ce.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),Ce.copyToResult(o,Ce.findRowsWithPattern(e,r,i,t,n,Ce.STOP_PATTERN),Ce.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,o){const l=new Array(4);let f=!1;const u=new Int32Array(o.length);for(;r<t;r+=Ce.ROW_STEP){let p=Ce.findGuardPattern(e,i,r,n,!1,o,u);if(p!=null){for(;r>0;){const E=Ce.findGuardPattern(e,i,--r,n,!1,o,u);if(E!=null)p=E;else{r++;break}}l[0]=new v(p[0],r),l[1]=new v(p[1],r),f=!0;break}}let x=r+1;if(f){let p=0,E=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);for(;x<t;x++){const I=Ce.findGuardPattern(e,E[0],x,n,!1,o,u);if(I!=null&&Math.abs(E[0]-I[0])<Ce.MAX_PATTERN_DRIFT&&Math.abs(E[1]-I[1])<Ce.MAX_PATTERN_DRIFT)E=I,p=0;else{if(p>Ce.SKIPPED_ROW_COUNT_MAX)break;p++}}x-=p+1,l[2]=new v(E[0],x),l[3]=new v(E[1],x)}return x-r<Ce.BARCODE_MIN_HEIGHT&&de.fill(l,null),l}static findGuardPattern(e,t,n,r,i,o,l){de.fillWithin(l,0,l.length,0);let f=t,u=0;for(;e.get(f,n)&&f>0&&u++<Ce.MAX_PIXEL_DRIFT;)f--;let x=f,p=0,E=o.length;for(let I=i;x<r;x++)if(e.get(x,n)!==I)l[p]++;else{if(p===E-1){if(Ce.patternMatchVariance(l,o,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE)return new Int32Array([f,x]);f+=l[0]+l[1],ne.arraycopy(l,2,l,0,p-1),l[p-1]=0,l[p]=0,p--}else p++;l[p]=1,I=!I}return p===E-1&&Ce.patternMatchVariance(l,o,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE?new Int32Array([f,x-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,o=0;for(let u=0;u<r;u++)i+=e[u],o+=t[u];if(i<o)return 1/0;let l=i/o;n*=l;let f=0;for(let u=0;u<r;u++){let x=e[u],p=t[u]*l,E=x>p?x-p:p-x;if(E>n)return 1/0;f+=E}return f/i}}Ce.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ce.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ce.MAX_AVG_VARIANCE=.42,Ce.MAX_INDIVIDUAL_VARIANCE=.8,Ce.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ce.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ce.MAX_PIXEL_DRIFT=3,Ce.MAX_PATTERN_DRIFT=5,Ce.SKIPPED_ROW_COUNT_MAX=25,Ce.ROW_STEP=5,Ce.BARCODE_MIN_HEIGHT=10;class At{constructor(e,t){if(t.length===0)throw new O;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),ne.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let r=0;for(let i of this.coefficients)r=this.field.add(r,i);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let o=t;t=n,n=o}let r=new Int32Array(n.length),i=n.length-t.length;ne.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=this.field.add(t[o-i],n[o]);return new At(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new O("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof At?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new At(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1);for(let l=0;l<n;l++){let f=t[l];for(let u=0;u<i;u++)o[l+u]=this.field.add(o[l+u],this.field.multiply(f,r[u]))}return new At(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new At(this.field,t)}multiplyScalar(e){if(e===0)return new At(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new At(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new O;if(t===0)return new At(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new At(this.field,r)}toString(){let e=new De;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class i1{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new O;return this.logTable[e]}inverse(e){if(e===0)throw new T;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Li extends i1{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new At(this,new Int32Array([0])),this.one=new At(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new O;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new At(this,n)}}Li.PDF417_GF=new Li(xe.NUMBER_OF_CODEWORDS,3);class Xs{constructor(){this.field=Li.PDF417_GF}decode(e,t,n){let r=new At(this.field,e),i=new Int32Array(t),o=!1;for(let N=t;N>0;N--){let R=r.evaluateAt(this.field.exp(N));i[t-N]=R,R!==0&&(o=!0)}if(!o)return 0;let l=this.field.getOne();if(n!=null)for(const N of n){let R=this.field.exp(e.length-1-N),D=new At(this.field,new Int32Array([this.field.subtract(0,R),1]));l=l.multiply(D)}let f=new At(this.field,i),u=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),f,t),x=u[0],p=u[1],E=this.findErrorLocations(x),I=this.findErrorMagnitudes(p,x,E);for(let N=0;N<E.length;N++){let R=e.length-1-this.field.log(E[N]);if(R<0)throw Y.getChecksumInstance();e[R]=this.field.subtract(e[R],I[N])}return E.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let E=e;e=t,t=E}let r=e,i=t,o=this.field.getZero(),l=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let E=r,I=o;if(r=i,o=l,r.isZero())throw Y.getChecksumInstance();i=E;let N=this.field.getZero(),R=r.getCoefficient(r.getDegree()),D=this.field.inverse(R);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let P=i.getDegree()-r.getDegree(),j=this.field.multiply(i.getCoefficient(i.getDegree()),D);N=N.add(this.field.buildMonomial(P,j)),i=i.subtract(r.multiplyByMonomial(P,j))}l=N.multiply(o).subtract(I).negative()}let f=l.getCoefficient(0);if(f===0)throw Y.getChecksumInstance();let u=this.field.inverse(f),x=l.multiply(u),p=i.multiply(u);return[x,p]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)e.evaluateAt(i)===0&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw Y.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let u=1;u<=r;u++)i[r-u]=this.field.multiply(u,t.getCoefficient(u));let o=new At(this.field,i),l=n.length,f=new Int32Array(l);for(let u=0;u<l;u++){let x=this.field.inverse(n[u]),p=this.field.subtract(0,e.evaluateAt(x)),E=this.field.inverse(o.evaluateAt(x));f[u]=this.field.multiply(p,E)}return f}}class Wn{constructor(e,t,n,r,i){e instanceof Wn?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const o=t==null||n==null,l=r==null||i==null;if(o&&l)throw new F;o?(t=new v(0,r.getY()),n=new v(0,i.getY())):l&&(r=new v(e.getWidth()-1,t.getY()),i=new v(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new Wn(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,o=this.topRight,l=this.bottomRight;if(e>0){let f=n?this.topLeft:this.topRight,u=Math.trunc(f.getY()-e);u<0&&(u=0);let x=new v(f.getX(),u);n?r=x:o=x}if(t>0){let f=n?this.bottomLeft:this.bottomRight,u=Math.trunc(f.getY()+t);u>=this.image.getHeight()&&(u=this.image.getHeight()-1);let x=new v(f.getX(),u);n?i=x:l=x}return new Wn(this.image,r,i,o,l)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class s1{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ar{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(o,l,f,u,x,p){if(o==="%%")return"%";if(t[++n]===void 0)return;o=u?parseInt(u.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,I;switch(p){case"s":I=t[n];break;case"c":I=t[n][0];break;case"f":I=parseFloat(t[n]).toFixed(o);break;case"p":I=parseFloat(t[n]).toPrecision(o);break;case"e":I=parseFloat(t[n]).toExponential(o);break;case"x":I=parseInt(t[n]).toString(E||16);break;case"d":I=parseFloat(parseInt(t[n],E||10).toPrecision(o)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(E);let N=parseInt(f),R=f&&f[0]+""=="0"?"0":" ";for(;I.length<N;)I=l!==void 0?I+R:R+I;return I}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e,...t){this.buffer+=Ar.form(e,t)}toString(){return this.buffer}}class Er{constructor(e){this.boundingBox=new Wn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let n=1;n<Er.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],t!=null)||(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Ar;let t=0;for(const n of this.codewords){if(n==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue())}return e.toString()}}Er.MAX_NEARBY_DISTANCE=5;class Cr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return xe.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Ys extends Er{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),f=-1,u=1,x=0;for(let p=o;p<l;p++){if(t[p]==null)continue;let E=t[p],I=E.getRowNumber()-f;if(I===0)x++;else if(I===1)u=Math.max(u,x),x=1,f=E.getRowNumber();else if(I<0||E.getRowNumber()>=e.getRowCount()||I>p)t[p]=null;else{let N;u>2?N=(u-2)*I:N=I;let R=N>=p;for(let D=1;D<=N&&!R;D++)R=t[p-D]!=null;R?t[p]=null:(f=E.getRowNumber(),x=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),l=this.getCodewords(),f=-1;for(let u=i;u<o;u++){if(l[u]==null)continue;let x=l[u];x.setRowNumberAsRowIndicatorColumn();let p=x.getRowNumber()-f;p===0||(p===1?f=x.getRowNumber():x.getRowNumber()>=e.getRowCount()?l[u]=null:f=x.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Cr,n=new Cr,r=new Cr,i=new Cr;for(let l of e){if(l==null)continue;l.setRowNumberAsRowIndicatorColumn();let f=l.getValue()%30,u=l.getRowNumber();switch(this._isLeft||(u+=2),u%3){case 0:n.setValue(f*3+1);break;case 1:i.setValue(f/3),r.setValue(f%3);break;case 2:t.setValue(f+1);break}}if(t.getValue().length===0||n.getValue().length===0||r.getValue().length===0||i.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<xe.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>xe.MAX_ROWS_IN_BARCODE)return null;let o=new s1(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(e[n]==null)continue;let i=r.getValue()%30,o=r.getRowNumber();if(o>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:i*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class mr{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=xe.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)n[r]!=null&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let i=this.detectionResultColumns[r].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){let l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(i=mr.adjustRowNumberIfValid(r,i,l),l.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){let l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(i=mr.adjustRowNumberIfValid(r,i,l),l.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),o=i;this.detectionResultColumns[e+1]!=null&&(o=this.detectionResultColumns[e+1].getCodewords());let l=new Array(14);l[2]=i[t],l[3]=o[t],t>0&&(l[0]=n[t-1],l[4]=i[t-1],l[5]=o[t-1]),t>1&&(l[8]=n[t-2],l[10]=i[t-2],l[11]=o[t-2]),t<n.length-1&&(l[1]=n[t+1],l[6]=i[t+1],l[7]=o[t+1]),t<n.length-2&&(l[9]=n[t+2],l[12]=i[t+2],l[13]=o[t+2]);for(let f of l)if(mr.adjustRowNumber(r,f))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Ar;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(this.detectionResultColumns[r]==null){t.format("    |   ");continue}let i=this.detectionResultColumns[r].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()}}class br{constructor(e,t,n,r){this.rowNumber=br.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==br.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}br.BARCODE_ROW_UNKNOWN=-1;class Ft{static initialize(){for(let e=0;e<xe.SYMBOL_TABLE.length;e++){let t=xe.SYMBOL_TABLE[e],n=t&1;for(let r=0;r<xe.BARS_IN_MODULE;r++){let i=0;for(;(t&1)===n;)i+=1,t>>=1;n=t&1,Ft.RATIOS_TABLE[e]||(Ft.RATIOS_TABLE[e]=new Array(xe.BARS_IN_MODULE)),Ft.RATIOS_TABLE[e][xe.BARS_IN_MODULE-r-1]=Math.fround(i/xe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=Ft.getDecodedCodewordValue(Ft.sampleBitCounts(e));return t!==-1?t:Ft.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=U.sum(e),n=new Int32Array(xe.BARS_IN_MODULE),r=0,i=0;for(let o=0;o<xe.MODULES_IN_CODEWORD;o++){let l=t/(2*xe.MODULES_IN_CODEWORD)+o*t/xe.MODULES_IN_CODEWORD;i+e[r]<=l&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=Ft.getBitValue(e);return xe.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=U.sum(e),n=new Array(xe.BARS_IN_MODULE);if(t>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(e[o]/t);let r=Q.MAX_VALUE,i=-1;this.bSymbolTableReady||Ft.initialize();for(let o=0;o<Ft.RATIOS_TABLE.length;o++){let l=0,f=Ft.RATIOS_TABLE[o];for(let u=0;u<xe.BARS_IN_MODULE;u++){let x=Math.fround(f[u]-n[u]);if(l+=Math.fround(x*x),l>=r)break}l<r&&(r=l,i=xe.SYMBOL_TABLE[o])}return i}}Ft.bSymbolTableReady=!1,Ft.RATIOS_TABLE=new Array(xe.SYMBOL_TABLE.length).map(w=>new Array(xe.BARS_IN_MODULE));class zs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Zs{static parseLong(e,t=void 0){return parseInt(e,t)}}class js extends C{}js.kind="NullPointerException";class o1{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new js;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new Xe;if(n===0)return;for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class a1 extends C{}class l1 extends o1{constructor(e=32){if(super(),this.count=0,e<0)throw new O("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new a1;n=te.MAX_VALUE}this.buf=de.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new Xe;this.ensureCapacity(this.count+n),ne.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return de.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ge;(function(w){w[w.ALPHA=0]="ALPHA",w[w.LOWER=1]="LOWER",w[w.MIXED=2]="MIXED",w[w.PUNCT=3]="PUNCT",w[w.ALPHA_SHIFT=4]="ALPHA_SHIFT",w[w.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ge||(Ge={}));function Ks(){if(typeof window<"u")return window.BigInt||null;if(typeof ni<"u")return ni.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let jr;function vn(w){if(typeof jr>"u"&&(jr=Ks()),jr===null)throw new Error("BigInt is not supported!");return jr(w)}function c1(){let w=[];w[0]=vn(1);let e=vn(900);w[1]=e;for(let t=2;t<16;t++)w[t]=w[t-1]*e;return w}class B{static decode(e,t){let n=new De(""),r=K.ISO8859_1;n.enableDecoding(r);let i=1,o=e[i++],l=new zs;for(;i<e[0];){switch(o){case B.TEXT_COMPACTION_MODE_LATCH:i=B.textCompaction(e,i,n);break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:i=B.byteCompaction(o,e,r,i,n);break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case B.NUMERIC_COMPACTION_MODE_LATCH:i=B.numericCompaction(e,i,n);break;case B.ECI_CHARSET:K.getCharacterSetECIByValue(e[i++]);break;case B.ECI_GENERAL_PURPOSE:i+=2;break;case B.ECI_USER_DEFINED:i++;break;case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=B.decodeMacroBlock(e,i,l);break;case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:throw new Z;default:i--,i=B.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw Z.getFormatInstance()}if(n.length()===0)throw Z.getFormatInstance();let f=new Nn(null,n.toString(),null,t);return f.setOther(l),f}static decodeMacroBlock(e,t,n){if(t+B.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Z.getFormatInstance();let r=new Int32Array(B.NUMBER_OF_SEQUENCE_CODEWORDS);for(let l=0;l<B.NUMBER_OF_SEQUENCE_CODEWORDS;l++,t++)r[l]=e[t];n.setSegmentIndex(te.parseInt(B.decodeBase900toBase10(r,B.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new De;t=B.textCompaction(e,t,i),n.setFileId(i.toString());let o=-1;for(e[t]===B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let l=new De;t=B.textCompaction(e,t+1,l),n.setFileName(l.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let f=new De;t=B.textCompaction(e,t+1,f),n.setSender(f.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let u=new De;t=B.textCompaction(e,t+1,u),n.setAddressee(u.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let x=new De;t=B.numericCompaction(e,t+1,x),n.setSegmentCount(te.parseInt(x.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let p=new De;t=B.numericCompaction(e,t+1,p),n.setTimestamp(Zs.parseLong(p.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new De;t=B.numericCompaction(e,t+1,E),n.setChecksum(te.parseInt(E.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let I=new De;t=B.numericCompaction(e,t+1,I),n.setFileSize(Zs.parseLong(I.toString()));break;default:throw Z.getFormatInstance()}break;case B.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw Z.getFormatInstance()}if(o!==-1){let l=t-o;n.isLastSegment()&&l--,n.setOptionalData(de.copyOfRange(e,o,o+l))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),o=0,l=!1;for(;t<e[0]&&!l;){let f=e[t++];if(f<B.TEXT_COMPACTION_MODE_LATCH)r[o]=f/30,r[o+1]=f%30,o+=2;else switch(f){case B.TEXT_COMPACTION_MODE_LATCH:r[o++]=B.TEXT_COMPACTION_MODE_LATCH;break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:t--,l=!0;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[o]=B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[t++],i[o]=f,o++;break}}return B.decodeTextCompaction(r,i,o,n),t}static decodeTextCompaction(e,t,n,r){let i=Ge.ALPHA,o=Ge.ALPHA,l=0;for(;l<n;){let f=e[l],u="";switch(i){case Ge.ALPHA:if(f<26)u=String.fromCharCode(65+f);else switch(f){case 26:u=" ";break;case B.LL:i=Ge.LOWER;break;case B.ML:i=Ge.MIXED;break;case B.PS:o=i,i=Ge.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case B.TEXT_COMPACTION_MODE_LATCH:i=Ge.ALPHA;break}break;case Ge.LOWER:if(f<26)u=String.fromCharCode(97+f);else switch(f){case 26:u=" ";break;case B.AS:o=i,i=Ge.ALPHA_SHIFT;break;case B.ML:i=Ge.MIXED;break;case B.PS:o=i,i=Ge.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case B.TEXT_COMPACTION_MODE_LATCH:i=Ge.ALPHA;break}break;case Ge.MIXED:if(f<B.PL)u=B.MIXED_CHARS[f];else switch(f){case B.PL:i=Ge.PUNCT;break;case 26:u=" ";break;case B.LL:i=Ge.LOWER;break;case B.AL:i=Ge.ALPHA;break;case B.PS:o=i,i=Ge.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case B.TEXT_COMPACTION_MODE_LATCH:i=Ge.ALPHA;break}break;case Ge.PUNCT:if(f<B.PAL)u=B.PUNCT_CHARS[f];else switch(f){case B.PAL:i=Ge.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case B.TEXT_COMPACTION_MODE_LATCH:i=Ge.ALPHA;break}break;case Ge.ALPHA_SHIFT:if(i=o,f<26)u=String.fromCharCode(65+f);else switch(f){case 26:u=" ";break;case B.TEXT_COMPACTION_MODE_LATCH:i=Ge.ALPHA;break}break;case Ge.PUNCT_SHIFT:if(i=o,f<B.PAL)u=B.PUNCT_CHARS[f];else switch(f){case B.PAL:i=Ge.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case B.TEXT_COMPACTION_MODE_LATCH:i=Ge.ALPHA;break}break}u!==""&&r.append(u),l++}}static byteCompaction(e,t,n,r,i){let o=new l1,l=0,f=0,u=!1;switch(e){case B.BYTE_COMPACTION_MODE_LATCH:let x=new Int32Array(6),p=t[r++];for(;r<t[0]&&!u;)switch(x[l++]=p,f=900*f+p,p=t[r++],p){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:r--,u=!0;break;default:if(l%5===0&&l>0){for(let E=0;E<6;++E)o.write(Number(vn(f)>>vn(8*(5-E))));f=0,l=0}break}r===t[0]&&p<B.TEXT_COMPACTION_MODE_LATCH&&(x[l++]=p);for(let E=0;E<l;E++)o.write(x[E]);break;case B.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!u;){let E=t[r++];if(E<B.TEXT_COMPACTION_MODE_LATCH)l++,f=900*f+E;else switch(E){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:r--,u=!0;break}if(l%5===0&&l>0){for(let I=0;I<6;++I)o.write(Number(vn(f)>>vn(8*(5-I))));f=0,l=0}}break}return i.append(ct.decode(o.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,o=new Int32Array(B.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let l=e[t++];if(t===e[0]&&(i=!0),l<B.TEXT_COMPACTION_MODE_LATCH)o[r]=l,r++;else switch(l){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(r%B.MAX_NUMERIC_CODEWORDS===0||l===B.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(B.decodeBase900toBase10(o,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=vn(0);for(let i=0;i<t;i++)n+=B.EXP900[t-i-1]*vn(e[i]);let r=n.toString();if(r.charAt(0)!=="1")throw new Z;return r.substring(1)}}B.TEXT_COMPACTION_MODE_LATCH=900,B.BYTE_COMPACTION_MODE_LATCH=901,B.NUMERIC_COMPACTION_MODE_LATCH=902,B.BYTE_COMPACTION_MODE_LATCH_6=924,B.ECI_USER_DEFINED=925,B.ECI_GENERAL_PURPOSE=926,B.ECI_CHARSET=927,B.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,B.MACRO_PDF417_TERMINATOR=922,B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,B.MAX_NUMERIC_CODEWORDS=15,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,B.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,B.PL=25,B.LL=27,B.AS=27,B.ML=28,B.AL=28,B.PS=29,B.PAL=29,B.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,B.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",B.EXP900=Ks()?c1():[],B.NUMBER_OF_SEQUENCE_CODEWORDS=2;class be{constructor(){}static decode(e,t,n,r,i,o,l){let f=new Wn(e,t,n,r,i),u=null,x=null,p;for(let N=!0;;N=!1){if(t!=null&&(u=be.getRowIndicatorColumn(e,f,t,!0,o,l)),r!=null&&(x=be.getRowIndicatorColumn(e,f,r,!1,o,l)),p=be.merge(u,x),p==null)throw F.getNotFoundInstance();let R=p.getBoundingBox();if(N&&R!=null&&(R.getMinY()<f.getMinY()||R.getMaxY()>f.getMaxY()))f=R;else break}p.setBoundingBox(f);let E=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,u),p.setDetectionResultColumn(E,x);let I=u!=null;for(let N=1;N<=E;N++){let R=I?N:E-N;if(p.getDetectionResultColumn(R)!==void 0)continue;let D;R===0||R===E?D=new Ys(f,R===0):D=new Er(f),p.setDetectionResultColumn(R,D);let P=-1,j=P;for(let q=f.getMinY();q<=f.getMaxY();q++){if(P=be.getStartColumn(p,R,q,I),P<0||P>f.getMaxX()){if(j===-1)continue;P=j}let X=be.detectCodeword(e,f.getMinX(),f.getMaxX(),I,P,q,o,l);X!=null&&(D.setCodeword(q,X),j=P,o=Math.min(o,X.getWidth()),l=Math.max(l,X.getWidth()))}}return be.createDecoderResult(p)}static merge(e,t){if(e==null&&t==null)return null;let n=be.getBarcodeMetadata(e,t);if(n==null)return null;let r=Wn.merge(be.adjustBoundingBox(e),be.adjustBoundingBox(t));return new mr(n,r)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=be.getMax(t),r=0;for(let l of t)if(r+=n-l,l>0)break;let i=e.getCodewords();for(let l=0;r>0&&i[l]==null;l++)r--;let o=0;for(let l=t.length-1;l>=0&&(o+=n-t[l],!(t[l]>0));l--);for(let l=i.length-1;o>0&&i[l]==null;l--)o--;return e.getBoundingBox().addMissingRows(r,o,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let r;return t==null||(r=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,o){let l=new Ys(t,r);for(let f=0;f<2;f++){let u=f===0?1:-1,x=Math.trunc(Math.trunc(n.getX()));for(let p=Math.trunc(Math.trunc(n.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=u){let E=be.detectCodeword(e,0,e.getWidth(),r,x,p,i,o);E!=null&&(l.setCodeword(p,E),r?x=E.getStartX():x=E.getEndX())}}return l}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-be.getNumberOfECCodeWords(e.getBarcodeECLevel());if(r.length===0){if(i<1||i>xe.MAX_CODEWORDS_IN_BARCODE)throw F.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=be.createBarcodeMatrix(e);be.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array;for(let f=0;f<e.getBarcodeRowCount();f++)for(let u=0;u<e.getBarcodeColumnCount();u++){let x=t[f][u+1].getValue(),p=f*e.getBarcodeColumnCount()+u;x.length===0?n.push(p):x.length===1?r[p]=x[0]:(o.push(p),i.push(x))}let l=new Array(i.length);for(let f=0;f<l.length;f++)l[f]=i[f];return be.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,xe.toIntArray(n),xe.toIntArray(o),l)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let o=new Int32Array(r.length),l=100;for(;l-- >0;){for(let f=0;f<o.length;f++)t[r[f]]=i[f][o[f]];try{return be.decodeCodewords(t,e,n)}catch(f){if(!(f instanceof Y))throw f}if(o.length===0)throw Y.getChecksumInstance();for(let f=0;f<o.length;f++)if(o[f]<i[f].length-1){o[f]++;break}else if(o[f]=0,f===o.length-1)throw Y.getChecksumInstance()}throw Y.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)t[r][i]=new Cr;let n=0;for(let r of e.getDetectionResultColumns()){if(r!=null){for(let i of r.getCodewords())if(i!=null){let o=i.getRowNumber();if(o>=0){if(o>=t.length)continue;t[o][n].setValue(i.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,o=null;if(be.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodeword(n)),o!=null)return r?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(t).getCodewordNearby(n),o!=null)return r?o.getStartX():o.getEndX();if(be.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),o!=null)return r?o.getEndX():o.getStartX();let l=0;for(;be.isValidBarcodeColumn(e,t-i);){t-=i;for(let f of e.getDetectionResultColumn(t).getCodewords())if(f!=null)return(r?f.getEndX():f.getStartX())+i*l*(f.getEndX()-f.getStartX());l++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,o,l,f){i=be.adjustCodewordStartColumn(e,t,n,r,i,o);let u=be.getModuleBitCount(e,t,n,r,i,o);if(u==null)return null;let x,p=U.sum(u);if(r)x=i+p;else{for(let N=0;N<u.length/2;N++){let R=u[N];u[N]=u[u.length-1-N],u[u.length-1-N]=R}x=i,i=x-p}if(!be.checkCodewordSkew(p,l,f))return null;let E=Ft.getDecodedValue(u),I=xe.getCodeword(E);return I===-1?null:new br(i,x,be.getCodewordBucketNumber(E),I)}static getModuleBitCount(e,t,n,r,i,o){let l=i,f=new Int32Array(8),u=0,x=r?1:-1,p=r;for(;(r?l<n:l>=t)&&u<f.length;)e.get(l,o)===p?(f[u]++,l+=x):(u++,p=!p);return u===f.length||l===(r?n:t)&&u===f.length-1?f:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,o){let l=i,f=r?-1:1;for(let u=0;u<2;u++){for(;(r?l>=t:l<n)&&r===e.get(l,o);){if(Math.abs(i-l)>be.CODEWORD_SKEW_SIZE)return i;l+=f}f=-f,r=!r}return l}static checkCodewordSkew(e,t,n){return t-be.CODEWORD_SKEW_SIZE<=e&&e<=n+be.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw Z.getFormatInstance();let r=1<<t+1,i=be.correctErrors(e,n,r);be.verifyCodewordCount(e,r);let o=B.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+be.MAX_ERRORS||n<0||n>be.MAX_EC_CODEWORDS)throw Y.getChecksumInstance();return be.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw Z.getFormatInstance();let n=e[0];if(n>e.length)throw Z.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw Z.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((e&1)!==n&&(n=e&1,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return be.getCodewordBucketNumber(be.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Ar;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}be.CODEWORD_SKEW_SIZE=2,be.MAX_ERRORS=3,be.MAX_EC_CODEWORDS=512,be.errorCorrection=new Xs;class Et{decode(e,t=null){let n=Et.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw F.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return Et.decode(e,t,!0)}catch(n){throw n instanceof Z||n instanceof Y?F.getNotFoundInstance():n}}static decode(e,t,n){const r=new Array,i=Ce.detectMultiple(e,t,n);for(const o of i.getPoints()){const l=be.decode(i.getBits(),o[4],o[5],o[6],o[7],Et.getMinCodewordWidth(o),Et.getMaxCodewordWidth(o)),f=new wt(l.getText(),l.getRawBytes(),void 0,o,ae.PDF_417);f.putMetadata(it.ERROR_CORRECTION_LEVEL,l.getECLevel());const u=l.getOther();u!=null&&f.putMetadata(it.PDF417_EXTRA_METADATA,u),r.push(f)}return r.map(o=>o)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?te.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Et.getMaxWidth(e[0],e[4]),Et.getMaxWidth(e[6],e[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.max(Et.getMaxWidth(e[1],e[5]),Et.getMaxWidth(e[7],e[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Et.getMinWidth(e[0],e[4]),Et.getMinWidth(e[6],e[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.min(Et.getMinWidth(e[1],e[5]),Et.getMinWidth(e[7],e[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}reset(){}}class Kr extends C{}Kr.kind="ReaderException";class qs{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!h(e)&&e.get(Te.TRY_HARDER)===!0,n=h(e)?null:e.get(Te.POSSIBLE_FORMATS),r=new Array;if(!h(n)){const i=n.some(o=>o===ae.UPC_A||o===ae.UPC_E||o===ae.EAN_13||o===ae.EAN_8||o===ae.CODABAR||o===ae.CODE_39||o===ae.CODE_93||o===ae.CODE_128||o===ae.ITF||o===ae.RSS_14||o===ae.RSS_EXPANDED);i&&!t&&r.push(new er(e,this.verbose)),n.includes(ae.QR_CODE)&&r.push(new Mn),n.includes(ae.DATA_MATRIX)&&r.push(new Dn),n.includes(ae.AZTEC)&&r.push(new Nt),n.includes(ae.PDF_417)&&r.push(new Et),i&&t&&r.push(new er(e,this.verbose))}r.length===0&&(t||r.push(new er(e,this.verbose)),r.push(new Mn),r.push(new Dn),r.push(new Nt),r.push(new Et),t&&r.push(new er(e,this.verbose))),this.readers=r}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Kr("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof Kr)continue}throw new F("No MultiFormat Readers were able to detect the code.")}}class f1 extends an{constructor(e=null,t=500){const n=new qs;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class u1 extends an{constructor(e=500){super(new Et,e)}}class h1 extends an{constructor(e=500){super(new Mn,e)}}var Fi;(function(w){w[w.ERROR_CORRECTION=0]="ERROR_CORRECTION",w[w.CHARACTER_SET=1]="CHARACTER_SET",w[w.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",w[w.MIN_SIZE=3]="MIN_SIZE",w[w.MAX_SIZE=4]="MAX_SIZE",w[w.MARGIN=5]="MARGIN",w[w.PDF417_COMPACT=6]="PDF417_COMPACT",w[w.PDF417_COMPACTION=7]="PDF417_COMPACTION",w[w.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",w[w.AZTEC_LAYERS=9]="AZTEC_LAYERS",w[w.QR_VERSION=10]="QR_VERSION"})(Fi||(Fi={}));var ht=Fi;class ki{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new St(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const o=n.multiply(new St(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(o),n=o}}return t[e]}encode(e,t){if(t===0)throw new O("No error correction bytes");const n=e.length-t;if(n<=0)throw new O("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);ne.arraycopy(e,0,i,0,n);let o=new St(this.field,i);o=o.multiplyByMonomial(t,1);const f=o.divide(r)[1].getCoefficients(),u=t-f.length;for(let x=0;x<u;x++)e[n+x]=0;ne.arraycopy(f,0,e,n+u,f.length)}}class ot{constructor(){}static applyMaskPenaltyRule1(e){return ot.applyMaskPenaltyRule1Internal(e,!0)+ot.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i-1;o++){const l=n[o];for(let f=0;f<r-1;f++){const u=l[f];u===l[f+1]&&u===n[o+1][f]&&u===n[o+1][f+1]&&t++}}return ot.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++)for(let l=0;l<r;l++){const f=n[o];l+6<r&&f[l]===1&&f[l+1]===0&&f[l+2]===1&&f[l+3]===1&&f[l+4]===1&&f[l+5]===0&&f[l+6]===1&&(ot.isWhiteHorizontal(f,l-4,l)||ot.isWhiteHorizontal(f,l+7,l+11))&&t++,o+6<i&&n[o][l]===1&&n[o+1][l]===0&&n[o+2][l]===1&&n[o+3][l]===1&&n[o+4][l]===1&&n[o+5][l]===0&&n[o+6][l]===1&&(ot.isWhiteVertical(n,l,o-4,o)||ot.isWhiteVertical(n,l,o+7,o+11))&&t++}return t*ot.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(e[r]===1)return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(e[i][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let f=0;f<i;f++){const u=n[f];for(let x=0;x<r;x++)u[x]===1&&t++}const o=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-o)*10/o)*ot.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=n&1;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(i&1)+i%3;break;case 6:i=n*t,r=(i&1)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new O("Invalid mask pattern: "+e)}return r===0}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray();for(let l=0;l<r;l++){let f=0,u=-1;for(let x=0;x<i;x++){const p=t?o[l][x]:o[x][l];p===u?f++:(f>=5&&(n+=ot.N1+(f-5)),f=1,u=p)}f>=5&&(n+=ot.N1+(f-5))}return n}}ot.N1=3,ot.N2=3,ot.N3=40,ot.N4=10;class qr{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)de.fill(t,e)}equals(e){if(!(e instanceof qr))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const i=this.bytes[n],o=t.bytes[n];for(let l=0,f=this.width;l<f;++l)if(i[l]!==o[l])return!1}return!0}toString(){const e=new De;for(let t=0,n=this.height;t<n;++t){const r=this.bytes[t];for(let i=0,o=this.width;i<o;++i)switch(r[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Gn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new De;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Gn.NUM_MASK_PATTERNS}}Gn.NUM_MASK_PATTERNS=8;class Ye extends C{}Ye.kind="WriterException";class he{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){he.clearMatrix(i),he.embedBasicPatterns(n,i),he.embedTypeInfo(t,r,i),he.maybeEmbedVersionInfo(n,i),he.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){he.embedPositionDetectionPatternsAndSeparators(t),he.embedDarkDotAtLeftBottomCorner(t),he.maybeEmbedPositionAdjustmentPatterns(e,t),he.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new $;he.makeTypeInfoBits(e,t,r);for(let i=0,o=r.getSize();i<o;++i){const l=r.get(r.getSize()-1-i),f=he.TYPE_INFO_COORDINATES[i],u=f[0],x=f[1];if(n.setBoolean(u,x,l),i<8){const p=n.getWidth()-i-1;n.setBoolean(p,8,l)}else{const E=n.getHeight()-7+(i-8);n.setBoolean(8,E,l)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new $;he.makeVersionInfoBits(e,n);let r=6*3-1;for(let i=0;i<6;++i)for(let o=0;o<3;++o){const l=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+o,l),t.setBoolean(t.getHeight()-11+o,i,l)}}static embedDataBits(e,t,n){let r=0,i=-1,o=n.getWidth()-1,l=n.getHeight()-1;for(;o>0;){for(o===6&&(o-=1);l>=0&&l<n.getHeight();){for(let f=0;f<2;++f){const u=o-f;if(!he.isEmpty(n.get(u,l)))continue;let x;r<e.getSize()?(x=e.get(r),++r):x=!1,t!==255&&ot.getDataMaskBit(t,u,l)&&(x=!x),n.setBoolean(u,l,x)}l+=i}i=-i,l+=i,o-=2}if(r!==e.getSize())throw new Ye("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-te.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new O("0 polynomial");const n=he.findMSBSet(t);for(e<<=n-1;he.findMSBSet(e)>=n;)e^=t<<he.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Gn.isValidMaskPattern(t))throw new Ye("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=he.calculateBCHCode(r,he.TYPE_INFO_POLY);n.appendBits(i,10);const o=new $;if(o.appendBits(he.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Ye("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=he.calculateBCHCode(e.getVersionNumber(),he.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new Ye("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;he.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),he.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Ye;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!he.isEmpty(n.get(e+r,t)))throw new Ye;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!he.isEmpty(n.get(e,t+r)))throw new Ye;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=he.POSITION_ADJUSTMENT_PATTERN[r];for(let o=0;o<5;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=he.POSITION_DETECTION_PATTERN[r];for(let o=0;o<7;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPatternsAndSeparators(e){const t=he.POSITION_DETECTION_PATTERN[0].length;he.embedPositionDetectionPattern(0,0,e),he.embedPositionDetectionPattern(e.getWidth()-t,0,e),he.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;he.embedHorizontalSeparationPattern(0,n-1,e),he.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),he.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;he.embedVerticalSeparationPattern(r,0,e),he.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),he.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=he.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,o=r.length;i!==o;i++){const l=r[i];if(l>=0)for(let f=0;f!==o;f++){const u=r[f];u>=0&&he.isEmpty(t.get(u,l))&&he.embedPositionAdjustmentPattern(u-2,l-2,t)}}}}he.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),he.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),he.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),he.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),he.VERSION_INFO_POLY=7973,he.TYPE_INFO_POLY=1335,he.TYPE_INFO_MASK_PATTERN=21522;class d1{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class $e{constructor(){}static calculateMaskPenalty(e){return ot.applyMaskPenaltyRule1(e)+ot.applyMaskPenaltyRule2(e)+ot.applyMaskPenaltyRule3(e)+ot.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=$e.DEFAULT_BYTE_MODE_ENCODING;const i=n!==null&&n.get(ht.CHARACTER_SET)!==void 0;i&&(r=n.get(ht.CHARACTER_SET).toString());const o=this.chooseMode(e,r),l=new $;if(o===fe.BYTE&&(i||$e.DEFAULT_BYTE_MODE_ENCODING!==r)){const q=K.getCharacterSetECIByName(r);q!==void 0&&this.appendECI(q,l)}this.appendModeInfo(o,l);const f=new $;this.appendBytes(e,o,f,r);let u;if(n!==null&&n.get(ht.QR_VERSION)!==void 0){const q=Number.parseInt(n.get(ht.QR_VERSION).toString(),10);u=ce.getVersionForNumber(q);const X=this.calculateBitsNeeded(o,l,f,u);if(!this.willFit(X,u,t))throw new Ye("Data too big for requested version")}else u=this.recommendVersion(t,o,l,f);const x=new $;x.appendBitArray(l);const p=o===fe.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(p,u,o,x),x.appendBitArray(f);const E=u.getECBlocksForLevel(t),I=u.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(I,x);const N=this.interleaveWithECBytes(x,u.getTotalCodewords(),I,E.getNumBlocks()),R=new Gn;R.setECLevel(t),R.setMode(o),R.setVersion(u);const D=u.getDimensionForVersion(),P=new qr(D,D),j=this.chooseMaskPattern(N,t,u,P);return R.setMaskPattern(j),he.buildMatrix(N,t,u,j,P),R.setMatrix(P),R}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,ce.getVersionForNumber(1)),o=this.chooseVersion(i,e),l=this.calculateBitsNeeded(t,n,r,o);return this.chooseVersion(l,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<$e.ALPHANUMERIC_TABLE.length?$e.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(K.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return fe.KANJI;let n=!1,r=!1;for(let i=0,o=e.length;i<o;++i){const l=e.charAt(i);if($e.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)r=!0;else return fe.BYTE}return r?fe.ALPHANUMERIC:n?fe.NUMERIC:fe.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=ct.encode(e,K.SJIS)}catch{return!1}const n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){const i=t[r]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let l=0;l<Gn.NUM_MASK_PATTERNS;l++){he.buildMatrix(e,t,n,l,r);let f=this.calculateMaskPenalty(r);f<i&&(i=f,o=l)}return o}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=ce.getVersionForNumber(n);if($e.willFit(e,r,t))return r}throw new Ye("Data too big")}static willFit(e,t,n){const r=t.getTotalCodewords(),o=t.getECBlocksForLevel(n).getTotalECCodewords(),l=r-o,f=(e+7)/8;return l>=f}static terminateBits(e,t){const n=e*8;if(t.getSize()>n)throw new Ye("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let o=0;o<4&&t.getSize()<n;++o)t.appendBit(!1);const r=t.getSize()&7;if(r>0)for(let o=r;o<8;o++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let o=0;o<i;++o)t.appendBits((o&1)===0?236:17,8);if(t.getSize()!==n)throw new Ye("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,o){if(r>=n)throw new Ye("Block ID too large");const l=e%n,f=n-l,u=Math.floor(e/n),x=u+1,p=Math.floor(t/n),E=p+1,I=u-p,N=x-E;if(I!==N)throw new Ye("EC bytes mismatch");if(n!==f+l)throw new Ye("RS blocks mismatch");if(e!==(p+I)*f+(E+N)*l)throw new Ye("Total bytes mismatch");r<f?(i[0]=p,o[0]=I):(i[0]=E,o[0]=N)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new Ye("Number of bits and data bytes does not match");let i=0,o=0,l=0;const f=new Array;for(let x=0;x<r;++x){const p=new Int32Array(1),E=new Int32Array(1);$e.getNumDataBytesAndNumECBytesForBlockID(t,n,r,x,p,E);const I=p[0],N=new Uint8Array(I);e.toBytes(8*i,N,0,I);const R=$e.generateECBytes(N,E[0]);f.push(new d1(N,R)),o=Math.max(o,I),l=Math.max(l,R.length),i+=p[0]}if(n!==i)throw new Ye("Data bytes does not match offset");const u=new $;for(let x=0;x<o;++x)for(const p of f){const E=p.getDataBytes();x<E.length&&u.appendBits(E[x],8)}for(let x=0;x<l;++x)for(const p of f){const E=p.getErrorCorrectionBytes();x<E.length&&u.appendBits(E[x],8)}if(t!==u.getSizeInBytes())throw new Ye("Interleaving error: "+t+" and "+u.getSizeInBytes()+" differ.");return u}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let o=0;o<n;o++)r[o]=e[o]&255;new ki(S.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=r[n+o];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new Ye(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case fe.NUMERIC:$e.appendNumericBytes(e,n);break;case fe.ALPHANUMERIC:$e.appendAlphanumericBytes(e,n);break;case fe.BYTE:$e.append8BitBytes(e,n,r);break;case fe.KANJI:$e.appendKanjiBytes(e,n);break;default:throw new Ye("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=$e.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=$e.getDigit(e.charAt(r));if(r+2<n){const o=$e.getDigit(e.charAt(r+1)),l=$e.getDigit(e.charAt(r+2));t.appendBits(i*100+o*10+l,10),r+=3}else if(r+1<n){const o=$e.getDigit(e.charAt(r+1));t.appendBits(i*10+o,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=$e.getAlphanumericCode(e.charCodeAt(r));if(i===-1)throw new Ye;if(r+1<n){const o=$e.getAlphanumericCode(e.charCodeAt(r+1));if(o===-1)throw new Ye;t.appendBits(i*45+o,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=ct.encode(e,n)}catch(i){throw new Ye(i)}for(let i=0,o=r.length;i!==o;i++){const l=r[i];t.appendBits(l,8)}}static appendKanjiBytes(e,t){let n;try{n=ct.encode(e,K.SJIS)}catch(i){throw new Ye(i)}const r=n.length;for(let i=0;i<r;i+=2){const o=n[i]&255,l=n[i+1]&255,f=o<<8&4294967295|l;let u=-1;if(f>=33088&&f<=40956?u=f-33088:f>=57408&&f<=60351&&(u=f-49472),u===-1)throw new Ye("Invalid byte sequence");const x=(u>>8)*192+(u&255);t.appendBits(x,13)}}static appendECI(e,t){t.appendBits(fe.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}$e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),$e.DEFAULT_BYTE_MODE_ENCODING=K.UTF8.getName();class Xn{write(e,t,n,r=null){if(e.length===0)throw new O("Found empty contents");if(t<0||n<0)throw new O("Requested dimensions are too small: "+t+"x"+n);let i=Ke.L,o=Xn.QUIET_ZONE_SIZE;r!==null&&(r.get(ht.ERROR_CORRECTION)!==void 0&&(i=Ke.fromString(r.get(ht.ERROR_CORRECTION).toString())),r.get(ht.MARGIN)!==void 0&&(o=Number.parseInt(r.get(ht.MARGIN).toString(),10)));const l=$e.encode(e,i,r);return this.renderResult(l,t,n,o)}writeToDom(e,t,n,r,i=null){typeof e=="string"&&(e=document.querySelector(e));const o=this.write(t,n,r,i);e&&e.appendChild(o)}renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new W;const o=i.getWidth(),l=i.getHeight(),f=o+r*2,u=l+r*2,x=Math.max(t,f),p=Math.max(n,u),E=Math.min(Math.floor(x/f),Math.floor(p/u)),I=Math.floor((x-o*E)/2),N=Math.floor((p-l*E)/2),R=this.createSVGElement(x,p);for(let D=0,P=N;D<l;D++,P+=E)for(let j=0,q=I;j<o;j++,q+=E)if(i.get(j,D)===1){const X=this.createSvgRectElement(q,P,E,E);R.appendChild(X)}return R}createSVGElement(e,t){const n=document.createElementNS(Xn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(Xn.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Xn.QUIET_ZONE_SIZE=4,Xn.SVG_NS="http://www.w3.org/2000/svg";class nr{encode(e,t,n,r,i){if(e.length===0)throw new O("Found empty contents");if(t!==ae.QR_CODE)throw new O("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new O(`Requested dimensions are too small: ${n}x${r}`);let o=Ke.L,l=nr.QUIET_ZONE_SIZE;i!==null&&(i.get(ht.ERROR_CORRECTION)!==void 0&&(o=Ke.fromString(i.get(ht.ERROR_CORRECTION).toString())),i.get(ht.MARGIN)!==void 0&&(l=Number.parseInt(i.get(ht.MARGIN).toString(),10)));const f=$e.encode(e,o,i);return nr.renderResult(f,n,r,l)}static renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new W;const o=i.getWidth(),l=i.getHeight(),f=o+r*2,u=l+r*2,x=Math.max(t,f),p=Math.max(n,u),E=Math.min(Math.floor(x/f),Math.floor(p/u)),I=Math.floor((x-o*E)/2),N=Math.floor((p-l*E)/2),R=new rt(x,p);for(let D=0,P=N;D<l;D++,P+=E)for(let j=0,q=I;j<o;j++,q+=E)i.get(j,D)===1&&R.setRegion(q,P,E,E);return R}}nr.QUIET_ZONE_SIZE=4;class g1{encode(e,t,n,r,i){let o;switch(t){case ae.QR_CODE:o=new nr;break;default:throw new O("No encoder available for format "+t)}return o.encode(e,t,n,r,i)}}class un extends Be{constructor(e,t,n,r,i,o,l,f){if(super(o,l),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+o>t||i+l>n)throw new O("Crop rectangle does not fit within image data.");f&&this.reverseHorizontal(o,l)}getRow(e,t){if(e<0||e>=this.getHeight())throw new O("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return ne.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return ne.arraycopy(this.yuvData,i,r,0,n),r;for(let o=0;o<t;o++){const l=o*e;ne.arraycopy(this.yuvData,i,r,l,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new un(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/un.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/un.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<t;o++){const l=o*e;for(let f=0;f<e;f++){const u=r[i+f*un.THUMBNAIL_SCALE_FACTOR]&255;n[l+f]=4278190080|u*65793}i+=this.dataWidth*un.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/un.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/un.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const o=i+e/2;for(let l=i,f=i+e-1;l<o;l++,f--){const u=n[l];n[l]=n[f],n[f]=u}}}invert(){return new mt(this)}}un.THUMBNAIL_SCALE_FACTOR=2;class Ui extends Be{constructor(e,t,n,r,i,o,l){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=l,e.BYTES_PER_ELEMENT===4){const f=t*n,u=new Uint8ClampedArray(f);for(let x=0;x<f;x++){const p=e[x],E=p>>16&255,I=p>>7&510,N=p&255;u[x]=(E+I+N)/4&255}this.luminances=u}else this.luminances=e;if(r===void 0&&(this.dataWidth=t),i===void 0&&(this.dataHeight=n),o===void 0&&(this.left=0),l===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new O("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return ne.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return ne.arraycopy(this.luminances,i,r,0,n),r;for(let o=0;o<t;o++){const l=o*e;ne.arraycopy(this.luminances,i,r,l,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Ui(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new mt(this)}}class Qs extends K{static forName(e){return this.getCharacterSetECIByName(e)}}class Vi{}Vi.ISO_8859_1=K.ISO8859_1;class Js{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class $s{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class x1{constructor(e){this.previous=e}getPrevious(){return this.previous}}class rr extends x1{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new rr(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new rr(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+te.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Hi extends rr{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Hi(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function w1(w,e,t){return new Hi(w,e,t)}function Ir(w,e,t){return new rr(w,e,t)}const p1=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Bn=0,Qr=1,qt=2,eo=3,hn=4,A1=new rr(null,0,0),Wi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function E1(w){for(let e of w)de.fill(e,-1);return w[Bn][hn]=0,w[Qr][hn]=0,w[Qr][Bn]=28,w[eo][hn]=0,w[qt][hn]=0,w[qt][Bn]=15,w}const to=E1(de.createInt32Array(6,6));class dn{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let o=Wi[this.mode][e];r=Ir(r,o&65535,o>>16),n+=o>>16}let i=e===qt?4:5;return r=Ir(r,t,i),new dn(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===qt?4:5;return n=Ir(n,to[this.mode][e],r),n=Ir(n,t,5),new dn(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===hn||this.mode===qt){let l=Wi[n][Bn];t=Ir(t,l&65535,l>>16),r+=l>>16,n=Bn}let i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new dn(t,n,this.binaryShiftByteCount+1,r+i);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=w1(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new dn(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Wi[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=dn.calculateBinaryShiftCost(e)-dn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;r!==null;r=r.getPrevious())t.unshift(r);let n=new $;for(const r of t)r.appendTo(n,e);return n}toString(){return ue.format("%s bits=%d bytes=%d",p1[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}dn.INITIAL_STATE=new dn(A1,Bn,0,0);function C1(w){const e=ue.getCharCode(" "),t=ue.getCharCode("."),n=ue.getCharCode(",");w[Bn][e]=1;const r=ue.getCharCode("Z"),i=ue.getCharCode("A");for(let E=i;E<=r;E++)w[Bn][E]=E-i+2;w[Qr][e]=1;const o=ue.getCharCode("z"),l=ue.getCharCode("a");for(let E=l;E<=o;E++)w[Qr][E]=E-l+2;w[qt][e]=1;const f=ue.getCharCode("9"),u=ue.getCharCode("0");for(let E=u;E<=f;E++)w[qt][E]=E-u+2;w[qt][n]=12,w[qt][t]=13;const x=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let E=0;E<x.length;E++)w[eo][ue.getCharCode(x[E])]=E;const p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<p.length;E++)ue.getCharCode(p[E])>0&&(w[hn][ue.getCharCode(p[E])]=E);return w}const Gi=C1(de.createInt32Array(5,256));class yr{constructor(e){this.text=e}encode(){const e=ue.getCharCode(" "),t=ue.getCharCode(`
`);let n=$s.singletonList(dn.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let o,l=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ue.getCharCode("\r"):o=l===t?2:0;break;case ue.getCharCode("."):o=l===e?3:0;break;case ue.getCharCode(","):o=l===e?4:0;break;case ue.getCharCode(":"):o=l===e?5:0;break;default:o=0}o>0?(n=yr.updateStateListForPair(n,i,o),i++):n=this.updateStateListForChar(n,i)}return $s.min(n,(i,o)=>i.getBitCount()-o.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return yr.simplifyStates(n)}updateStateForChar(e,t,n){let r=this.text[t]&255,i=Gi[e.getMode()][r]>0,o=null;for(let l=0;l<=hn;l++){let f=Gi[l][r];if(f>0){if(o==null&&(o=e.endBinaryShift(t)),!i||l===e.getMode()||l===qt){const u=o.latchAndAppend(l,f);n.push(u)}if(!i&&to[e.getMode()][l]>=0){const u=o.shiftAndAppend(l,f);n.push(u)}}}if(e.getBinaryShiftByteCount()>0||Gi[e.getMode()][r]===0){let l=e.addBinaryShiftChar(t);n.push(l)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(hn,n)),e.getMode()!==hn&&r.push(i.shiftAndAppend(hn,n)),n===3||n===4){let o=i.latchAndAppend(qt,16-n).latchAndAppend(qt,1);r.push(o)}if(e.getBinaryShiftByteCount()>0){let o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(o)}}static simplifyStates(e){let t=[];for(const n of e){let r=!0;for(const i of t){if(i.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(i)&&(t=t.filter(o=>o!==i))}r&&t.push(n)}return t}}class ve{constructor(){}static encodeBytes(e){return ve.encode(e,ve.DEFAULT_EC_PERCENT,ve.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r=new yr(e).encode(),i=te.truncDivision(r.getSize()*t,100)+11,o=r.getSize()+i,l,f,u,x,p;if(n!==ve.DEFAULT_AZTEC_LAYERS){if(l=n<0,f=Math.abs(n),f>(l?ve.MAX_NB_BITS_COMPACT:ve.MAX_NB_BITS))throw new O(ue.format("Illegal value %s for layers",n));u=ve.totalBitsInLayer(f,l),x=ve.WORD_SIZE[f];let X=u-u%x;if(p=ve.stuffBits(r,x),p.getSize()+i>X)throw new O("Data to large for user specified layer");if(l&&p.getSize()>x*64)throw new O("Data to large for user specified layer")}else{x=0,p=null;for(let X=0;;X++){if(X>ve.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(l=X<=3,f=l?X+1:X,u=ve.totalBitsInLayer(f,l),o>u)continue;(p==null||x!==ve.WORD_SIZE[f])&&(x=ve.WORD_SIZE[f],p=ve.stuffBits(r,x));let Ne=u-u%x;if(!(l&&p.getSize()>x*64)&&p.getSize()+i<=Ne)break}}let E=ve.generateCheckWords(p,u,x),I=p.getSize()/x,N=ve.generateModeMessage(l,f,I),R=(l?11:14)+f*4,D=new Int32Array(R),P;if(l){P=R;for(let X=0;X<D.length;X++)D[X]=X}else{P=R+1+2*te.truncDivision(te.truncDivision(R,2)-1,15);let X=te.truncDivision(R,2),Ne=te.truncDivision(P,2);for(let Ae=0;Ae<X;Ae++){let kt=Ae+te.truncDivision(Ae,15);D[X-Ae-1]=Ne-kt-1,D[X+Ae]=Ne+kt+1}}let j=new rt(P);for(let X=0,Ne=0;X<f;X++){let Ae=(f-X)*4+(l?9:12);for(let kt=0;kt<Ae;kt++){let tn=kt*2;for(let Ut=0;Ut<2;Ut++)E.get(Ne+tn+Ut)&&j.set(D[X*2+Ut],D[X*2+kt]),E.get(Ne+Ae*2+tn+Ut)&&j.set(D[X*2+kt],D[R-1-X*2-Ut]),E.get(Ne+Ae*4+tn+Ut)&&j.set(D[R-1-X*2-Ut],D[R-1-X*2-kt]),E.get(Ne+Ae*6+tn+Ut)&&j.set(D[R-1-X*2-kt],D[X*2+Ut])}Ne+=Ae*8}if(ve.drawModeMessage(j,l,P,N),l)ve.drawBullsEye(j,te.truncDivision(P,2),5);else{ve.drawBullsEye(j,te.truncDivision(P,2),7);for(let X=0,Ne=0;X<te.truncDivision(R,2)-1;X+=15,Ne+=16)for(let Ae=te.truncDivision(P,2)&1;Ae<P;Ae+=2)j.set(te.truncDivision(P,2)-Ne,Ae),j.set(te.truncDivision(P,2)+Ne,Ae),j.set(Ae,te.truncDivision(P,2)-Ne),j.set(Ae,te.truncDivision(P,2)+Ne)}let q=new Js;return q.setCompact(l),q.setSize(P),q.setLayers(f),q.setCodeWords(I),q.setMatrix(j),q}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let i=t-r;i<=t+r;i++)e.set(i,t-r),e.set(i,t+r),e.set(t-r,i),e.set(t+r,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new $;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=ve.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=ve.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=te.truncDivision(n,2);if(t)for(let o=0;o<7;o++){let l=i-3+o;r.get(o)&&e.set(l,i-5),r.get(o+7)&&e.set(i+5,l),r.get(20-o)&&e.set(l,i+5),r.get(27-o)&&e.set(i-5,l)}else for(let o=0;o<10;o++){let l=i-5+o+te.truncDivision(o,5);r.get(o)&&e.set(l,i-7),r.get(o+10)&&e.set(i+7,l),r.get(29-o)&&e.set(l,i+7),r.get(39-o)&&e.set(i-7,l)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new ki(ve.getGF(n)),o=te.truncDivision(t,n),l=ve.bitsToWords(e,n,o);i.encode(l,o-r);let f=t%n,u=new $;u.appendBits(0,f);for(const x of Array.from(l))u.appendBits(x,n);return u}static bitsToWords(e,t,n){let r=new Int32Array(n),i,o;for(i=0,o=e.getSize()/t;i<o;i++){let l=0;for(let f=0;f<t;f++)l|=e.get(i*t+f)?1<<t-f-1:0;r[i]=l}return r}static getGF(e){switch(e){case 4:return S.AZTEC_PARAM;case 6:return S.AZTEC_DATA_6;case 8:return S.AZTEC_DATA_8;case 10:return S.AZTEC_DATA_10;case 12:return S.AZTEC_DATA_12;default:throw new O("Unsupported word size "+e)}}static stuffBits(e,t){let n=new $,r=e.getSize(),i=(1<<t)-2;for(let o=0;o<r;o+=t){let l=0;for(let f=0;f<t;f++)(o+f>=r||e.get(o+f))&&(l|=1<<t-1-f);(l&i)===i?(n.appendBits(l&i,t),o--):(l&i)===0?(n.appendBits(l|1,t),o--):n.appendBits(l,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ve.DEFAULT_EC_PERCENT=33,ve.DEFAULT_AZTEC_LAYERS=0,ve.MAX_NB_BITS=32,ve.MAX_NB_BITS_COMPACT=4,ve.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Jr{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let o=Vi.ISO_8859_1,l=ve.DEFAULT_EC_PERCENT,f=ve.DEFAULT_AZTEC_LAYERS;return i!=null&&(i.has(ht.CHARACTER_SET)&&(o=Qs.forName(i.get(ht.CHARACTER_SET).toString())),i.has(ht.ERROR_CORRECTION)&&(l=te.parseInt(i.get(ht.ERROR_CORRECTION).toString())),i.has(ht.AZTEC_LAYERS)&&(f=te.parseInt(i.get(ht.AZTEC_LAYERS).toString()))),Jr.encodeLayers(e,t,n,r,o,l,f)}static encodeLayers(e,t,n,r,i,o,l){if(t!==ae.AZTEC)throw new O("Can only encode AZTEC, but got "+t);let f=ve.encode(ue.getBytes(e,i),o,l);return Jr.renderResult(f,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(r==null)throw new W;let i=r.getWidth(),o=r.getHeight(),l=Math.max(t,i),f=Math.max(n,o),u=Math.min(l/i,f/o),x=(l-i*u)/2,p=(f-o*u)/2,E=new rt(l,f);for(let I=0,N=p;I<o;I++,N+=u)for(let R=0,D=x;R<i;R++,D+=u)r.get(R,I)&&E.setRegion(D,N,u,u);return E}}c.AbstractExpandedDecoder=Ni,c.ArgumentException=_,c.ArithmeticException=T,c.AztecCode=Js,c.AztecCodeReader=Nt,c.AztecCodeWriter=Jr,c.AztecDecoder=G,c.AztecDetector=pt,c.AztecDetectorResult=ee,c.AztecEncoder=ve,c.AztecHighLevelEncoder=yr,c.AztecPoint=He,c.BarcodeFormat=ae,c.Binarizer=we,c.BinaryBitmap=z,c.BitArray=$,c.BitMatrix=rt,c.BitSource=Mi,c.BrowserAztecCodeReader=zt,c.BrowserBarcodeReader=Qa,c.BrowserCodeReader=an,c.BrowserDatamatrixCodeReader=$a,c.BrowserMultiFormatReader=f1,c.BrowserPDF417Reader=u1,c.BrowserQRCodeReader=h1,c.BrowserQRCodeSvgWriter=Xn,c.CharacterSetECI=K,c.ChecksumException=Y,c.Code128Reader=J,c.Code39Reader=Me,c.DataMatrixDecodedBitStreamParser=Rn,c.DataMatrixReader=Dn,c.DecodeHintType=Te,c.DecoderResult=Nn,c.DefaultGridSampler=Ve,c.DetectorResult=le,c.EAN13Reader=Un,c.EncodeHintType=ht,c.Exception=C,c.FormatException=Z,c.GenericGF=S,c.GenericGFPoly=St,c.GlobalHistogramBinarizer=Re,c.GridSampler=ge,c.GridSamplerInstance=ye,c.HTMLCanvasElementLuminanceSource=Ht,c.HybridBinarizer=se,c.ITFReader=_e,c.IllegalArgumentException=O,c.IllegalStateException=W,c.InvertedLuminanceSource=mt,c.LuminanceSource=Be,c.MathUtils=U,c.MultiFormatOneDReader=er,c.MultiFormatReader=qs,c.MultiFormatWriter=g1,c.NotFoundException=F,c.OneDReader=je,c.PDF417DecodedBitStreamParser=B,c.PDF417DecoderErrorCorrection=Xs,c.PDF417Reader=Et,c.PDF417ResultMetadata=zs,c.PerspectiveTransform=pe,c.PlanarYUVLuminanceSource=un,c.QRCodeByteMatrix=qr,c.QRCodeDataMask=jt,c.QRCodeDecodedBitStreamParser=nt,c.QRCodeDecoderErrorCorrectionLevel=Ke,c.QRCodeDecoderFormatInformation=It,c.QRCodeEncoder=$e,c.QRCodeEncoderQRCode=Gn,c.QRCodeMaskUtil=ot,c.QRCodeMatrixUtil=he,c.QRCodeMode=fe,c.QRCodeReader=Mn,c.QRCodeVersion=ce,c.QRCodeWriter=nr,c.RGBLuminanceSource=Ui,c.RSS14Reader=st,c.RSSExpandedReader=V,c.ReaderException=Kr,c.ReedSolomonDecoder=H,c.ReedSolomonEncoder=ki,c.ReedSolomonException=L,c.Result=wt,c.ResultMetadataType=it,c.ResultPoint=v,c.StringUtils=ue,c.UnsupportedOperationException=Bt,c.VideoInputDevice=on,c.WhiteRectangleDetector=oe,c.WriterException=Ye,c.ZXingArrays=de,c.ZXingCharset=Qs,c.ZXingInteger=te,c.ZXingStandardCharsets=Vi,c.ZXingStringBuilder=De,c.ZXingStringEncoding=ct,c.ZXingSystem=ne,c.createAbstractExpandedDecoder=Ws,Object.defineProperty(c,"__esModule",{value:!0})})}(Nr,Nr.exports)),Nr.exports}var et=nc();const rc=ec(et),ic=I1({__proto__:null,default:rc},[et]);var Po=function(){function s(a,c,h){if(this.formatMap=new Map([[ie.QR_CODE,et.BarcodeFormat.QR_CODE],[ie.AZTEC,et.BarcodeFormat.AZTEC],[ie.CODABAR,et.BarcodeFormat.CODABAR],[ie.CODE_39,et.BarcodeFormat.CODE_39],[ie.CODE_93,et.BarcodeFormat.CODE_93],[ie.CODE_128,et.BarcodeFormat.CODE_128],[ie.DATA_MATRIX,et.BarcodeFormat.DATA_MATRIX],[ie.MAXICODE,et.BarcodeFormat.MAXICODE],[ie.ITF,et.BarcodeFormat.ITF],[ie.EAN_13,et.BarcodeFormat.EAN_13],[ie.EAN_8,et.BarcodeFormat.EAN_8],[ie.PDF_417,et.BarcodeFormat.PDF_417],[ie.RSS_14,et.BarcodeFormat.RSS_14],[ie.RSS_EXPANDED,et.BarcodeFormat.RSS_EXPANDED],[ie.UPC_A,et.BarcodeFormat.UPC_A],[ie.UPC_E,et.BarcodeFormat.UPC_E],[ie.UPC_EAN_EXTENSION,et.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ic)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=c,this.logger=h;var g=this.createZXingFormats(a),d=new Map;d.set(et.DecodeHintType.POSSIBLE_FORMATS,g),d.set(et.DecodeHintType.TRY_HARDER,!1),this.hints=d}return s.prototype.decodeAsync=function(a){var c=this;return new Promise(function(h,g){try{h(c.decode(a))}catch(d){g(d)}})},s.prototype.decode=function(a){var c=new et.MultiFormatReader(this.verbose,this.hints),h=new et.HTMLCanvasElementLuminanceSource(a),g=new et.BinaryBitmap(new et.HybridBinarizer(h)),d=c.decode(g);return{text:d.text,format:Xa.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},s.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(c,h,g){a.set(c,h)}),a},s.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},s.prototype.createZXingFormats=function(a){for(var c=[],h=0,g=a;h<g.length;h++){var d=g[h];this.formatMap.has(d)?c.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return c},s.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},s}(),sc=function(s,a,c,h){function g(d){return d instanceof c?d:new c(function(A){A(d)})}return new(c||(c=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(O){A(O)}}function y(_){try{C(h.throw(_))}catch(O){A(O)}}function C(_){_.done?d(_.value):g(_.value).then(m,y)}C((h=h.apply(s,a||[])).next())})},oc=function(s,a){var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return y([C,_])}}function y(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(c=0)),c;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return c.label++,{value:C[1],done:!1};case 5:c.label++,g=C[1],C=[0];continue;case 7:C=c.ops.pop(),c.trys.pop();continue;default:if(d=c.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){c=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){c.label=C[1];break}if(C[0]===6&&c.label<d[1]){c.label=d[1],d=C;break}if(d&&c.label<d[2]){c.label=d[2],c.ops.push(C);break}d[2]&&c.ops.pop(),c.trys.pop();continue}C=a.call(s,c)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Lo=function(){function s(a,c,h){if(this.formatMap=new Map([[ie.QR_CODE,"qr_code"],[ie.AZTEC,"aztec"],[ie.CODABAR,"codabar"],[ie.CODE_39,"code_39"],[ie.CODE_93,"code_93"],[ie.CODE_128,"code_128"],[ie.DATA_MATRIX,"data_matrix"],[ie.ITF,"itf"],[ie.EAN_13,"ean_13"],[ie.EAN_8,"ean_8"],[ie.PDF_417,"pdf417"],[ie.UPC_A,"upc_a"],[ie.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!s.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=c,this.logger=h;var g=this.createBarcodeDetectorFormats(a);if(this.detector=new BarcodeDetector(g),!this.detector)throw"BarcodeDetector detector not supported"}return s.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var a=new BarcodeDetector({formats:["qr_code"]});return typeof a<"u"},s.prototype.decodeAsync=function(a){return sc(this,void 0,void 0,function(){var c,h;return oc(this,function(g){switch(g.label){case 0:return[4,this.detector.detect(a)];case 1:if(c=g.sent(),!c||c.length===0)throw"No barcode or QR code detected.";return h=this.selectLargestBarcode(c),[2,{text:h.rawValue,format:Xa.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}]}})})},s.prototype.selectLargestBarcode=function(a){for(var c=null,h=0,g=0,d=a;g<d.length;g++){var A=d[g],m=A.boundingBox.width*A.boundingBox.height;m>h&&(h=m,c=A)}if(!c)throw"No largest barcode found";return c},s.prototype.createBarcodeDetectorFormats=function(a){for(var c=[],h=0,g=a;h<g.length;h++){var d=g[h];this.formatMap.has(d)?c.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:c}},s.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},s.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(c,h,g){a.set(c,h)}),a},s.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},s}(),Fo=function(s,a,c,h){function g(d){return d instanceof c?d:new c(function(A){A(d)})}return new(c||(c=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(O){A(O)}}function y(_){try{C(h.throw(_))}catch(O){A(O)}}function C(_){_.done?d(_.value):g(_.value).then(m,y)}C((h=h.apply(s,a||[])).next())})},ko=function(s,a){var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return y([C,_])}}function y(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(c=0)),c;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return c.label++,{value:C[1],done:!1};case 5:c.label++,g=C[1],C=[0];continue;case 7:C=c.ops.pop(),c.trys.pop();continue;default:if(d=c.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){c=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){c.label=C[1];break}if(C[0]===6&&c.label<d[1]){c.label=d[1],d=C;break}if(d&&c.label<d[2]){c.label=d[2],c.ops.push(C);break}d[2]&&c.ops.pop(),c.trys.pop();continue}C=a.call(s,c)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},ac=function(){function s(a,c,h,g){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=h,c&&Lo.isSupported()?(this.primaryDecoder=new Lo(a,h,g),this.secondaryDecoder=new Po(a,h,g)):this.primaryDecoder=new Po(a,h,g)}return s.prototype.decodeAsync=function(a){return Fo(this,void 0,void 0,function(){var c;return ko(this,function(h){switch(h.label){case 0:c=performance.now(),h.label=1;case 1:return h.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,h.sent()];case 3:return this.possiblyLogPerformance(c),[7];case 4:return[2]}})})},s.prototype.decodeRobustlyAsync=function(a){return Fo(this,void 0,void 0,function(){var c,h;return ko(this,function(g){switch(g.label){case 0:c=performance.now(),g.label=1;case 1:return g.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,g.sent()];case 3:if(h=g.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw h;case 4:return this.possiblyLogPerformance(c),[7];case 5:return[2]}})})},s.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},s.prototype.possiblyLogPerformance=function(a){if(this.verbose){var c=performance.now()-a;this.executionResults.push(c),this.executions++,this.possiblyFlushPerformanceReport()}},s.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,c=0,h=this.executionResults;c<h.length;c++){var g=h[c];a+=g}var d=a/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},s}(),ks=function(){var s=function(a,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(h[d]=g[d])},s(a,c)};return function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(a,c);function h(){this.constructor=a}a.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}(),gi=function(s,a,c,h){function g(d){return d instanceof c?d:new c(function(A){A(d)})}return new(c||(c=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(O){A(O)}}function y(_){try{C(h.throw(_))}catch(O){A(O)}}function C(_){_.done?d(_.value):g(_.value).then(m,y)}C((h=h.apply(s,a||[])).next())})},xi=function(s,a){var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return y([C,_])}}function y(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(c=0)),c;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return c.label++,{value:C[1],done:!1};case 5:c.label++,g=C[1],C=[0];continue;case 7:C=c.ops.pop(),c.trys.pop();continue;default:if(d=c.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){c=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){c.label=C[1];break}if(C[0]===6&&c.label<d[1]){c.label=d[1],d=C;break}if(d&&c.label<d[2]){c.label=d[2],c.ops.push(C);break}d[2]&&c.ops.pop(),c.trys.pop();continue}C=a.call(s,c)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},za=function(){function s(a,c){this.name=a,this.track=c}return s.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},s.prototype.apply=function(a){var c={};c[this.name]=a;var h={advanced:[c]};return this.track.applyConstraints(h)},s.prototype.value=function(){var a=this.track.getSettings();if(this.name in a){var c=a[this.name];return c}return null},s}(),lc=function(s){ks(a,s);function a(c,h){return s.call(this,c,h)||this}return a.prototype.min=function(){return this.getCapabilities().min},a.prototype.max=function(){return this.getCapabilities().max},a.prototype.step=function(){return this.getCapabilities().step},a.prototype.apply=function(c){var h={};h[this.name]=c;var g={advanced:[h]};return this.track.applyConstraints(g)},a.prototype.getCapabilities=function(){this.failIfNotSupported();var c=this.track.getCapabilities(),h=c[this.name];return{min:h.min,max:h.max,step:h.step}},a.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},a}(za),cc=function(s){ks(a,s);function a(c){return s.call(this,"zoom",c)||this}return a}(lc),fc=function(s){ks(a,s);function a(c){return s.call(this,"torch",c)||this}return a}(za),uc=function(){function s(a){this.track=a}return s.prototype.zoomFeature=function(){return new cc(this.track)},s.prototype.torchFeature=function(){return new fc(this.track)},s}(),hc=function(){function s(a,c,h){this.isClosed=!1,this.parentElement=a,this.mediaStream=c,this.callbacks=h,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return s.prototype.createVideoElement=function(a){var c=document.createElement("video");return c.style.width="".concat(a,"px"),c.style.display="block",c.muted=!0,c.setAttribute("muted","true"),c.playsInline=!0,c},s.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var c=function(){var h=a.surface.clientWidth,g=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(h,g),a.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.srcObject=this.mediaStream,this.surface.play()},s.create=function(a,c,h,g){return gi(this,void 0,void 0,function(){var d,A;return xi(this,function(m){switch(m.label){case 0:return d=new s(a,c,g),h.aspectRatio?(A={aspectRatio:h.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(A)]):[3,2];case 1:m.sent(),m.label=2;case 2:return d.setupSurface(),[2,d]}})})},s.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},s.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},s.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},s.prototype.resume=function(a){this.failIfClosed();var c=this,h=function(){setTimeout(a,200),c.surface.removeEventListener("playing",h)};this.surface.addEventListener("playing",h),this.surface.play()},s.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},s.prototype.getSurface=function(){return this.failIfClosed(),this.surface},s.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},s.prototype.applyVideoConstraints=function(a){return gi(this,void 0,void 0,function(){return xi(this,function(c){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},s.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(c,h){var g=a.mediaStream.getVideoTracks(),d=g.length,A=0;a.mediaStream.getVideoTracks().forEach(function(m){a.mediaStream.removeTrack(m),m.stop(),++A,A>=d&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),c())})})},s.prototype.getCapabilities=function(){return new uc(this.getFirstTrackOrFail())},s}(),dc=function(){function s(a){this.mediaStream=a}return s.prototype.render=function(a,c,h){return gi(this,void 0,void 0,function(){return xi(this,function(g){return[2,hc.create(a,this.mediaStream,c,h)]})})},s.create=function(a){return gi(this,void 0,void 0,function(){var c,h;return xi(this,function(g){switch(g.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return c={audio:!1,video:a},[4,navigator.mediaDevices.getUserMedia(c)];case 1:return h=g.sent(),[2,new s(h)]}})})},s}(),Uo=function(s,a,c,h){function g(d){return d instanceof c?d:new c(function(A){A(d)})}return new(c||(c=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(O){A(O)}}function y(_){try{C(h.throw(_))}catch(O){A(O)}}function C(_){_.done?d(_.value):g(_.value).then(m,y)}C((h=h.apply(s,a||[])).next())})},Vo=function(s,a){var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return y([C,_])}}function y(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(c=0)),c;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return c.label++,{value:C[1],done:!1};case 5:c.label++,g=C[1],C=[0];continue;case 7:C=c.ops.pop(),c.trys.pop();continue;default:if(d=c.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){c=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){c.label=C[1];break}if(C[0]===6&&c.label<d[1]){c.label=d[1],d=C;break}if(d&&c.label<d[2]){c.label=d[2],c.ops.push(C);break}d[2]&&c.ops.pop(),c.trys.pop();continue}C=a.call(s,c)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},gc=function(){function s(){}return s.failIfNotSupported=function(){return Uo(this,void 0,void 0,function(){return Vo(this,function(a){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new s]})})},s.prototype.create=function(a){return Uo(this,void 0,void 0,function(){return Vo(this,function(c){return[2,dc.create(a)]})})},s}(),xc=function(s,a,c,h){function g(d){return d instanceof c?d:new c(function(A){A(d)})}return new(c||(c=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(O){A(O)}}function y(_){try{C(h.throw(_))}catch(O){A(O)}}function C(_){_.done?d(_.value):g(_.value).then(m,y)}C((h=h.apply(s,a||[])).next())})},wc=function(s,a){var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return y([C,_])}}function y(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(c=0)),c;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return c.label++,{value:C[1],done:!1};case 5:c.label++,g=C[1],C=[0];continue;case 7:C=c.ops.pop(),c.trys.pop();continue;default:if(d=c.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){c=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){c.label=C[1];break}if(C[0]===6&&c.label<d[1]){c.label=d[1],d=C;break}if(d&&c.label<d[2]){c.label=d[2],c.ops.push(C);break}d[2]&&c.ops.pop(),c.trys.pop();continue}C=a.call(s,c)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},pc=function(){function s(){}return s.retrieve=function(){if(navigator.mediaDevices)return s.getCamerasFromMediaDevices();var a=MediaStreamTrack;return MediaStreamTrack&&a.getSources?s.getCamerasFromMediaStreamTrack():s.rejectWithError()},s.rejectWithError=function(){var a=lr.unableToQuerySupportedDevices();return s.isHttpsOrLocalhost()||(a=lr.insecureContextCameraQueryError()),Promise.reject(a)},s.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var a=location.host.split(":")[0];return a==="127.0.0.1"||a==="localhost"},s.getCamerasFromMediaDevices=function(){return xc(this,void 0,void 0,function(){var a,c,h,g,d,A,m;return wc(this,function(y){switch(y.label){case 0:return a=function(C){for(var _=C.getVideoTracks(),O=0,z=_;O<z.length;O++){var Y=z[O];Y.enabled=!1,Y.stop(),C.removeTrack(Y)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return c=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(h=y.sent(),g=[],d=0,A=h;d<A.length;d++)m=A[d],m.kind==="videoinput"&&g.push({id:m.deviceId,label:m.label});return a(c),[2,g]}})})},s.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,c){var h=function(d){for(var A=[],m=0,y=d;m<y.length;m++){var C=y[m];C.kind==="video"&&A.push({id:C.id,label:C.label})}a(A)},g=MediaStreamTrack;g.getSources(h)})},s}(),at;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED"})(at||(at={}));var Ac=function(){function s(){this.state=at.NOT_STARTED,this.onGoingTransactionNewState=at.UNKNOWN}return s.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},s.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},s.prototype.execute=function(){if(this.onGoingTransactionNewState===at.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=at.UNKNOWN,this.directTransition(a)},s.prototype.cancel=function(){if(this.onGoingTransactionNewState===at.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=at.UNKNOWN},s.prototype.getState=function(){return this.state},s.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==at.UNKNOWN)throw"Cannot transition to a new state, already under transition"},s.prototype.validateTransition=function(a){switch(this.state){case at.UNKNOWN:throw"Transition from unknown is not allowed";case at.NOT_STARTED:this.failIfNewStateIs(a,[at.PAUSED]);break;case at.SCANNING:break;case at.PAUSED:break}},s.prototype.failIfNewStateIs=function(a,c){for(var h=0,g=c;h<g.length;h++){var d=g[h];if(a===d)throw"Cannot transition from ".concat(this.state," to ").concat(a)}},s}(),Ec=function(){function s(a){this.stateManager=a}return s.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},s.prototype.directTransition=function(a){this.stateManager.directTransition(a)},s.prototype.getState=function(){return this.stateManager.getState()},s.prototype.canScanFile=function(){return this.stateManager.getState()===at.NOT_STARTED},s.prototype.isScanning=function(){return this.stateManager.getState()!==at.NOT_STARTED},s.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===at.SCANNING},s.prototype.isPaused=function(){return this.stateManager.getState()===at.PAUSED},s}(),Cc=function(){function s(){}return s.create=function(){return new Ec(new Ac)},s}(),mc=function(){var s=function(a,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(h[d]=g[d])},s(a,c)};return function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(a,c);function h(){this.constructor=a}a.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}(),Xt=function(s){mc(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return a.DEFAULT_WIDTH=300,a.DEFAULT_WIDTH_OFFSET=2,a.FILE_SCAN_MIN_HEIGHT=300,a.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,a.MIN_QR_BOX_SIZE=50,a.SHADED_LEFT=1,a.SHADED_RIGHT=2,a.SHADED_TOP=3,a.SHADED_BOTTOM=4,a.SHADED_REGION_ELEMENT_ID="qr-shaded-region",a.VERBOSE=!1,a.BORDER_SHADER_DEFAULT_COLOR="#ffffff",a.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",a}(Q0),bc=function(){function s(a,c){this.logger=c,this.fps=Xt.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=a.disableFlip===!0,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=Xt.DEFAULT_DISABLE_FLIP}return s.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ya.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},s.prototype.isShadedBoxEnabled=function(){return!Cn(this.qrbox)},s.create=function(a,c){return new s(a,c)},s}(),Ic=function(){function s(a,c){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1;var h;typeof c=="boolean"?this.verbose=c===!0:c&&(h=c,this.verbose=h.verbose===!0,h.experimentalFeatures),this.logger=new $0(this.verbose),this.qrcode=new ac(this.getSupportedFormats(c),this.getUseBarCodeDetectorIfSupported(h),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Cc.create()}return s.prototype.start=function(a,c,h,g){var d=this;if(!a)throw"cameraIdOrConfig is required";if(!h||typeof h!="function")throw"qrCodeSuccessCallback is required and should be a function.";var A;g?A=g:A=this.verbose?this.logger.log:function(){};var m=bc.create(c,this.logger);this.clearElement();var y=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var C=y,_=document.getElementById(this.elementId);_.clientWidth?_.clientWidth:Xt.DEFAULT_WIDTH,_.style.position="relative",this.shouldScan=!0,this.element=_;var O=this,z=this.stateManagerProxy.startTransition(at.SCANNING);return new Promise(function(Y,we){var ne=C?m.videoConstraints:O.createVideoConstraints(a);if(!ne){z.cancel(),we("videoConstraints should be defined");return}var Xe={};(!C||m.aspectRatio)&&(Xe.aspectRatio=m.aspectRatio);var Se={onRenderSurfaceReady:function(de,te){O.setupUi(de,te,m),O.isScanning=!0,O.foreverScan(m,h,A)}};gc.failIfNotSupported().then(function(de){de.create(ne).then(function(te){return te.render(d.element,Xe,Se).then(function($){O.renderedCamera=$,z.execute(),Y(null)}).catch(function($){z.cancel(),we($)})}).catch(function(te){z.cancel(),we(lr.errorGettingUserMedia(te))})}).catch(function(de){z.cancel(),we(lr.cameraStreamingNotSupported())})})},s.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(at.PAUSED),this.showPausedState(),(Cn(a)||a!==!0)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},s.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,c=function(){a.stateManagerProxy.directTransition(at.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused()){c();return}this.renderedCamera.resume(function(){c()})},s.prototype.getState=function(){return this.stateManagerProxy.getState()},s.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var c=this.stateManagerProxy.startTransition(at.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var h=function(){if(a.element){var d=document.getElementById(Xt.SHADED_REGION_ELEMENT_ID);d&&a.element.removeChild(d)}},g=this;return this.renderedCamera.close().then(function(){return g.renderedCamera=null,g.element&&(g.element.removeChild(g.canvasElement),g.canvasElement=null),h(),g.qrRegion&&(g.qrRegion=null),g.context&&(g.context=null),c.execute(),g.hidePausedState(),g.isScanning=!1,Promise.resolve()})},s.prototype.scanFile=function(a,c){return this.scanFileV2(a,c).then(function(h){return h.decodedText})},s.prototype.scanFileV2=function(a,c){var h=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Cn(c)&&(c=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(g,d){h.possiblyCloseLastScanImageFile(),h.clearElement(),h.lastScanImageFile=URL.createObjectURL(a);var A=new Image;A.onload=function(){var m=A.width,y=A.height,C=document.getElementById(h.elementId),_=C.clientWidth?C.clientWidth:Xt.DEFAULT_WIDTH,O=Math.max(C.clientHeight?C.clientHeight:y,Xt.FILE_SCAN_MIN_HEIGHT),z=h.computeCanvasDrawConfig(m,y,_,O);if(c){var Y=h.createCanvasElement(_,O,"qr-canvas-visible");Y.style.display="inline-block",C.appendChild(Y);var we=Y.getContext("2d");if(!we)throw"Unable to get 2d context from canvas";we.canvas.width=_,we.canvas.height=O,we.drawImage(A,0,0,m,y,z.x,z.y,z.width,z.height)}var ne=Xt.FILE_SCAN_HIDDEN_CANVAS_PADDING,Xe=Math.max(A.width,z.width),Se=Math.max(A.height,z.height),de=Xe+2*ne,te=Se+2*ne,$=h.createCanvasElement(de,te);C.appendChild($);var We=$.getContext("2d");if(!We)throw"Unable to get 2d context from canvas";We.canvas.width=de,We.canvas.height=te,We.drawImage(A,0,0,m,y,ne,ne,Xe,Se);try{h.qrcode.decodeRobustlyAsync($).then(function(Te){g(vo.createFromQrcodeResult(Te))}).catch(d)}catch(Te){d("QR code parse error, error = ".concat(Te))}},A.onerror=d,A.onabort=d,A.onstalled=d,A.onsuspend=d,A.src=URL.createObjectURL(a)})},s.prototype.clear=function(){this.clearElement()},s.getCameras=function(){return pc.retrieve()},s.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},s.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},s.prototype.applyVideoConstraints=function(a){if(a){if(!Ya.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},s.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},s.prototype.getSupportedFormats=function(a){var c=[ie.QR_CODE,ie.AZTEC,ie.CODABAR,ie.CODE_39,ie.CODE_93,ie.CODE_128,ie.DATA_MATRIX,ie.MAXICODE,ie.ITF,ie.EAN_13,ie.EAN_8,ie.PDF_417,ie.RSS_14,ie.RSS_EXPANDED,ie.UPC_A,ie.UPC_E,ie.UPC_EAN_EXTENSION];if(!a||typeof a=="boolean"||!a.formatsToSupport)return c;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(a.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var h=[],g=0,d=a.formatsToSupport;g<d.length;g++){var A=d[g];q0(A)?h.push(A):this.logger.warn("Invalid format: ".concat(A," passed in config, ignoring."))}if(h.length===0)throw"None of formatsToSupport match supported values.";return h},s.prototype.getUseBarCodeDetectorIfSupported=function(a){if(Cn(a))return!0;if(!Cn(a.useBarCodeDetectorIfSupported))return a.useBarCodeDetectorIfSupported!==!1;if(Cn(a.experimentalFeatures))return!0;var c=a.experimentalFeatures;return Cn(c.useBarCodeDetectorIfSupported)?!0:c.useBarCodeDetectorIfSupported!==!1},s.prototype.validateQrboxSize=function(a,c,h){var g=this,d=h.qrbox;this.validateQrboxConfig(d);var A=this.toQrdimensions(a,c,d),m=function(C){if(C<Xt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Xt.MIN_QR_BOX_SIZE,"px.")},y=function(C){return C>a&&(g.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),C=a),C};m(A.width),m(A.height),A.width=y(A.width)},s.prototype.validateQrboxConfig=function(a){if(typeof a!="number"&&typeof a!="function"&&(a.width===void 0||a.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},s.prototype.toQrdimensions=function(a,c,h){if(typeof h=="number")return{width:h,height:h};if(typeof h=="function")try{return h(a,c)}catch(g){throw new Error("qrbox config was passed as a function but it failed with unknown error"+g)}return h},s.prototype.setupUi=function(a,c,h){h.isShadedBoxEnabled()&&this.validateQrboxSize(a,c,h);var g=Cn(h.qrbox)?{width:a,height:c}:h.qrbox;this.validateQrboxConfig(g);var d=this.toQrdimensions(a,c,g);d.height>c&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var A=h.isShadedBoxEnabled()&&d.height<=c,m={x:0,y:0,width:a,height:c},y=A?this.getShadedRegionBounds(a,c,d):m,C=this.createCanvasElement(y.width,y.height),_={willReadFrequently:!0},O=C.getContext("2d",_);O.canvas.width=y.width,O.canvas.height=y.height,this.element.append(C),A&&this.possiblyInsertShadingElement(this.element,a,c,d),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=O,this.canvasElement=C},s.prototype.createScannerPausedUiElement=function(a){var c=document.createElement("div");c.innerText=lr.scannerPaused(),c.style.display="none",c.style.position="absolute",c.style.top="0px",c.style.zIndex="1",c.style.background="rgba(9, 9, 9, 0.46)",c.style.color="#FFECEC",c.style.textAlign="center",c.style.width="100%",a.appendChild(c),this.scannerPausedUiElement=c},s.prototype.scanContext=function(a,c){var h=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(g){return a(g.text,vo.createFromQrcodeResult(g)),h.possiblyUpdateShaders(!0),!0}).catch(function(g){h.possiblyUpdateShaders(!1);var d=lr.codeParseError(g);return c(d,J0.createFrom(d)),!1})},s.prototype.foreverScan=function(a,c,h){var g=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),A=d.videoWidth/d.clientWidth,m=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*A,C=this.qrRegion.height*m,_=this.qrRegion.x*A,O=this.qrRegion.y*m;this.context.drawImage(d,_,O,y,C,0,0,this.qrRegion.width,this.qrRegion.height);var z=function(){g.foreverScanTimeout=setTimeout(function(){g.foreverScan(a,c,h)},g.getTimeoutFps(a.fps))};this.scanContext(c,h).then(function(Y){!Y&&a.disableFlip!==!0?(g.context.translate(g.context.canvas.width,0),g.context.scale(-1,1),g.scanContext(c,h).finally(function(){z()})):z()}).catch(function(Y){g.logger.logError("Error happend while scanning context",Y),z()})}},s.prototype.createVideoConstraints=function(a){if(typeof a=="string")return{deviceId:{exact:a}};if(typeof a=="object"){var c="facingMode",h="deviceId",g={user:!0,environment:!0},d="exact",A=function(we){if(we in g)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(we,"'")},m=Object.keys(a);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var y=Object.keys(a)[0];if(y!==c&&y!==h)throw"Only '".concat(c,"' and '").concat(h,"' ")+" are supported for 'cameraIdOrConfig'";if(y===c){var C=a.facingMode;if(typeof C=="string"){if(A(C))return{facingMode:C}}else if(typeof C=="object")if(d in C){if(A(C["".concat(d)]))return{facingMode:{exact:C["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var _=typeof C;throw"Invalid type of 'facingMode' = ".concat(_)}}else{var O=a.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(d in O)return{deviceId:{exact:O["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var z=typeof O;throw"Invalid type of 'deviceId' = ".concat(z)}}}var Y=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(Y)},s.prototype.computeCanvasDrawConfig=function(a,c,h,g){if(a<=h&&c<=g){var d=(h-a)/2,A=(g-c)/2;return{x:d,y:A,width:a,height:c}}else{var m=a,y=c;return a>h&&(c=h/a*c,a=h),c>g&&(a=g/c*a,c=g),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(y)+" to ".concat(a,"X").concat(c,".")),this.computeCanvasDrawConfig(a,c,h,g)}},s.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},s.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(c){c.style.backgroundColor=a?Xt.BORDER_SHADER_MATCH_COLOR:Xt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},s.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},s.prototype.createCanvasElement=function(a,c,h){var g=a,d=c,A=document.createElement("canvas");return A.style.width="".concat(g,"px"),A.style.height="".concat(d,"px"),A.style.display="none",A.id=Cn(h)?"qr-canvas":h,A},s.prototype.getShadedRegionBounds=function(a,c,h){if(h.width>a||h.height>c)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-h.width)/2,y:(c-h.height)/2,width:h.width,height:h.height}},s.prototype.possiblyInsertShadingElement=function(a,c,h,g){if(!(c-g.width<1||h-g.height<1)){var d=document.createElement("div");d.style.position="absolute";var A=(c-g.width)/2,m=(h-g.height)/2;if(d.style.borderLeft="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Xt.SHADED_REGION_ELEMENT_ID),c-g.width<11||h-g.height<11)this.hasBorderShaders=!1;else{var y=5,C=40;this.insertShaderBorders(d,C,y,-y,null,0,!0),this.insertShaderBorders(d,C,y,-y,null,0,!1),this.insertShaderBorders(d,C,y,null,-y,0,!0),this.insertShaderBorders(d,C,y,null,-y,0,!1),this.insertShaderBorders(d,y,C+y,-y,null,-y,!0),this.insertShaderBorders(d,y,C+y,null,-y,-y,!0),this.insertShaderBorders(d,y,C+y,-y,null,-y,!1),this.insertShaderBorders(d,y,C+y,null,-y,-y,!1),this.hasBorderShaders=!0}a.append(d)}},s.prototype.insertShaderBorders=function(a,c,h,g,d,A,m){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=Xt.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(c,"px"),y.style.height="".concat(h,"px"),g!==null&&(y.style.top="".concat(g,"px")),d!==null&&(y.style.bottom="".concat(d,"px")),m?y.style.left="".concat(A,"px"):y.style.right="".concat(A,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),a.appendChild(y)},s.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},s.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},s.prototype.getTimeoutFps=function(a){return 1e3/a},s}(),Ho;(function(s){s[s.STATUS_DEFAULT=0]="STATUS_DEFAULT",s[s.STATUS_SUCCESS=1]="STATUS_SUCCESS",s[s.STATUS_WARNING=2]="STATUS_WARNING",s[s.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ho||(Ho={}));const yc={__name:"ScannerView",setup(s){const a=async c=>{try{const d=(await(await fetch("/db.json")).json()).find(A=>A.code===c);if(d){const A=d.model;window.location.href=`/ar-viewer?model=${encodeURIComponent(A)}`}else alert(`No se encontr ningn modelo para el cdigo: ${c}`)}catch(h){console.error("Error al buscar modelo en db.json:",h),alert("Error al cargar los datos del modelo.")}};return Ms(()=>{const c=new Ic("reader");c.start({facingMode:"environment"},{fps:10,qrbox:250},async h=>{console.log("Cdigo ledo:",h),await c.stop(),await a(h)},h=>{})}),(c,h)=>(Ps(),ka("div",null,h[0]||(h[0]=[ui("h2",null,"Escanea un QR",-1),ui("div",{id:"reader",style:{width:"300px"}},null,-1)])))}},_c={style:{margin:"0",overflow:"hidden"}},Tc={__name:"ARViewerView",setup(s){const a=al("");return Ms(()=>{const c=new URLSearchParams(window.location.search);a.value=c.get("model")||"/modelos/silla.glb"}),(c,h)=>{const g=Ki("a-entity"),d=Ki("a-marker"),A=Ki("a-scene");return Ps(),ka("div",_c,[Qt(A,{embedded:"",arjs:"sourceType: webcam; debugUIEnabled: false;"},{default:as(()=>[Qt(d,{preset:"hiro"},{default:as(()=>[Qt(g,{id:"model","gltf-model":a.value,scale:"0.5 0.5 0.5"},null,8,["gltf-model"])]),_:1}),Qt(g,{camera:""})]),_:1})])}}},Sc={__name:"App",setup(s){const c=window.location.pathname.includes("ar-viewer")?Tc:yc;return(h,g)=>(Ps(),c0(Ml(oa(c))))}};Z0(Sc).mount("#app");
